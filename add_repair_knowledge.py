#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
–°–∫—Ä–∏–ø—Ç –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –∑–Ω–∞–Ω–∏–π –æ —Ä–µ–º–æ–Ω—Ç–µ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
–û—Å–Ω–æ–≤–∞–Ω –Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —Å —Ñ–æ—Ä—É–º–æ–≤ –∏ —Å—Ö–µ–º
"""

import json
import os

def load_json(filename):
    """–ó–∞–≥—Ä—É–∑–∫–∞ JSON —Ñ–∞–π–ª–∞"""
    filepath = f'public/data/{filename}'
    try:
        with open(filepath, 'r', encoding='utf-8') as f:
            return json.load(f)
    except FileNotFoundError:
        return {}

def save_json(data, filename):
    """–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ JSON —Ñ–∞–π–ª–∞"""
    filepath = f'public/data/{filename}'
    with open(filepath, 'w', encoding='utf-8') as f:
        json.dump(data, f, ensure_ascii=False, indent=2)
    print(f"‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω —Ñ–∞–π–ª: {filepath}")

def add_tristar_knowledge():
    """–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–Ω–∞–Ω–∏–π –æ Tristar/Hydra –ø—Ä–æ–±–ª–µ–º–∞—Ö"""
    
    tristar_data = {
        "tristar_hydra_diagnosis": {
            "description": "–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏ —Ä–µ–º–æ–Ω—Ç Tristar/Hydra/U2 IC - –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∑–∞—Ä—è–¥–∫–∏ USB",
            "symptoms": {
                "common": [
                    "–ù–µ –∑–∞—Ä—è–∂–∞–µ—Ç—Å—è –≤–æ–æ–±—â–µ",
                    "Accessory not supported –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –∫–∞–±–µ–ª—è",
                    "–ó–∞—Ä—è–∂–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ—Ç –∫–æ–º–ø—å—é—Ç–µ—Ä–∞, –Ω–æ –Ω–µ –æ—Ç –∑–∞—Ä—è–¥–∫–∏",
                    "–ë–∞—Ç–∞—Ä–µ—è –±—ã—Å—Ç—Ä–æ —Ä–∞–∑—Ä—è–∂–∞–µ—Ç—Å—è",
                    "–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –≤ iTunes",
                    "–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∑–∞—Ä—è–¥–∫–∏",
                    "–ì—Ä–µ–µ—Ç—Å—è –ø—Ä–∏ –∑–∞—Ä—è–¥–∫–µ –≤ —Ä–∞–π–æ–Ω–µ —Ä–∞–∑—ä–µ–º–∞"
                ],
                "diagnostic_steps": [
                    "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–æ–∫ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è - –µ—Å–ª–∏ 0.00A –∏–ª–∏ 0.003A = –≤–µ—Ä–æ—è—Ç–Ω–æ Tristar",
                    "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å diode mode –Ω–∞ –ª–∏–Ω–∏—è—Ö D+ D- (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 0.650V)",
                    "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Tristar Tester –æ—Ç iPad Rehab",
                    "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –Ω–∞ –∫–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä–∞—Ö –≤–æ–∫—Ä—É–≥ Tristar",
                    "–ï—Å–ª–∏ –±–∞—Ç–∞—Ä–µ—è –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–∑—Ä—è–∂–µ–Ω–∞ - –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –≤–Ω–µ—à–Ω—é—é –∑–∞—Ä—è–¥–∫—É –±–∞—Ç–∞—Ä–µ–∏"
                ]
            },
            "causes": [
                "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–µ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∫–∞–±–µ–ª–µ–π (–≥–ª–∞–≤–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞)",
                "–°–∫–∞—á–∫–∏ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –ø—Ä–∏ –∑–∞—Ä—è–¥–∫–µ",
                "–ü–æ–ø–∞–¥–∞–Ω–∏–µ –≤–ª–∞–≥–∏ –Ω–∞ —Ä–∞–∑—ä–µ–º",
                "–ú–µ—Ö–∞–Ω–∏—á–µ—Å–∫–∏–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏—è —Ä–∞–∑—ä–µ–º–∞",
                "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∞–≤—Ç–æ–º–æ–±–∏–ª—å–Ω—ã—Ö –∑–∞—Ä—è–¥–æ–∫ –Ω–∏–∑–∫–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞"
            ],
            "repair_tips": [
                "Tristar –Ω–µ–ª—å–∑—è –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–ø–∞—è—Ç—å - –Ω—É–∂–Ω–∞ –∑–∞–º–µ–Ω–∞ –Ω–∞ –Ω–æ–≤—ã–π",
                "–ü–æ—Å–ª–µ –∑–∞–º–µ–Ω—ã –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ iTunes",
                "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤–æ–∫—Ä—É–≥ Tristar –ø–µ—Ä–µ–¥ –∑–∞–º–µ–Ω–æ–π",
                "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–ª—é—Å Amtech 559 –¥–ª—è –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–π –ø–∞–π–∫–∏",
                "–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ —Ñ–µ–Ω–∞ 380-400¬∞C –¥–ª—è –¥–µ–º–æ–Ω—Ç–∞–∂–∞"
            ],
            "compatible_donors": {
                "iPhone_6": ["iPhone 6", "iPhone 6 Plus - U1700 (1610A1)"],
                "iPhone_7": ["iPhone 7 Qualcomm - U4001 (1612A1)", "iPhone 7 Intel - –¥—Ä—É–≥–∞—è –≤–µ—Ä—Å–∏—è"],
                "iPhone_8_X": ["iPhone 8/8+/X - Hydra U6300 (338S00248)"],
                "iPhone_11_12": ["iPhone 11/12/13 - –∏—Å–ø–æ–ª—å–∑—É—é—Ç –Ω–æ–≤—ã–µ –≤–µ—Ä—Å–∏–∏ Hydra"]
            },
            "testing_after_repair": [
                "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞—Ä—è–¥–∫—É –æ—Ç —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤",
                "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤ iTunes",
                "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –∞–∫—Å–µ—Å—Å—É–∞—Ä–æ–≤",
                "–ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É –ø—Ä–∏ –∑–∞—Ä—è–¥–∫–µ",
                "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–æ–∫ –∑–∞—Ä—è–¥–∫–∏ (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 0.8-1.0A)"
            ]
        }
    }
    
    return tristar_data

def add_smc_knowledge():
    """–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–Ω–∞–Ω–∏–π –æ SMC –ø—Ä–æ–±–ª–µ–º–∞—Ö MacBook"""
    
    smc_data = {
        "smc_failures": {
            "description": "System Management Controller - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∏—Ç–∞–Ω–∏–µ–º –∏ —Ç–µ—Ä–º–æ–∫–æ–Ω—Ç—Ä–æ–ª–µ–º",
            "primary_symptoms": [
                "MacBook –Ω–µ –≤–∫–ª—é—á–∞–µ—Ç—Å—è –≤–æ–æ–±—â–µ",
                "–í–Ω–µ–∑–∞–ø–Ω—ã–µ –≤—ã–∫–ª—é—á–µ–Ω–∏—è –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏",
                "–í–µ–Ω—Ç–∏–ª—è—Ç–æ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏",
                "–ù–µ –∑–∞—Ä—è–∂–∞–µ—Ç—Å—è –±–∞—Ç–∞—Ä–µ—è",
                "–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞—Ä—è–¥–∞ –±–∞—Ç–∞—Ä–µ–∏",
                "USB –ø–æ—Ä—Ç—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç",
                "–ü–æ–¥—Å–≤–µ—Ç–∫–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç",
                "–¢—Ä–µ–∫–ø–∞–¥ –Ω–µ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç"
            ],
            "diagnostic_approach": {
                "ppbus_voltage": "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å PPBUS_G3H - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 12.56V (¬±0.5V)",
                "pp3v3_s5": "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å PP3V3_S5 - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 3.3V",
                "smc_reset_test": "–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å SMC reset - –µ—Å–ª–∏ –ø–æ–º–æ–≥–∞–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω–æ = SMC –ø—Ä–æ–±–ª–µ–º–∞",
                "current_sensing": "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–æ–∫ –Ω–∞ PPBUS - –µ—Å–ª–∏ —Å–∫–∞—á–µ—Ç = SMC issue",
                "check_u4900": "–ù–∞ –º–Ω–æ–≥–∏—Ö –º–æ–¥–µ–ª—è—Ö —ç—Ç–æ —á–∏–ø U4900 - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ –∫–æ—Ä–æ—Ç–∫–æ–µ"
            },
            "common_failing_components": {
                "MacBook_Air_2013_2017": {
                    "smc_chip": "U4900",
                    "common_issues": ["–°–≥–æ—Ä–µ–≤—à–∏–µ –∫–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä—ã C4900, C4901"],
                    "repair_difficulty": "–°—Ä–µ–¥–Ω—è—è"
                },
                "MacBook_Pro_2016_2017": {
                    "smc_chip": "U7800",
                    "common_issues": ["CD3215 (U3100/U3200) –≤—ã–∑—ã–≤–∞–µ—Ç —Å–±–æ–π SMC"],
                    "repair_difficulty": "–í—ã—Å–æ–∫–∞—è"
                },
                "MacBook_Pro_2018_2020": {
                    "smc_chip": "T2 chip integrated",
                    "common_issues": ["–¢—Ä–µ–±—É–µ—Ç—Å—è —Ä–∞–±–æ—Ç–∞ —Å T2"],
                    "repair_difficulty": "–û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è"
                }
            },
            "repair_notes": [
                "SMC —á–∏–ø —á–∞—Å—Ç–æ BGA - —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è",
                "–ü–æ—Å–ª–µ –∑–∞–º–µ–Ω—ã SMC –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ",
                "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ power rails –ø–µ—Ä–µ–¥ –∑–∞–º–µ–Ω–æ–π SMC",
                "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–æ–Ω–æ—Ä—Å–∫—É—é –ø–ª–∞—Ç—É —Ç–æ–π –∂–µ –º–æ–¥–µ–ª–∏ –∏ –≥–æ–¥–∞",
                "–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å: –ø—Ä–µ–¥–Ω–∞–≥—Ä–µ–≤ 150¬∞C, –ø–∞–π–∫–∞ 380-400¬∞C"
            ]
        }
    }
    
    return smc_data

def add_touch_ic_knowledge():
    """–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–Ω–∞–Ω–∏–π –æ Touch IC –ø—Ä–æ–±–ª–µ–º–∞—Ö iPad"""
    
    touch_ic_data = {
        "ipad_touch_problems": {
            "description": "–ü—Ä–æ–±–ª–µ–º—ã —Å —Ç–∞—á—Å–∫—Ä–∏–Ω–æ–º iPad –∏–∑-–∑–∞ —Å–±–æ—è Touch IC",
            "affected_models": {
                "iPad_Air_2": {
                    "touch_ics": ["Cumulus", "Meson"],
                    "common_failure": "Meson IC –æ—Ç–≤–∞–ª–∏–≤–∞–µ—Ç—Å—è –∏–∑-–∑–∞ –∏–∑–≥–∏–±–æ–≤",
                    "repair_complexity": "–í—ã—Å–æ–∫–∞—è"
                },
                "iPad_Pro_10.5": {
                    "touch_ics": ["Orion", "Theia"],
                    "common_failure": "–ü—Ä–æ–±–ª–µ–º–∞ –ø–æ—Å–ª–µ –∑–∞–º–µ–Ω—ã —ç–∫—Ä–∞–Ω–∞",
                    "repair_complexity": "–û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è"
                },
                "iPad_Pro_11_12.9": {
                    "touch_ics": ["Integrated in main SOC"],
                    "common_failure": "–ü–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–µ FPC –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä–∞",
                    "repair_complexity": "–°—Ä–µ–¥–Ω—è—è –µ—Å–ª–∏ –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä, –≤—ã—Å–æ–∫–∞—è –µ—Å–ª–∏ IC"
                }
            },
            "diagnostic_steps": [
                "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å FPC –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä—ã –Ω–∞ –æ–∫–∏—Å–ª–µ–Ω–∏–µ",
                "–ò–∑–º–µ—Ä–∏—Ç—å diode mode –Ω–∞ touch –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä–µ",
                "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –≤—Å–µ—Ö Touch IC –Ω–∞ –ø–ª–∞—Ç–µ",
                "–¢–µ—Å—Ç —Å –¥—Ä—É–≥–∏–º —ç–∫—Ä–∞–Ω–æ–º –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã –¥–∏—Å–ø–ª–µ—è",
                "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –ø–∏—Ç–∞–Ω–∏—è touch: 1.8V, 3.0V"
            ],
            "repair_process": {
                "preparation": [
                    "–°–Ω—è—Ç—å —â–∏—Ç—ã –Ω–∞–¥ Touch IC",
                    "–û—á–∏—Å—Ç–∏—Ç—å –æ–±–ª–∞—Å—Ç—å –æ—Ç underfill",
                    "–ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å stencil –¥–ª—è reballing"
                ],
                "replacement": [
                    "–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –¥–µ–º–æ–Ω—Ç–∞–∂–∞: 380-400¬∞C",
                    "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–ª—é—Å –≤—ã—Å–æ–∫–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞",
                    "Reballing –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω - –Ω–µ –ø—ã—Ç–∞—Ç—å—Å—è reflow",
                    "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å pads –Ω–∞ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏—è"
                ],
                "testing": [
                    "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å touch –ø–æ –≤—Å–µ–π –ø–ª–æ—â–∞–¥–∏ —ç–∫—Ä–∞–Ω–∞",
                    "–¢–µ—Å—Ç multitouch (10 –ø–∞–ª—å—Ü–µ–≤)",
                    "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –ø–æ—Å–ª–µ –Ω–∞–≥—Ä–µ–≤–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞"
                ]
            },
            "donor_compatibility": {
                "rule": "Touch IC –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ —ç–∫—Ä–∞–Ω—É –Ω–∞ –Ω–æ–≤—ã—Ö –º–æ–¥–µ–ª—è—Ö",
                "iPad_6_7_8": "–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–æ–Ω–æ—Ä—ã –º–µ–∂–¥—É –ø–æ–∫–æ–ª–µ–Ω–∏—è–º–∏",
                "iPad_Pro": "–°—Ç—Ä–æ–≥–æ —Ç–∞ –∂–µ –º–æ–¥–µ–ª—å –∏ —Ä–∞–∑–º–µ—Ä —ç–∫—Ä–∞–Ω–∞",
                "warning": "–ù–∞ Pro –º–æ–¥–µ–ª—è—Ö –º–æ–∂–µ—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ"
            }
        }
    }
    
    return touch_ic_data

def add_baseband_knowledge():
    """–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–Ω–∞–Ω–∏–π –æ Baseband –ø—Ä–æ–±–ª–µ–º–∞—Ö"""
    
    baseband_data = {
        "baseband_failures": {
            "description": "Baseband CPU/PMU –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–æ—Ç–æ–≤—É—é —Å–≤—è–∑—å",
            "symptoms": {
                "no_service": [
                    "–ü–æ—Å—Ç–æ—è–Ω–Ω–æ Searching... –∏–ª–∏ No Service",
                    "IMEI –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç Unknown",
                    "Modem Firmware –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö",
                    "–ù–µ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –ø–æ—Å–ª–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è",
                    "*#06# –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç IMEI"
                ],
                "partial_failure": [
                    "–°–ª–∞–±—ã–π —Å–∏–≥–Ω–∞–ª –¥–∞–∂–µ –≤ –∑–æ–Ω–µ –ø–æ–∫—Ä—ã—Ç–∏—è",
                    "–†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ 3G, –Ω–æ –Ω–µ LTE",
                    "–°–ò–ú-–∫–∞—Ä—Ç–∞ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏"
                ]
            },
            "iphone_7_special": {
                "qualcomm_version": {
                    "model": "A1660, A1661",
                    "baseband": "MDM9645M",
                    "pmu": "PMB9943",
                    "repair_possible": "–î–∞, –º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å BB_CPU –∏ BB_PMU"
                },
                "intel_version": {
                    "model": "A1778, A1784",
                    "baseband": "PMB9948 (XMM7480)",
                    "repair_possible": "–°–ª–æ–∂–Ω–µ–µ, —á–∞—Å—Ç–æ –Ω–µ —Ä–µ–º–æ–Ω—Ç–æ–ø—Ä–∏–≥–æ–¥–Ω–æ"
                },
                "diagnostic": [
                    "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è BB_PMU",
                    "–ò—Å–∫–∞—Ç—å –∫–æ—Ä–æ—Ç–∫–∏–µ –Ω–∞ BB power rails",
                    "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å BB_EEPROM"
                ]
            },
            "repair_limitations": [
                "Baseband CPU –ø—Ä–∏–≤—è–∑–∞–Ω –∫ main CPU - –Ω–µ–ª—å–∑—è –ø—Ä–æ—Å—Ç–æ –∑–∞–º–µ–Ω–∏—Ç—å",
                "–¢—Ä–µ–±—É–µ—Ç—Å—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –¥–ª—è reballing",
                "–ù–∞ iPhone 8 –∏ –Ω–æ–≤–µ–µ - –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–µ —Ä–µ–º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è",
                "Intel baseband —Å–ª–æ–∂–Ω–µ–µ –≤ —Ä–µ–º–æ–Ω—Ç–µ —á–µ–º Qualcomm"
            ],
            "workarounds": [
                "–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø—Ä–æ—à–∏–≤–∫—É —á–µ—Ä–µ–∑ 3uTools",
                "–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–º–∞ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—ã AT",
                "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–∞–∫ iPod Touch (–±–µ–∑ —Å–æ—Ç–æ–≤–æ–π —Å–≤—è–∑–∏)",
                "–ó–∞–º–µ–Ω–∞ –≤—Å–µ–π –ø–ª–∞—Ç—ã (–¥–æ—Ä–æ–≥–æ)"
            ]
        }
    }
    
    return baseband_data

def add_common_repairs():
    """–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —á–∞—Å—Ç—ã—Ö —Ä–µ–º–æ–Ω—Ç–æ–≤ –∏ –∏—Ö —Å—Ç–æ–∏–º–æ—Å—Ç–∏"""
    
    repairs_data = {
        "common_repairs_2024": {
            "battery_replacement": {
                "iPhone_11_15": {
                    "difficulty": "–õ–µ–≥–∫–∞—è",
                    "time": "30-45 –º–∏–Ω—É—Ç",
                    "tools": ["Pentalobe P2", "Y000", "–ü—Ä–∏—Å–æ—Å–∫–∞", "–ü–ª–∞—Å—Ç–∏–∫–æ–≤—ã–µ –ª–æ–ø–∞—Ç–∫–∏"],
                    "tips": ["–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å pull-tabs –∞–∫–∫—É—Ä–∞—Ç–Ω–æ", "–ü—Ä–æ–≥—Ä–µ—Ç—å –¥–ª—è –ª–µ–≥–∫–æ–≥–æ —Å–Ω—è—Ç–∏—è —ç–∫—Ä–∞–Ω–∞"]
                },
                "MacBook_Air_M1_M2": {
                    "difficulty": "–°—Ä–µ–¥–Ω—è—è",
                    "time": "1-2 —á–∞—Å–∞",
                    "tools": ["P5 Pentalobe", "T5 Torx", "–ê–Ω—Ç–∏—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –±—Ä–∞—Å–ª–µ—Ç"],
                    "tips": ["–û—Ç–∫–ª—é—á–∏—Ç—å –±–∞—Ç–∞—Ä–µ—é –ø–µ—Ä–µ–¥ —Ä–∞–±–æ—Ç–æ–π", "–°–ª–µ–¥–∏—Ç—å –∑–∞ –≤–∏–Ω—Ç–∞–º–∏ —Ä–∞–∑–Ω–æ–π –¥–ª–∏–Ω—ã"]
                }
            },
            "screen_replacement": {
                "iPhone_with_FaceID": {
                    "difficulty": "–í—ã—Å–æ–∫–∞—è",
                    "time": "1-2 —á–∞—Å–∞",
                    "warning": "True Tone –ø–æ—Ç–µ—Ä—è–µ—Ç—Å—è –±–µ–∑ –ø—Ä–æ–≥—Ä–∞–º–º–∞—Ç–æ—Ä–∞",
                    "tips": ["–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ flood illuminator –∞–∫–∫—É—Ä–∞—Ç–Ω–æ", "–ù–µ –ø–æ–≤—Ä–µ–¥–∏—Ç—å Face ID –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã"]
                },
                "iPad_laminated": {
                    "difficulty": "–û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è",
                    "time": "2-3 —á–∞—Å–∞",
                    "tools": ["–¢–µ—Ä–º–æ—Ñ–µ–Ω", "–ò–∑–æ–ø—Ä–æ–ø–∞–Ω–æ–ª", "–°—Ç—Ä—É–Ω–∞ –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è"],
                    "tips": ["–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –Ω–µ –≤—ã—à–µ 80¬∞C", "–ú–µ–¥–ª–µ–Ω–Ω–æ –∏ –∞–∫–∫—É—Ä–∞—Ç–Ω–æ"]
                }
            },
            "charging_port": {
                "iPhone_Lightning": {
                    "difficulty": "–°—Ä–µ–¥–Ω—è—è",
                    "time": "45-60 –º–∏–Ω—É—Ç",
                    "common_issue": "–ü–∏–Ω—ã –∑–∞–≥—Ä—è–∑–Ω–µ–Ω—ã –∏–ª–∏ –ø–æ–≥–Ω—É—Ç—ã",
                    "tips": ["–°–Ω–∞—á–∞–ª–∞ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —á–∏—Å—Ç–∫—É", "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ Tristar damage"]
                },
                "USB_C_devices": {
                    "difficulty": "–í—ã—Å–æ–∫–∞—è",
                    "time": "1-1.5 —á–∞—Å–∞",
                    "tips": ["24 –ø–∏–Ω–∞ - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ", "–ß–∞—Å—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞ –≤ CC –ø–∏–Ω–∞—Ö"]
                }
            }
        }
    }
    
    return repairs_data

def update_measurements_with_new_data():
    """–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ measurements.json –Ω–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏"""
    
    measurements = load_json('measurements.json')
    
    # –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ
    measurements['advanced_diagnostics'] = {
        "tristar_testing": {
            "tools_needed": ["–ú—É–ª—å—Ç–∏–º–µ—Ç—Ä", "USB Ammeter", "Tristar Tester"],
            "test_points": {
                "iPhone_6_7": {
                    "D+": "PP_USB_D_P",
                    "D-": "PP_USB_D_N",
                    "normal_reading": "0.650V –≤ diode mode",
                    "shorted": "< 0.400V"
                }
            }
        },
        "smc_testing": {
            "voltage_rails": {
                "PPBUS_G3H": {
                    "normal": "12.3V - 12.6V",
                    "low": "< 12.0V = –ø—Ä–æ–±–ª–µ–º–∞ —Å –∑–∞—Ä—è–¥–∫–æ–π",
                    "high": "> 13.0V = SMC issue"
                },
                "PP3V3_S5": {
                    "normal": "3.3V ¬± 0.1V",
                    "missing": "0V = SMC –Ω–µ —Å–æ–∑–¥–∞–µ—Ç S5 state"
                }
            }
        }
    }
    
    save_json(measurements, 'measurements.json')

def update_ic_compatibility():
    """–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –º–∏–∫—Ä–æ—Å—Ö–µ–º"""
    
    ic_data = load_json('ic_compatibility.json')
    
    # –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –æ Tristar/Hydra
    ic_data['charging_ics']['tristar_hydra_versions'] = {
        "1610A1": {
            "devices": ["iPhone 6", "iPhone 6 Plus"],
            "location": "U1700",
            "package": "BGA",
            "donors": ["iPhone 6", "iPhone 6 Plus"],
            "notes": "–ü–µ—Ä–≤–∞—è –≤–µ—Ä—Å–∏—è Tristar, —á–∞—Å—Ç–æ –≤—ã—Ö–æ–¥–∏—Ç –∏–∑ —Å—Ç—Ä–æ—è"
        },
        "1610A2": {
            "devices": ["iPhone 6S", "iPhone 6S Plus", "iPhone SE"],
            "location": "U4500/U2300",
            "package": "BGA",
            "donors": ["iPhone 6S", "iPhone 6S Plus", "iPhone SE 1"],
            "notes": "–£–ª—É—á—à–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è, –Ω–æ –≤—Å–µ –µ—â–µ —É—è–∑–≤–∏–º–∞ –∫ –ø–ª–æ—Ö–∏–º –∫–∞–±–µ–ª—è–º"
        },
        "1612A1": {
            "devices": ["iPhone 7", "iPhone 7 Plus"],
            "location": "U4001",
            "package": "BGA",
            "donors": ["iPhone 7 Qualcomm –≤–µ—Ä—Å–∏—è"],
            "notes": "–†–∞–∑–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –¥–ª—è Qualcomm –∏ Intel –º–æ–¥–µ–º–æ–≤"
        },
        "338S00248": {
            "devices": ["iPhone 8", "iPhone 8 Plus", "iPhone X"],
            "common_name": "Hydra",
            "location": "U6300",
            "package": "BGA",
            "donors": ["iPhone 8", "iPhone 8 Plus", "iPhone X"],
            "notes": "–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω –≤ Hydra, –±–æ–ª–µ–µ —É—Å—Ç–æ–π—á–∏–≤ –∫ –ø—Ä–æ–±–ª–µ–º–∞–º"
        }
    }
    
    # –î–æ–±–∞–≤–ª—è–µ–º Touch IC –¥–ª—è iPad
    ic_data['touch_ics'] = {
        "cumulus_meson": {
            "devices": ["iPad Air 2", "iPad Mini 4"],
            "chips": {
                "Cumulus": "343S0694",
                "Meson": "343S0695"
            },
            "common_failure": "Meson –æ—Ç–ø–∞–∏–≤–∞–µ—Ç—Å—è –∏–∑-–∑–∞ –∏–∑–≥–∏–±–æ–≤ –∫–æ—Ä–ø—É—Å–∞",
            "repair_tips": "–¢—Ä–µ–±—É–µ—Ç reballing, –Ω–µ –ø—ã—Ç–∞–π—Ç–µ—Å—å –ø—Ä–æ—Å—Ç–æ –ø—Ä–∏–ø–∞—è—Ç—å"
        },
        "orion_theia": {
            "devices": ["iPad Pro 10.5", "iPad Pro 12.9 Gen 2"],
            "chips": {
                "Orion": "343S00180",
                "Theia": "343S00181"
            },
            "notes": "–ë–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω—ã–µ —á–µ–º Cumulus/Meson"
        }
    }
    
    save_json(ic_data, 'ic_compatibility.json')

def main():
    """–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è"""
    
    print("üîß –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∑–Ω–∞–Ω–∏–π –æ —Ä–µ–º–æ–Ω—Ç–µ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö...")
    
    # –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π —Ñ–∞–π–ª —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º–∏ –∑–Ω–∞–Ω–∏—è–º–∏ –æ —Ä–µ–º–æ–Ω—Ç–µ
    repair_knowledge = {
        "generated_at": "2024-01-19T03:00:00Z",
        "version": "1.0",
        "tristar_hydra": add_tristar_knowledge(),
        "smc_failures": add_smc_knowledge(),
        "touch_ic": add_touch_ic_knowledge(),
        "baseband": add_baseband_knowledge(),
        "common_repairs": add_common_repairs()
    }
    
    save_json(repair_knowledge, 'repair_knowledge.json')
    
    # –û–±–Ω–æ–≤–ª—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ–∞–π–ª—ã
    update_measurements_with_new_data()
    update_ic_compatibility()
    
    print("\n‚ú® –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∞!")
    print("üìö –î–æ–±–∞–≤–ª–µ–Ω–æ:")
    print("  - –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ Tristar/Hydra")
    print("  - SMC –ø—Ä–æ–±–ª–µ–º—ã MacBook")
    print("  - Touch IC –ø—Ä–æ–±–ª–µ–º—ã iPad")
    print("  - Baseband/No Service –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞")
    print("  - –ß–∞—Å—Ç—ã–µ —Ä–µ–º–æ–Ω—Ç—ã –∏ –∏—Ö –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏")

if __name__ == "__main__":
    main()