!function(){"use strict";const e=React.createElement;"undefined"!=typeof window&&window.motion;class a extends React.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,a){console.error("‚ùå Calculator Error:",e,a)}render(){return this.state.hasError?e("div",{className:"max-w-md mx-auto p-6 bg-zinc-900 border border-red-500/50 rounded-2xl text-center"},e("div",{className:"w-16 h-16 mx-auto mb-4 bg-red-500/20 rounded-full flex items-center justify-center"},e("i",{className:"fas fa-exclamation-triangle text-3xl text-red-400"})),e("h3",{className:"text-xl font-bold text-white mb-2"},"Oops! Ceva nu a mers bine"),e("p",{className:"text-zinc-400 mb-4"},"A apƒÉrut o eroare. VƒÉ rugƒÉm re√ÆncƒÉrca»õi pagina."),e("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-xl transition-all"},"Re√ÆncƒÉrca»õi pagina")):this.props.children}}const t=(e,a,t=null)=>{try{return a.split(".").reduce((e,a)=>e&&void 0!==e[a]?e[a]:t,e)}catch{return t}},o=e=>"string"==typeof e?e:"",n={screen:{phone:{min:150,max:600,avg:350},tablet:{min:200,max:800,avg:450},laptop:{min:350,max:1500,avg:800},watch:{min:200,max:1100,avg:600}},battery:{phone:{min:100,max:300,avg:180},tablet:{min:150,max:400,avg:250},laptop:{min:250,max:600,avg:400},watch:{min:150,max:400,avg:250}},charging:{phone:{min:80,max:250,avg:150},tablet:{min:100,max:300,avg:180},laptop:{min:150,max:400,avg:250},watch:{min:100,max:300,avg:180}},camera:{phone:{min:120,max:450,avg:250},tablet:{min:150,max:350,avg:220},laptop:{min:150,max:400,avg:250},watch:{min:100,max:250,avg:150}},motherboard:{phone:{min:250,max:900,avg:500},tablet:{min:350,max:1e3,avg:600},laptop:{min:500,max:2e3,avg:1e3},watch:{min:200,max:600,avg:350}},keyboard:{laptop:{min:200,max:600,avg:350},phone:{min:80,max:200,avg:120},tablet:{min:100,max:250,avg:150},watch:{min:80,max:200,avg:120}},software:{phone:{min:50,max:250,avg:150},tablet:{min:50,max:250,avg:150},laptop:{min:100,max:350,avg:200},watch:{min:50,max:200,avg:100}},diagnostic:{phone:{min:0,max:0,avg:0},tablet:{min:0,max:0,avg:0},laptop:{min:0,max:0,avg:0},watch:{min:0,max:0,avg:0},all:{min:0,max:0,avg:0}}},r={screen:1,battery:1,charging:1.1,camera:1.2,motherboard:2,keyboard:1.3,software:.8,diagnostic:0},i=1,l=1.05,s=1.15,c=1.25,m={apple:1.15,samsung:1.1,xiaomi:.85,huawei:.95,oneplus:1,google:1.1,oppo:.9,realme:.85,motorola:.95,vivo:.9,nokia:.9,sony:1.1,asus:1,nothing:1,other:1},d=()=>{const[a,d]=React.useState(1),[u,p]=React.useState({brand:null,deviceType:null,model:null,issues:[],name:"",phone:""}),[g,b]=React.useState(null),[f,x]=React.useState(!1),[h,v]=React.useState([]),[w,y]=React.useState(""),[N,z]=React.useState(0),[k,C]=React.useState({}),[$,T]=React.useState(!1),[X,E]=React.useState(!1),[R,S]=React.useState(window.i18n?.getCurrentLanguage()?.code||"ro");React.useEffect(()=>{if(!window.i18n)return;return window.i18n.subscribe(e=>{S(e)})},[]),React.useEffect(()=>{let e=!0,a=null;return(async()=>{E(!0);const t=()=>!!(window.NEXXDatabase&&window.NEXXDatabase.devices&&Array.isArray(window.NEXXDatabase.devices))&&(e&&(v(window.NEXXDatabase.devices),T(!0),E(!1),console.log(`‚úÖ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä: –∑–∞–≥—Ä—É–∂–µ–Ω–æ ${window.NEXXDatabase.devices.length} –º–æ–¥–µ–ª–µ–π`)),!0);if(!t()){if(window.NEXXDatabase){const a=window.NEXXDatabase.subscribe(()=>{e&&t()&&a()});window.NEXXDatabase.loaded||window.NEXXDatabase.loading||window.NEXXDatabase.loadAll().catch(e=>{console.error("‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –±–∞–∑—ã:",e)})}a=setInterval(()=>{t()&&clearInterval(a)},200),setTimeout(()=>{e&&!$&&(console.warn("‚ö†Ô∏è –ë–∞–∑–∞ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω–∞, –∏—Å–ø–æ–ª—å–∑—É–µ–º fallback"),fetch("/data/master-db.json").then(e=>e.json()).then(a=>{e&&a&&Array.isArray(a.devices)&&(v(a.devices),T(!0),E(!1),console.log(`‚úÖ Fallback: –∑–∞–≥—Ä—É–∂–µ–Ω–æ ${a.devices.length} –º–æ–¥–µ–ª–µ–π –∏–∑ master-db.json`))}).catch(a=>{console.error("‚ùå Fallback –æ—à–∏–±–∫–∞:",a),e&&(v([]),T(!0),E(!1))}))},3e3)}})(),()=>{e=!1,a&&clearInterval(a)}},[$]);const D=React.useMemo(()=>[{id:"apple",name:"Apple",svg:"/static/brands/apple.svg",color:"from-gray-600 to-gray-800",gradient:"from-blue-500/20 to-purple-500/20"},{id:"samsung",name:"Samsung",svg:"/static/brands/samsung.svg",color:"from-blue-500 to-blue-700",gradient:"from-blue-500/20 to-cyan-500/20"},{id:"xiaomi",name:"Xiaomi",svg:"/static/brands/xiaomi.svg",color:"from-orange-500 to-orange-700",gradient:"from-orange-500/20 to-red-500/20"},{id:"huawei",name:"Huawei",svg:"/static/brands/huawei.svg",color:"from-red-500 to-red-700",gradient:"from-red-500/20 to-pink-500/20"},{id:"oneplus",name:"OnePlus",svg:"/static/brands/oneplus.svg",color:"from-red-600 to-red-800",gradient:"from-red-500/20 to-orange-500/20"},{id:"google",name:"Google Pixel",svg:"/static/brands/google.svg",color:"from-green-500 to-blue-500",gradient:"from-green-500/20 to-blue-500/20"},{id:"oppo",name:"Oppo",svg:"/static/brands/oppo.svg",color:"from-green-600 to-green-800",gradient:"from-green-500/20 to-teal-500/20"},{id:"realme",name:"Realme",svg:"/static/brands/realme.svg",color:"from-gray-600 to-gray-800",gradient:"from-gray-500/20 to-gray-600/20"},{id:"motorola",name:"Motorola",svg:"/static/brands/motorola.svg",color:"from-blue-600 to-blue-800",gradient:"from-blue-500/20 to-indigo-500/20"},{id:"vivo",name:"Vivo",svg:"/static/brands/vivo.svg",color:"from-blue-400 to-blue-600",gradient:"from-blue-400/20 to-cyan-500/20"},{id:"nokia",name:"Nokia",svg:"/static/brands/nokia.svg",color:"from-blue-700 to-blue-900",gradient:"from-blue-600/20 to-indigo-600/20"},{id:"sony",name:"Sony",svg:"/static/brands/sony.svg",color:"from-gray-700 to-gray-900",gradient:"from-gray-600/20 to-black/20"},{id:"asus",name:"Asus",svg:"/static/brands/asus.svg",color:"from-purple-600 to-purple-800",gradient:"from-purple-500/20 to-pink-500/20"},{id:"nothing",name:"Nothing",svg:"/static/brands/nothing.svg",color:"from-gray-800 to-black",gradient:"from-gray-700/20 to-black/20"},{id:"other",name:(()=>{if(window.i18n&&"function"==typeof window.i18n.t){const e=window.i18n.t("calculator.otherBrands");if(e&&"calculator.otherBrands"!==e)return e}return"Alte mƒÉrci"})(),svg:"/static/brands/other.svg",color:"from-gray-500 to-gray-700",gradient:"from-gray-500/20 to-gray-600/20"}],[R]),P=React.useMemo(()=>[{id:"phone",nameKey:"calculator.devicePhone",name:"Telefon",icon:"fa-mobile",color:"from-blue-500 to-blue-700"},{id:"tablet",nameKey:"calculator.deviceTablet",name:"TabletƒÉ",icon:"fa-tablet",color:"from-purple-500 to-purple-700"},{id:"laptop",nameKey:"calculator.deviceLaptop",name:"Laptop",icon:"fa-laptop",color:"from-green-500 to-green-700"},{id:"watch",nameKey:"calculator.deviceWatch",name:"Smartwatch",icon:"fa-watch",color:"from-pink-500 to-pink-700"}],[R]),j=e=>{if(!e)return"";if(e.nameKey&&window.i18n&&"function"==typeof window.i18n.t){const a=window.i18n.t(e.nameKey);if(a&&a!==e.nameKey)return a}return e.name||""},A={phone:[{id:"screen",name:"Ecran spart/defect",price:"screen",icon:"fa-mobile-screen"},{id:"battery",name:"Baterie (se descarcƒÉ rapid)",price:"battery",icon:"fa-battery-quarter"},{id:"charging",name:"Nu se √ÆncarcƒÉ",price:"charging",icon:"fa-plug"},{id:"camera",name:"CamerƒÉ nu func»õioneazƒÉ",price:"camera",icon:"fa-camera"},{id:"motherboard",name:"ProblemƒÉ la placƒÉ",price:"motherboard",icon:"fa-microchip"}],tablet:[{id:"screen",name:"Display spart",price:"screen",icon:"fa-tablet-screen-button"},{id:"battery",name:"Baterie",price:"battery",icon:"fa-battery-quarter"},{id:"charging",name:"Port charging",price:"charging",icon:"fa-plug"},{id:"camera",name:"CamerƒÉ nu func»õioneazƒÉ",price:"camera",icon:"fa-camera"},{id:"motherboard",name:"PlacƒÉ logicƒÉ",price:"motherboard",icon:"fa-microchip"}],laptop:[{id:"screen",name:"Ecran/Display",price:"screen",icon:"fa-laptop"},{id:"battery",name:"Baterie",price:"battery",icon:"fa-battery-quarter"},{id:"keyboard",name:"TastaturƒÉ",price:"keyboard",icon:"fa-keyboard"},{id:"charging",name:"√éncƒÉrcare",price:"charging",icon:"fa-plug"},{id:"camera",name:"CamerƒÉ web",price:"camera",icon:"fa-camera"},{id:"motherboard",name:"PlacƒÉ de bazƒÉ",price:"motherboard",icon:"fa-microchip"}],watch:[{id:"screen",name:"Ecran",price:"screen",icon:"fa-watch"},{id:"battery",name:"Baterie",price:"battery",icon:"fa-battery-quarter"},{id:"charging",name:"Port charging",price:"charging",icon:"fa-plug"}]},M=[{id:1,name:"Marca",icon:"fa-mobile-screen"},{id:2,name:"Tip",icon:"fa-tablet-screen-button"},{id:3,name:"Model",icon:"fa-list"},{id:4,name:"ProblemƒÉ",icon:"fa-wrench"},{id:6,name:"Pre»õ",icon:"fa-calculator"}],L=()=>{a>1&&(z(-1),d(a-1))},O=React.useCallback(()=>{try{if(!u.brand)return P;const a=o(t(u,"brand.id","")).toLowerCase();if(!a)return P;const n=(e=window.NEXXDatabase?.devices||h,Array.isArray(e)?e:[]);if(0===n.length)return P;const r={apple:"Apple",samsung:"Samsung",xiaomi:"Xiaomi",huawei:"Huawei",oneplus:"OnePlus",google:"Google",oppo:"Oppo",realme:"Realme",motorola:"Motorola",vivo:"Vivo",nokia:"Nokia",sony:"Sony",asus:"Asus",nothing:"Nothing",other:"Other"}[a]||a,i=new Set;n.forEach(e=>{if(!e)return;o(e.brand).toLowerCase()===r.toLowerCase()&&i.add(e.device_type)});const l=P.filter(e=>i.has(e.id));return console.log(`üîç –¢–∏–ø—ã –¥–ª—è –±—Ä–µ–Ω–¥–∞ ${r}:`,Array.from(i),"‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ–º:",l.map(e=>e.id)),l.length>0?l:P}catch(e){return console.error("‚ùå –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–∏–ø–æ–≤ —É—Å—Ç—Ä–æ–π—Å—Ç–≤:",e),P}var e},[u.brand,h,$]),_=React.useCallback(()=>{try{if(!u.brand||!u.deviceType)return[];const e=o(t(u,"brand.id","")).toLowerCase(),a=o(u.deviceType);if(!e||!a)return[];let n=[];const r=window.NEXXDatabase?.devices||h||[];if(!Array.isArray(r)||0===r.length)return console.warn("‚ö†Ô∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø—É—Å—Ç–∞ –∏–ª–∏ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω–∞"),[];const i={apple:"Apple",samsung:"Samsung",xiaomi:"Xiaomi",huawei:"Huawei",oneplus:"OnePlus",google:"Google",oppo:"Oppo",realme:"Realme",motorola:"Motorola",vivo:"Vivo",nokia:"Nokia",sony:"Sony",asus:"Asus",nothing:"Nothing",other:"Other"}[e]||e;if(n=r.filter(t=>{if(!t||!t.name)return!1;const o=t.brand||"",n=t.device_type||"";let r=!1;if(r="other"===e?"Other"===o||!o:o.toLowerCase()===i.toLowerCase(),!r)return!1;return n===a}),0===n.length&&(console.log(`‚ö†Ô∏è Fallback —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–ª—è ${e}/${a}`),n=r.filter(t=>{if(!t||!t.name)return!1;const o=t.name.toLowerCase(),n=(t.category||"").toLowerCase();let r=!1;return"apple"===e?r=o.includes("iphone")||o.includes("ipad")||o.includes("macbook")||"iphone"===n||"ipad"===n||"macbook"===n||"watch"===n:"samsung"===e?r=o.includes("samsung")||o.includes("galaxy")||"samsung"===n:"xiaomi"===e?r=o.includes("xiaomi")||o.includes("redmi")||o.includes("poco")||"xiaomi"===n:"huawei"===e?r=o.includes("huawei")||o.includes("honor")||"huawei"===n:"oneplus"===e?r=o.includes("oneplus")||"oneplus"===n:"google"===e?r=o.includes("pixel")||o.includes("google")||"google"===n:"oppo"===e?r=o.includes("oppo")||"oppo"===n:"realme"===e?r=o.includes("realme")||"realme"===n:"motorola"===e?r=o.includes("motorola")||o.includes("moto ")||o.includes("razr")||"motorola"===n:"vivo"===e?r=o.includes("vivo")||"vivo"===n:"nokia"===e?r=o.includes("nokia")||"nokia"===n:"sony"===e?r=o.includes("sony")||o.includes("xperia")||"sony"===n:"asus"===e?r=o.includes("asus")||o.includes("rog phone")||o.includes("zenfone")||"asus"===n:"nothing"===e?r=o.includes("nothing")||"nothing"===n:"other"===e&&(r=!0),!!r&&("phone"===a?!(o.includes("ipad")||o.includes("macbook")||o.includes("tab")||o.includes("laptop")||o.includes("watch")||o.includes("pad")||"ipad"===n||"macbook"===n||"watch"===n):"tablet"===a?o.includes("ipad")||o.includes("tab")||o.includes("pad")||"ipad"===n||n.includes("tablet"):"laptop"===a?o.includes("macbook")||o.includes("laptop")||o.includes("book")||"macbook"===n||n.includes("laptop"):"watch"!==a||(o.includes("watch")||"watch"===n||n.includes("watch")))})),w){const e=w.toLowerCase();n=n.filter(a=>{const t=(a.name||"").toLowerCase(),o=(a.category||"").toLowerCase(),n=(a.model||"").toLowerCase();return t.includes(e)||o.includes(e)||n.includes(e)})}return n.sort((e,a)=>{const t=e.year||0,o=a.year||0;return o!==t?o-t:(e.name||"").localeCompare(a.name||"")}),n.length>0?console.log(`‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è: –±—Ä–µ–Ω–¥=${e}, —Ç–∏–ø=${a}, –Ω–∞–π–¥–µ–Ω–æ=${n.length} –º–æ–¥–µ–ª–µ–π`):console.warn(`‚ö†Ô∏è –ù–µ –Ω–∞–π–¥–µ–Ω–æ –º–æ–¥–µ–ª–µ–π: –±—Ä–µ–Ω–¥=${e}, —Ç–∏–ø=${a}`),n}catch(e){return console.error("‚ùå –û—à–∏–±–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –º–æ–¥–µ–ª–µ–π:",e),[]}},[u.brand,u.deviceType,h,w]);return e("div",{id:"calculator",className:"max-w-3xl mx-auto"},e("div",{className:"bg-gradient-to-br from-zinc-900/90 via-zinc-900 to-zinc-950/90 border border-zinc-800 rounded-2xl p-4 md:p-6 shadow-2xl backdrop-blur-sm"},e("div",{className:"text-center mb-4"},e("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 bg-gradient-to-r from-blue-600/20 to-purple-600/20 border border-blue-500/30 rounded-full mb-3 backdrop-blur-sm"},e("i",{className:"fas fa-calculator text-blue-400 text-sm"}),e("span",{className:"text-xs font-semibold text-zinc-300"},window.i18n?.t("calculator.calculator")||"Calculator pre»õ")),e("h2",{className:"text-2xl md:text-3xl font-bold bg-gradient-to-r from-white via-zinc-100 to-zinc-300 bg-clip-text text-transparent mb-2"},window.i18n?.t("calculator.title")||"Estimare gratuitƒÉ online"),e("p",{className:"text-zinc-400 text-xs"},window.i18n?.t("calculator.description")||"RƒÉspunde»õi la c√¢teva √ÆntrebƒÉri pentru a afla pre»õul aproximativ")),a<6&&e("div",{className:"mb-4"},e("div",{className:"flex items-center justify-between relative"},e("div",{className:"absolute top-6 left-0 right-0 h-1 bg-zinc-800 rounded-full z-0"}),e("div",{className:"absolute top-6 left-0 h-1 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full z-10 transition-all duration-500",style:{width:(a-1)/(M.length-1)*100+"%"}}),...M.map((t,o)=>e("div",{key:t.id,className:"relative z-20 flex flex-col items-center"},e("div",{className:"w-9 h-9 rounded-full flex items-center justify-center transition-all duration-300 "+(a>=t.id?"bg-gradient-to-br from-blue-500 to-purple-600 text-white shadow-lg shadow-blue-500/50 scale-110":"bg-zinc-800 text-zinc-500")},a>t.id?e("i",{className:"fas fa-check text-white text-sm"}):e("i",{className:`fas ${t.icon} ${a>=t.id?"text-white":"text-zinc-500"} text-sm`})),e("span",{className:"text-xs mt-2 hidden sm:block "+(a>=t.id?"text-white":"text-zinc-500")},t.name))))),e("div",{className:"min-h-[220px] relative"},1===a&&!g&&e("div",{className:"space-y-4 "},e("h3",{className:"text-lg font-bold text-white mb-3 text-center"},window.i18n?.t("calculator.selectBrand")||"Alege»õi marca:"),e("div",{className:"grid grid-cols-3 md:grid-cols-5 gap-2"},...D.map(t=>e("button",{key:t.id,onClick:()=>{p({...u,brand:t}),a<6&&(z(1),d(a+1)),setTimeout(()=>{const e=document.getElementById("calculator");e&&e.scrollIntoView({behavior:"smooth",block:"start"})},100)},className:"group relative p-3 bg-zinc-800/50 hover:bg-zinc-800 border border-zinc-700 hover:border-blue-500 rounded-lg transition-all duration-200 hover:scale-[1.02] hover:shadow-lg hover:shadow-blue-500/20 overflow-hidden cursor-pointer"},e("div",{className:`absolute inset-0 bg-gradient-to-br ${t.gradient} opacity-0 group-hover:opacity-100 transition-opacity duration-300`}),e("div",{className:`w-10 h-10 mx-auto mb-2 rounded-lg bg-gradient-to-br ${t.color} flex items-center justify-center group-hover:scale-110 transition-all duration-200 shadow-md p-2`},e("img",{src:t.svg,alt:t.name,className:"w-full h-full object-contain",style:{filter:"brightness(0) invert(1)"},loading:"lazy"})),e("div",{className:"font-medium text-white text-xs relative z-10"},t.name))))),2===a&&!g&&e("div",{className:"space-y-4 "},e("h3",{className:"text-lg font-bold text-white mb-4 text-center"},`${u.brand?.name} - ${window.i18n?.t("calculator.selectDevice")||"Alege»õi tipul:"}`),!$&&e("div",{className:"text-center py-4"},e("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-500/20 border border-blue-500/30 rounded-lg"},e("div",{className:"w-4 h-4 border-2 border-blue-400 border-t-transparent rounded-full animate-spin"}),e("span",{className:"text-sm text-blue-400"},"Se √ÆncarcƒÉ baza de date..."))),e("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2"},...O().map(a=>e("button",{key:a.id,onClick:()=>{const e={...u,deviceType:a.id,model:null};p(e),y("");const t=u.brand?.id?.toLowerCase();console.log(`üì± –í—ã–±—Ä–∞–Ω —Ç–∏–ø: brand=${t}, type=${a.id}, dbReady=${$}, models=${h.length}`),d(3),setTimeout(()=>{const e=document.getElementById("calculator");e&&e.scrollIntoView({behavior:"smooth",block:"start"})},100)},className:"group p-3 bg-zinc-800/50 hover:bg-zinc-800 border border-zinc-700 hover:border-blue-500 rounded-lg transition-all duration-200 hover:scale-[1.02] cursor-pointer"},e("div",{className:`w-10 h-10 mx-auto mb-2 rounded-lg bg-gradient-to-br ${a.color} flex items-center justify-center group-hover:scale-110 transition-all duration-200 shadow-md`},e("i",{className:`fas ${a.icon} text-lg text-white`})),e("div",{className:"font-medium text-white text-xs"},j(a))))),e("button",{onClick:L,className:"mt-6 text-zinc-400 hover:text-white transition flex items-center gap-2 mx-auto"},e("i",{className:"fas fa-arrow-left"}),window.i18n?.t("calculator.back")||"√énapoi")),3===a&&!g&&e("div",{className:"space-y-4 "},e("h3",{className:"text-lg font-bold text-white mb-3 text-center"},window.i18n?.t("calculator.selectModel")||"Alege»õi modelul:"),e("div",{className:"text-center mb-4"},e("span",{className:"inline-flex items-center gap-2 px-2 py-1 bg-blue-500/20 border border-blue-500/30 rounded-full text-xs text-blue-400"},e("i",{className:"fas fa-info-circle"}),`${u.brand?.name||""} / ${j(P.find(e=>e.id===u.deviceType)||{})||""}`)),X&&e("div",{className:"text-center py-8"},e("div",{className:"w-10 h-10 mx-auto mb-4 border-3 border-zinc-700 border-t-blue-500 rounded-full animate-spin"}),e("p",{className:"text-zinc-400"},"Se √ÆncarcƒÉ modelele...")),!X&&e("div",{className:"relative mb-6"},e("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-500"},e("i",{className:"fas fa-search"})),e("input",{type:"text",placeholder:"CƒÉuta»õi model...",value:w,onChange:e=>y(e.target.value),className:"w-full pl-12 pr-4 py-3 bg-zinc-800/50 border border-zinc-700 rounded-xl text-white placeholder-zinc-500 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 outline-none transition-all"}),e("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-xs text-zinc-500"},`${_().length} modele`)),!X&&e("div",{className:"space-y-1 max-h-60 overflow-y-auto pr-1 custom-scrollbar"},_().slice(0,30).map(a=>e("button",{key:a.name+"-"+(a.year||""),onClick:()=>{console.log("‚úÖ –í—ã–±—Ä–∞–Ω–∞ –º–æ–¥–µ–ª—å:",a.name),p({...u,model:a}),d(4)},className:"w-full p-2 bg-zinc-800/40 hover:bg-zinc-800/70 border border-zinc-700 hover:border-blue-500/50 rounded-lg transition-all text-left flex items-center justify-between group"},e("div",{className:"flex-1 min-w-0"},e("div",{className:"text-white font-medium text-sm truncate"},a.name),e("div",{className:"text-zinc-500 text-xs flex items-center gap-1"},e("span",null,a.year||"N/A"),e("span",{className:"text-zinc-600"},"‚Ä¢"),e("span",null,a.category||"N/A"))),e("i",{className:"fas fa-chevron-right text-zinc-500 group-hover:text-blue-400 group-hover:translate-x-1 transition-all flex-shrink-0 ml-2"})))),!X&&0===_().length&&e("div",{className:"text-center py-6"},e("div",{className:"w-14 h-14 mx-auto mb-4 bg-zinc-800/50 rounded-full flex items-center justify-center"},e("i",{className:"fas fa-box-open text-2xl text-zinc-500"})),e("p",{className:"text-base text-white mb-1"},"Nu avem modele pentru aceastƒÉ combina»õie"),e("p",{className:"text-zinc-400 mb-6"},`${u.brand?.name||""} nu produce ${(j(P.find(e=>e.id===u.deviceType)||{})||"").toLowerCase()||"acest tip"}.`),e("div",{className:"flex flex-col sm:flex-row gap-4 justify-center"},e("button",{onClick:()=>d(2),className:"px-6 py-3 bg-zinc-700 hover:bg-zinc-600 text-white rounded-xl transition-all flex items-center justify-center gap-2"},e("i",{className:"fas fa-arrow-left"}),"Alege»õi alt tip"),e("button",{onClick:()=>{p({...u,model:{name:`${u.brand?.name||"Dispozitiv"} (general)`,year:null,category:u.deviceType}}),d(4)},className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white rounded-xl transition-all flex items-center justify-center gap-2"},"Continua»õi fƒÉrƒÉ model",e("i",{className:"fas fa-arrow-right"})))),e("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4 mt-6 pt-4 border-t border-zinc-800"},e("button",{onClick:()=>{d(2),y("")},className:"text-zinc-400 hover:text-white transition flex items-center gap-2"},e("i",{className:"fas fa-arrow-left"}),window.i18n?.t("calculator.back")||"√énapoi"),e("button",{onClick:()=>{console.log("‚û°Ô∏è –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –±–µ–∑ –º–æ–¥–µ–ª–∏"),p({...u,model:null}),d(4)},className:"px-6 py-2 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-medium rounded-xl transition-all flex items-center gap-2 shadow-lg"},"ContinuƒÉ fƒÉrƒÉ model",e("i",{className:"fas fa-arrow-right"})))),4===a&&!g&&e("div",{className:"space-y-4 "},e("h3",{className:"text-lg font-bold text-white mb-2 text-center"},`${u.model?.name||u.brand?.name||""} - ${window.i18n?.t("calculator.selectIssue")||"Ce problemƒÉ ave»õi?"}`),e("p",{className:"text-zinc-400 text-sm text-center mb-4"},`Pute»õi selecta mai multe probleme (${u.issues?.length||0} selectate)`),e("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2"},...function(){const e="string"==typeof u.deviceType?u.deviceType:u.deviceType?.id||"phone";return A[e]||A.phone||[]}().map(a=>{const t=(u.issues||[]).some(e=>e.id===a.id);return e("button",{key:a.id,onClick:()=>{if(!a||!a.id)return;const e=u.issues||[],t=e.some(e=>e.id===a.id)?e.filter(e=>e.id!==a.id):[...e,a];p({...u,issues:t})},className:"group p-3 border rounded-lg transition-all text-left flex items-center gap-2 hover:scale-[1.02] "+(t?"bg-blue-600/30 border-blue-500 ring-2 ring-blue-500/50":"bg-zinc-800/40 hover:bg-zinc-800/70 border-zinc-700 hover:border-blue-500/50")},e("div",{className:"w-8 h-8 rounded-md flex items-center justify-center flex-shrink-0 "+(t?"bg-blue-500":"bg-gradient-to-br from-blue-500/20 to-purple-500/20")},e("i",t?{className:"fas fa-check text-white text-sm"}:{className:`fas ${a.icon||"fa-wrench"} text-blue-400 text-sm`})),e("span",{className:"font-medium text-xs "+(t?"text-blue-300":"text-white")},a.name))})),u.issues&&u.issues.length>0&&e("div",{className:"mt-4 p-3 bg-blue-500/10 border border-blue-500/30 rounded-lg"},e("p",{className:"text-sm text-blue-300"},`‚úì Selectate: ${u.issues.map(e=>e.name).join(", ")}`)),e("div",{className:"flex items-center justify-center gap-4 mt-6"},e("button",{onClick:L,className:"text-zinc-400 hover:text-white transition flex items-center gap-2"},e("i",{className:"fas fa-arrow-left"}),"√énapoi"),e("button",{onClick:()=>{u.issues&&u.issues.length>0?(async()=>{u.deviceType&&u.issues&&0!==u.issues.length?(x(!0),setTimeout(async()=>{try{const e=u.deviceType,a=u.issues,t=u.model;console.log(`üîç –†–∞—Å—á–µ—Ç —Ü–µ–Ω—ã: deviceType=${e}, issues=${a.map(e=>e.id).join(", ")}, model=${t?.name||"–Ω–µ –≤—ã–±—Ä–∞–Ω–∞"}`);const o=async a=>{let o=null;if(t&&window.NEXXDatabase&&"function"==typeof window.NEXXDatabase.getDevicePrice)try{const e="string"==typeof t?t:t.name||"",n=window.NEXXDatabase.getDevicePrice(e,a.id);n&&"number"==typeof n&&n>0&&(o={min:Math.round(.8*n),max:Math.round(1.2*n),avg:n})}catch(e){console.warn("‚ö†Ô∏è –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Ü–µ–Ω—ã –∏–∑ –ë–î:",e)}if(!o&&t&&t.official_service_prices){const e=t.official_service_prices,n={screen:"display",battery:"battery",charging:"charging_port",camera:"rear_camera",motherboard:"logic_board",keyboard:"keyboard"};let r=e[a.id]||e[n[a.id]];if(r&&"number"==typeof r&&r>0){const e=4.5,a=Math.round(r*e);o={min:Math.round(.8*a),max:Math.round(1.2*a),avg:a},console.log(`üí∞ –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è: ${r} USD ‚Üí ${a} RON`)}}if(!o){let d=n[a.id]?.[e]||n[a.price]?.[e];if(d&&d.avg){let e=d.avg;if(e*=r[a.id]||r[a.price]||1,t&&t.year){const a=(new Date).getFullYear()-t.year;e*=a<=1?i:a<=3?l:a<=6?s:c}e*=m[u.brand?.id]||m.other,e=Math.max(30,10*Math.round(e/10)),o={min:Math.max(30,Math.round(.75*e)),max:Math.round(1.35*e),avg:e}}}if(!o)for(const a in n){const t=n[a]?.[e];if(t){o={min:t.min||50,max:t.max||200,avg:t.avg||100};break}}return o},p=(await Promise.all(a.map(e=>o(e)))).filter(e=>e&&e.avg>0);if(p.length>0){let o=0,n=0,r=0;p.forEach((e,a)=>{const t=0===a?1:.9;o+=Math.round(e.min*t),n+=Math.round(e.max*t),r+=Math.round(e.avg*t)});let i="30-60 min";a.some(e=>"motherboard"===e.id||"board"===e.id)?i="phone"===e||"tablet"===e?"2-4 ore":"4-8 ore":(a.length>2||"laptop"===e)&&(i="1-2 ore");const l=a.map(e=>e.name).join(", "),s={min:o,max:n,avg:r,diagnostic:`Probleme selectate: ${l}`,time:i,model:t?.name||null,issues:a.map(e=>e.name)};console.log(`‚úÖ –ò—Ç–æ–≥–æ –∑–∞ ${a.length} –¥–µ—Ñ–µ–∫—Ç(–æ–≤): ${r} lei (${o}-${n})`),b(s),d(6)}else window.showToast&&window.showToast("Nu s-a putut calcula pre»õul. √éncerca»õi din nou.","error",4e3)}catch(e){console.error("‚ùå –û—à–∏–±–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ —Ü–µ–Ω—ã:",e),window.showToast&&window.showToast("Eroare la calcularea pre»õului. √éncerca»õi din nou.","error",4e3)}finally{x(!1)}},800)):window.showToast&&window.showToast("Selecta»õi cel pu»õin o problemƒÉ","warning",3e3)})():window.showToast&&window.showToast("Selecta»õi cel pu»õin o problemƒÉ","warning",2e3)},disabled:!u.issues||0===u.issues.length,className:"px-6 py-2.5 rounded-xl font-semibold transition-all flex items-center gap-2 "+(u.issues&&u.issues.length>0?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white shadow-lg shadow-blue-500/25":"bg-zinc-700 text-zinc-400 cursor-not-allowed")},e("i",{className:"fas fa-calculator"}),"CalculeazƒÉ pre»õul"+(u.issues?.length>1?` (${u.issues.length})`:"")))),f&&e("div",{className:"text-center py-8"},e("div",{className:"w-12 h-12 mx-auto mb-4 border-3 border-zinc-700 border-t-blue-500 rounded-full animate-spin"}),e("p",{className:"text-zinc-400 text-sm"},"CalculƒÉm pre»õul...")),5===a&&g&&e("div",{className:"space-y-6 "},e("h3",{className:"text-2xl font-bold text-white mb-2 text-center"},"Introduce»õi datele pentru a ob»õine pre»õul"),e("p",{className:"text-zinc-400 text-center mb-8"},"VƒÉ vom contacta √Æn cur√¢nd cu pre»õul exact"),e("div",{className:"space-y-4 max-w-md mx-auto"},e("div",null,e("label",{className:"block text-sm font-medium text-zinc-300 mb-2"},"Numele dvs."),e("input",{type:"text",value:u.name,onChange:e=>{p({...u,name:e.target.value}),k.name&&C({...k,name:""})},placeholder:"Ex: Ion Popescu",className:"w-full px-4 py-3 bg-zinc-800/50 border-2 rounded-xl text-white placeholder-zinc-500 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 outline-none transition-all "+(k.name?"border-red-500":"border-zinc-700")}),k.name&&e("p",{className:"text-red-400 text-sm mt-1"},k.name)),e("div",null,e("label",{className:"block text-sm font-medium text-zinc-300 mb-2"},"Telefon"),e("input",{type:"tel",value:u.phone,onChange:e=>{p({...u,phone:e.target.value}),k.phone&&C({...k,phone:""})},placeholder:"+40 XXX XXX XXX",className:"w-full px-4 py-3 bg-zinc-800/50 border-2 rounded-xl text-white placeholder-zinc-500 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 outline-none transition-all "+(k.phone?"border-red-500":"border-zinc-700")}),k.phone&&e("p",{className:"text-red-400 text-sm mt-1"},k.phone)),e("button",{onClick:()=>{const e={};if((!u.name||u.name.trim().length<2)&&(e.name="Numele trebuie sƒÉ aibƒÉ minim 2 caractere"),(!u.phone||u.phone.trim().length<8)&&(e.phone="Telefonul este obligatoriu"),Object.keys(e).length>0)return C(e),void(window.showToast&&window.showToast("Completa»õi toate c√¢mpurile","error",3e3));(async(e,a=2)=>{for(let t=0;t<=a;t++)try{const a=new AbortController,t=setTimeout(()=>a.abort(),5e3),o=await fetch("/api/remonline?action=create_inquiry",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({source:"price_calculator",name:e.name||"",phone:e.phone||"",device:{brand:e.brand,type:e.deviceType,model:e.model},issue:e.issue,estimated_price:e.estimatedPrice,timestamp:(new Date).toISOString()}),signal:a.signal});if(clearTimeout(t),o.ok&&(await o.json()).success)return console.log("‚úÖ –õ–∏–¥ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ Remonline"),!0}catch(e){t<a&&await new Promise(e=>setTimeout(e,1e3*(t+1)))}})({name:u.name.trim(),phone:u.phone.trim(),brand:u.brand?.name,deviceType:u.deviceType,model:u.model?.name||"Not specified",issue:(u.issues||[]).map(e=>e.name).join(", ")||"Not specified",estimatedPrice:`${g.min}-${g.max} lei`,source:"price_calculator"}),d(6)},className:"w-full px-8 py-4 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white font-bold rounded-xl transition-all shadow-lg hover:shadow-xl flex items-center justify-center gap-3 mt-6"},e("i",{className:"fas fa-calculator text-xl"}),"Ob»õine»õi pre»õul")),e("button",{onClick:()=>d(4),className:"mt-6 text-zinc-400 hover:text-white transition flex items-center gap-2 mx-auto"},e("i",{className:"fas fa-arrow-left"}),window.i18n?.t("calculator.back")||"√énapoi")),6===a&&g&&e("div",{className:"text-center space-y-4 "},e("div",{className:"inline-flex items-center justify-center w-14 h-14 rounded-full bg-gradient-to-br from-green-500/20 to-emerald-500/20 mb-3"},e("i",{className:"fas fa-circle-check text-3xl text-green-400"})),e("div",null,e("h3",{className:"text-xl font-bold text-white mb-2"},window.i18n?.t("calculator.estimatedPrice")||"Pre»õ estimat"),g.model&&e("p",{className:"text-zinc-400 text-sm mb-3"},g.model),g.min===g.max?e("div",{className:"text-4xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent"},0===g.avg?"GRATUIT":`${g.avg} lei`):e("div",{className:"text-3xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent"},`${g.min}-${g.max} lei`)),g.issues&&g.issues.length>0&&e("div",{className:"bg-blue-500/10 rounded-xl p-4 mb-4 border border-blue-500/30 max-w-sm mx-auto"},e("p",{className:"text-sm font-medium text-blue-300 mb-2"},`Probleme selectate (${g.issues.length}):`),e("ul",{className:"space-y-1"},...g.issues.map((a,t)=>e("li",{key:t,className:"flex items-center gap-2 text-xs text-zinc-300"},e("i",{className:"fas fa-check text-green-400 text-[10px]"}),a))),g.issues.length>1&&e("p",{className:"text-[10px] text-zinc-500 mt-2 pt-2 border-t border-zinc-700/50"},"* Reducere 10% aplicatƒÉ pentru repara»õii multiple")),e("div",{className:"bg-zinc-800/50 rounded-xl p-4 space-y-2 text-left max-w-sm mx-auto border border-zinc-700/50"},e("div",{className:"flex items-center gap-2 text-xs text-zinc-400"},e("i",{className:"fas fa-clock text-blue-400"}),`Timp estimat: ${g.time||"30-60 min"}`),e("div",{className:"flex items-center gap-2 text-xs text-zinc-400"},e("i",{className:"fas fa-shield-check text-green-400"}),"Garan»õie 30 zile"),e("div",{className:"flex items-center gap-2 text-xs text-zinc-400"},e("i",{className:"fas fa-stethoscope text-purple-400"}),"Diagnostic gratuit")),e("div",{className:"flex flex-col sm:flex-row gap-2 justify-center mt-4"},e("button",{onClick:()=>{d(1),p({brand:null,deviceType:null,model:null,issue:null,name:"",phone:""}),b(null),y(""),z(-1),C({})},className:"px-4 py-2 bg-zinc-800 hover:bg-zinc-700 text-white font-medium rounded-lg transition-all border border-zinc-700 text-sm"},e("i",{className:"fas fa-redo mr-1"}),"Din nou"))))),a<6&&e("div",{className:"text-center mt-4 text-xs text-zinc-500 flex items-center justify-center gap-1"},e("i",{className:"fas fa-circle-info text-[10px]"}),window.i18n?.t("calculator.disclaimer")||"Pre»õul final poate varia. Diagnostic gratuit."))};window.PriceCalculator=()=>e(a,null,e(d)),window.PriceCalculatorRaw=d,console.log("‚úÖ Modern Price Calculator v3.1 loaded (with Error Boundary)")}();