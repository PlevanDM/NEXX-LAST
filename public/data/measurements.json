{
  "power_rails": {
    "description": "Основные шины питания iPhone. PP = Power Point",
    "rails": {
      "PP_BATT_VCC": {
        "name": "Battery Voltage",
        "voltage": "3.7V - 4.35V",
        "description": "Напряжение батареи напрямую",
        "diode_mode_normal": "0.350 - 0.450",
        "short_threshold": "<0.100",
        "models": "All iPhone",
        "check_points": [
          "Battery connector",
          "C2300 area"
        ],
        "if_shorted": [
          "Проверить конденсаторы возле батареи",
          "Проверить Q2300/Q2301",
          "Проверить Tigris/Hydra"
        ]
      },
      "PP_VCC_MAIN": {
        "name": "Main Power Rail",
        "voltage": "3.7V - 4.2V",
        "description": "Главная шина питания после Tigris/PMIC",
        "diode_mode_normal": "0.300 - 0.400",
        "short_threshold": "<0.250",
        "models": "All iPhone",
        "check_points": [
          "Near PMIC U1801",
          "WiFi area",
          "Baseband area"
        ],
        "if_shorted": [
          "Freeze spray на плату",
          "Проверить WiFi модуль",
          "Проверить Baseband",
          "Thermal camera для поиска"
        ]
      },
      "PP5V0_USB": {
        "name": "USB 5V Input",
        "voltage": "5.0V",
        "description": "5V от USB/Lightning порта",
        "diode_mode_normal": "0.400 - 0.500",
        "short_threshold": "<0.300",
        "models": "All iPhone",
        "check_points": [
          "Tristar U6300",
          "Lightning connector"
        ],
        "if_shorted": [
          "Заменить Tristar",
          "Проверить Lightning connector"
        ]
      },
      "PP1V8_SDRAM": {
        "name": "SDRAM 1.8V",
        "voltage": "1.8V",
        "description": "Питание оперативной памяти",
        "diode_mode_normal": "0.380 - 0.450",
        "short_threshold": "<0.300",
        "models": "iPhone 6/6s/7/8/X series",
        "check_points": [
          "CPU area",
          "Near PMIC"
        ],
        "if_shorted": [
          "CPU reballing",
          "Замена CPU"
        ]
      },
      "PP_CPU": {
        "name": "CPU Core Voltage",
        "voltage": "0.7V - 1.1V (dynamic)",
        "description": "Питание ядра процессора (динамическое)",
        "diode_mode_normal": "0.020 - 0.050",
        "short_threshold": "<0.010",
        "models": "All iPhone",
        "check_points": [
          "CPU substrate",
          "PMIC output"
        ],
        "if_shorted": [
          "Замена CPU",
          "Reballing CPU"
        ]
      },
      "PP_GPU": {
        "name": "GPU Core Voltage",
        "voltage": "0.7V - 1.0V (dynamic)",
        "description": "Питание графического ядра",
        "diode_mode_normal": "0.020 - 0.050",
        "short_threshold": "<0.010",
        "models": "All iPhone",
        "check_points": [
          "GPU area of CPU",
          "PMIC output"
        ],
        "if_shorted": [
          "Замена CPU",
          "Reballing CPU"
        ]
      },
      "PP1V2_SDRAM": {
        "name": "SDRAM 1.2V",
        "voltage": "1.2V",
        "description": "Дополнительное питание SDRAM",
        "diode_mode_normal": "0.300 - 0.380",
        "short_threshold": "<0.200",
        "models": "iPhone 7 и новее",
        "check_points": [
          "Near CPU"
        ],
        "if_shorted": [
          "CPU reballing"
        ]
      },
      "PP3V0_NAND": {
        "name": "NAND 3.0V",
        "voltage": "3.0V",
        "description": "Питание флеш-памяти",
        "diode_mode_normal": "0.450 - 0.550",
        "short_threshold": "<0.350",
        "models": "All iPhone",
        "check_points": [
          "NAND flash U1200"
        ],
        "if_shorted": [
          "Замена NAND",
          "Проверить линии данных"
        ]
      },
      "PP1V8_NAND": {
        "name": "NAND 1.8V IO",
        "voltage": "1.8V",
        "description": "Питание IO интерфейса NAND",
        "diode_mode_normal": "0.350 - 0.420",
        "short_threshold": "<0.250",
        "models": "All iPhone",
        "check_points": [
          "NAND flash U1200"
        ],
        "if_shorted": [
          "Замена NAND"
        ]
      }
    }
  },
  "backlight_circuit": {
    "description": "Цепь подсветки дисплея",
    "measurements": {
      "PP5V7_SAGE_AVDDH": {
        "name": "Backlight Boost Voltage",
        "voltage": "5.7V - 20V (depends on brightness)",
        "diode_mode_normal": "0.500 - 0.600",
        "short_threshold": "<0.400",
        "models": "iPhone 6s/7/8",
        "location": "L3220, D3201, C3210",
        "symptoms_if_bad": [
          "Нет подсветки",
          "Тусклый экран"
        ],
        "common_faults": [
          "D3201 backlight diode",
          "L3220 backlight coil",
          "U3220 boost IC"
        ]
      },
      "OLED_AVDD": {
        "name": "OLED Panel Voltage",
        "voltage": "5.5V - 7V",
        "diode_mode_normal": "0.480 - 0.550",
        "short_threshold": "<0.380",
        "models": "iPhone X/XS/11 Pro/12/13/14/15",
        "location": "Display connector J5700",
        "symptoms_if_bad": [
          "Нет изображения",
          "Вертикальные линии"
        ],
        "common_faults": [
          "Display connector",
          "65730 Display PMIC"
        ]
      }
    }
  },
  "charging_circuit": {
    "description": "Цепь зарядки",
    "measurements": {
      "tristar_pins": {
        "name": "Tristar Pin Voltages",
        "normal_values": {
          "pin1_CC1": {
            "voltage": "0.2V - 0.3V",
            "diode": "0.350"
          },
          "pin2_CC2": {
            "voltage": "0.2V - 0.3V",
            "diode": "0.350"
          },
          "pin5_VBUS": {
            "voltage": "5V (USB)",
            "diode": "0.500"
          },
          "pin_data_p": {
            "voltage": "2.0V - 2.8V",
            "diode": "0.700"
          },
          "pin_data_n": {
            "voltage": "2.0V - 2.8V",
            "diode": "0.700"
          }
        },
        "models": "iPhone 5-14 (Lightning)",
        "symptoms_if_bad": [
          "Не заряжается",
          "Ошибка аксессуара",
          "Нет синхронизации"
        ]
      },
      "tigris_output": {
        "name": "Tigris/Hydra Output",
        "voltage": "4.2V (charging) / Battery voltage (idle)",
        "diode_mode_normal": "0.350 - 0.420",
        "models": "iPhone 6s и новее",
        "check_points": [
          "Q2300",
          "Battery connector"
        ],
        "symptoms_if_bad": [
          "Не заряжается",
          "Быстрый разряд",
          "Перегрев"
        ]
      }
    }
  },
  "audio_circuit": {
    "description": "Аудио цепь",
    "measurements": {
      "PP_SPKR_VBOOST": {
        "name": "Speaker Amplifier Boost",
        "voltage": "5V - 12V (depends on volume)",
        "diode_mode_normal": "0.420 - 0.480",
        "short_threshold": "<0.350",
        "models": "All iPhone",
        "location": "Near audio codec",
        "symptoms_if_bad": [
          "Нет звука",
          "Тихий звук",
          "Audio Disease (7/7+)"
        ]
      },
      "audio_codec_rails": {
        "name": "Audio Codec Power",
        "voltage": "1.8V",
        "diode_mode_normal": "0.380 - 0.420",
        "models": "All iPhone",
        "location": "U3500/U5200",
        "symptoms_if_bad": [
          "Нет звука",
          "Шумы",
          "Искажения"
        ]
      }
    }
  },
  "boot_sequence": {
    "description": "Последовательность загрузки iPhone",
    "steps": [
      {
        "step": 1,
        "name": "Battery Connected",
        "current_draw": "0.000A - 0.002A",
        "description": "Батарея подключена, телефон выключен",
        "rails_active": [
          "PP_BATT_VCC"
        ],
        "duration": "Idle"
      },
      {
        "step": 2,
        "name": "Power Button Pressed",
        "current_draw": "0.015A - 0.025A",
        "description": "PMIC получает сигнал включения",
        "rails_active": [
          "PP_BATT_VCC",
          "PP_VCC_MAIN"
        ],
        "duration": "~100ms"
      },
      {
        "step": 3,
        "name": "PMIC Initialization",
        "current_draw": "0.050A - 0.100A",
        "description": "PMIC запускает основные шины",
        "rails_active": [
          "PP_VCC_MAIN",
          "PP1V8",
          "PP1V2",
          "PP_CPU"
        ],
        "duration": "~200ms"
      },
      {
        "step": 4,
        "name": "CPU Boot ROM",
        "current_draw": "0.100A - 0.200A",
        "description": "CPU загружает Boot ROM",
        "rails_active": [
          "All main rails",
          "PP3V0_NAND"
        ],
        "duration": "~500ms"
      },
      {
        "step": 5,
        "name": "LLB/iBoot",
        "current_draw": "0.200A - 0.400A",
        "description": "Загрузка LLB из NAND",
        "rails_active": [
          "All rails"
        ],
        "duration": "~1s"
      },
      {
        "step": 6,
        "name": "Kernel Boot",
        "current_draw": "0.400A - 0.700A",
        "description": "iOS kernel загружается",
        "rails_active": [
          "All rails",
          "Display",
          "Backlight"
        ],
        "duration": "~3s"
      },
      {
        "step": 7,
        "name": "SpringBoard",
        "current_draw": "0.150A - 0.250A (idle)",
        "description": "Главный экран, устройство готово",
        "rails_active": [
          "All rails"
        ],
        "duration": "Continuous"
      }
    ],
    "abnormal_patterns": {
      "stuck_at_0mA": {
        "description": "Нет потребления тока",
        "possible_causes": [
          "Короткое на VCC_MAIN",
          "Мёртвый PMIC",
          "Повреждённая батарея"
        ]
      },
      "stuck_at_50mA": {
        "description": "Застревает на 50mA",
        "possible_causes": [
          "Нет PP1V8",
          "Проблема CPU",
          "Проблема NAND"
        ]
      },
      "boot_loop_100mA": {
        "description": "Цикл 100mA-400mA",
        "possible_causes": [
          "Corrupted NAND",
          "Baseband issue",
          "Software issue"
        ]
      },
      "constant_high_current": {
        "description": "Постоянно высокий ток >1A",
        "possible_causes": [
          "Короткое на шинах питания",
          "Повреждённый CPU/GPU"
        ]
      }
    }
  },
  "connector_pinouts": {
    "lightning_connector": {
      "name": "Lightning Connector",
      "pins": {
        "1": {
          "name": "GND",
          "function": "Ground"
        },
        "2": {
          "name": "L0p",
          "function": "Lane 0 positive"
        },
        "3": {
          "name": "L0n",
          "function": "Lane 0 negative"
        },
        "4": {
          "name": "ID0",
          "function": "Accessory ID"
        },
        "5": {
          "name": "VBUS",
          "function": "Power 5V"
        },
        "6": {
          "name": "L1n",
          "function": "Lane 1 negative"
        },
        "7": {
          "name": "L1p",
          "function": "Lane 1 positive"
        },
        "8": {
          "name": "GND",
          "function": "Ground"
        }
      },
      "diode_readings": {
        "pin1_gnd": "0.000",
        "pin2_L0p": "0.680-0.720",
        "pin3_L0n": "0.680-0.720",
        "pin4_ID0": "0.450-0.520",
        "pin5_VBUS": "0.480-0.550",
        "pin6_L1n": "0.680-0.720",
        "pin7_L1p": "0.680-0.720",
        "pin8_gnd": "0.000"
      }
    },
    "battery_connector": {
      "name": "Battery Connector",
      "pins": {
        "BATT+": {
          "function": "Battery positive",
          "voltage": "3.7-4.35V"
        },
        "BATT-": {
          "function": "Battery negative / GND",
          "voltage": "0V"
        },
        "SWI": {
          "function": "Single Wire Interface",
          "voltage": "1.8V"
        },
        "NTC": {
          "function": "Temperature sensor",
          "resistance": "10K @ 25°C"
        }
      }
    },
    "display_connector_j5700": {
      "name": "Display Connector (iPhone X+)",
      "critical_pins": {
        "OLED_AVDD": {
          "function": "OLED power",
          "voltage": "5.5-7V"
        },
        "OLED_AVEE": {
          "function": "OLED negative",
          "voltage": "-5.5V"
        },
        "MIPI_CLK": {
          "function": "Display clock",
          "voltage": "1.2V"
        },
        "MIPI_DATA": {
          "function": "Display data",
          "voltage": "1.2V"
        },
        "TOUCH_VDD": {
          "function": "Touch power",
          "voltage": "3.0V"
        }
      }
    }
  },
  "common_fault_signatures": {
    "no_power": {
      "symptom": "Не включается, 0mA",
      "checklist": [
        "Проверить VCC_MAIN в диод-режиме (<0.250 = КЗ)",
        "Проверить PP_BATT_VCC",
        "Проверить Tigris/Hydra",
        "Проверить PMIC",
        "Freeze spray для поиска КЗ"
      ]
    },
    "no_charge": {
      "symptom": "Не заряжается",
      "checklist": [
        "Tristar тестер",
        "Проверить PP5V0_USB",
        "Проверить Tigris/Hydra output",
        "Проверить Q2300 MOSFET",
        "Проверить Lightning connector"
      ]
    },
    "no_image": {
      "symptom": "Нет изображения",
      "checklist": [
        "Проверить backlight circuit",
        "Проверить display connector",
        "Проверить 65730 Display PMIC",
        "Проверить OLED_AVDD",
        "Подключить заведомо рабочий экран"
      ]
    },
    "no_touch": {
      "symptom": "Тач не работает",
      "checklist": [
        "Проверить Touch connector",
        "Проверить Meson IC (iPhone 6+)",
        "Проверить Cumulus IC (iPhone 7)",
        "Проверить PP_TOUCH_VDD"
      ]
    },
    "no_service": {
      "symptom": "Нет сети",
      "checklist": [
        "Проверить Baseband PMIC",
        "Проверить Baseband CPU",
        "Проверить RF схему",
        "Проверить антенны",
        "Проверить SIM reader"
      ]
    },
    "audio_disease": {
      "symptom": "Серая иконка динамика (iPhone 7/7+)",
      "checklist": [
        "Проверить Audio IC C12 pad",
        "Reballing Audio IC",
        "Jumper wire C12 pad",
        "Проверить PP_SPKR_VBOOST"
      ]
    }
  },
  "thermal_camera_signatures": {
    "description": "Что искать тепловизором",
    "normal_temps": {
      "CPU": "40-60°C under load",
      "PMIC": "35-50°C",
      "Charging_IC": "40-55°C when charging",
      "WiFi": "35-45°C"
    },
    "abnormal_patterns": {
      "hot_cpu_no_boot": "CPU шунтит - замена CPU",
      "hot_pmic_no_power": "PMIC шунтит или перегружен",
      "hot_capacitor": "Конденсатор пробит - КЗ на линии",
      "hot_wifi_module": "WiFi чип шунтит VCC_MAIN",
      "hot_baseband": "Baseband шунтит"
    }
  },
  "diode_mode_technique": {
    "description": "Как правильно измерять в диод-режиме",
    "setup": {
      "multimeter": "Fluke 115/117 или аналог",
      "mode": "Diode mode (символ диода)",
      "red_probe": "На GND (ground)",
      "black_probe": "На тестируемую точку"
    },
    "interpretation": {
      "0.000": "Прямое КЗ на GND",
      "0.001-0.100": "Вероятно КЗ, проверить дополнительно",
      "0.300-0.500": "Нормальные значения для большинства линий",
      "0.500-0.700": "Нормально для линий данных",
      "OL (overload)": "Обрыв линии или нет связи с GND"
    },
    "tips": [
      "Измеряйте на обеих сторонах платы",
      "Сравнивайте с заведомо рабочей платой",
      "Записывайте значения для reference",
      "Используйте freeze spray для поиска КЗ",
      "Проверяйте после каждого компонента"
    ]
  },
  "advanced_diagnostics": {
    "tristar_testing": {
      "tools_needed": [
        "Мультиметр",
        "USB Ammeter",
        "Tristar Tester"
      ],
      "test_points": {
        "iPhone_6_7": {
          "D+": "PP_USB_D_P",
          "D-": "PP_USB_D_N",
          "normal_reading": "0.650V в diode mode",
          "shorted": "< 0.400V"
        }
      }
    },
    "smc_testing": {
      "voltage_rails": {
        "PPBUS_G3H": {
          "normal": "12.3V - 12.6V",
          "low": "< 12.0V = проблема с зарядкой",
          "high": "> 13.0V = SMC issue"
        },
        "PP3V3_S5": {
          "normal": "3.3V ± 0.1V",
          "missing": "0V = SMC не создает S5 state"
        }
      }
    }
  }
}