<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="description" content="Service profesional repara»õii iPhone, MacBook, Samsung √Æn Bucure»ôti ‚≠ê Garan»õie inclusƒÉ ‚Ä¢ Diagnostic gratuit ‚Ä¢ De la 60 lei ‚Ä¢ Service Express ‚Ä¢ Sector 4, Calea »òerban VodƒÉ 47">
    <meta name="keywords" content="repara»õii iPhone Bucure»ôti, repara»õii MacBook, repara»õii iPad, service Apple Bucure»ôti, repara»õii Samsung, repara»õii telefoane, repara»õii laptopuri, service multibrand, service urgent, diagnostic gratuit, repara»õii plƒÉci electronice, repara»õii baterie, repara»õii ecran, service profesional, garan»õie repara»õii">
    <title>Repara»õii iPhone, MacBook, Samsung Bucure»ôti | Service Rapid 30 min | NEXX ‚≠ê</title>
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://nexx.ro/">
    <meta property="og:title" content="NEXX - Repara»õii Profesionale iPhone, MacBook, iPad, Samsung √Æn Bucure»ôti">
    <meta property="og:description" content="Service multibrand profesional. Repara»õii Express. Experien»õƒÉ 10+ ani. Diagnostic gratuit. Garan»õie inclusƒÉ. Repara»õii: iPhone, iPad, MacBook, Samsung. Pre»õ de la 50 lei.">
    <meta property="og:image" content="https://nexx.ro/static/nexx-logo.png">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://nexx.ro/">
    <meta property="twitter:title" content="NEXX - Repara»õii Apple, Samsung, Telefoane √Æn Bucure»ôti | Service Profesional">
    <meta property="twitter:description" content="Repara»õii urgent: iPhone, iPad, MacBook, Samsung. Exper»õi 10+ ani. Diagnostic gratuit. Garan»õie inclusƒÉ. Pre»õ transparent. Service Express.">
    <meta property="twitter:image" content="https://nexx.com.ua/static/nexx-logo.png">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/static/nexx-logo.png">
    <link rel="apple-touch-icon" href="/static/nexx-logo.png">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#1f2937">
    <meta name="version" content="2026-01-30-cache">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="NEXX">
    
    <!-- Canonical -->
    <link rel="canonical" href="https://nexx.ro/">
    
    <!-- Structured Data (JSON-LD) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "LocalBusiness",
      "name": "NEXX Service Center - Repara»õii iPhone, iPad, MacBook, Samsung",
      "alternateName": "NEXX, Service NEXX",
      "description": "Service profesional multibrand cu experien»õƒÉ 10+ ani. Repara»õii Express iPhone, iPad, MacBook, Samsung. Diagnostic gratuit, garan»õie inclusƒÉ.",
      "image": "https://nexx.ro/static/nexx-logo.png",
      "@id": "https://nexx.ro",
      "url": "https://nexx.ro",
      "telephone": "",
      "email": "info@nexxgsm.ro",
      "priceRange": "50-500 RON",
      "areaServed": {
        "@type": "City",
        "name": "Bucure»ôti",
        "url": "https://nexx.ro"
      },
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "Calea »òerban VodƒÉ 47",
        "addressLocality": "Bucure»ôti",
        "addressRegion": "Sector 4",
        "postalCode": "040215",
        "addressCountry": "RO"
      },
      "geo": {
        "@type": "GeoCoordinates",
        "latitude": 44.42146803174267,
        "longitude": 26.102888425255543
      },
      "serviceType": [
        "Repara»õii iPhone Bucure»ôti",
        "Repara»õii MacBook Bucure»ôti", 
        "Repara»õii Samsung Bucure»ôti",
        "Repara»õii Telefoane Bucure»ôti",
        "Repara»õii Laptopuri Bucure»ôti",
        "Repara»õii Baterie iPhone",
        "Repara»õii Ecran",
        "Repara»õii PlƒÉci Electronice",
        "Diagnostic Gratuit",
        "Service GSM Bucure»ôti",
        "√énlocuire Display",
        "Service Rapid"
      ],
      "openingHoursSpecification": [
        {
          "@type": "OpeningHoursSpecification",
          "dayOfWeek": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"],
          "opens": "10:00",
          "closes": "19:00"
        },
        {
          "@type": "OpeningHoursSpecification",
          "dayOfWeek": ["Saturday"],
          "opens": "11:00",
          "closes": "17:00"
        }
      ],
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.8",
        "reviewCount": "247",
        "bestRating": "5",
        "worstRating": "1"
      },
      "knowsAbout": [
        "Repara»õii iPhone",
        "Repara»õii MacBook",
        "Repara»õii iPad",
        "Service Apple",
        "Service Samsung",
        "Repara»õii electronice"
      ],
      "sameAs": [
        "https://instagram.com/nexx_service",
        "https://t.me/nexx_support",
        "https://facebook.com/nexx.service.center"
      ],
      "founder": {
        "@type": "Organization",
        "name": "NEXX Service Center"
      },
      "foundingDate": "2014",
      "foundingLocation": "Bucure»ôti"
    }
    </script>
    
    <!-- BreadcrumbList Schema -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "AcasƒÉ",
          "item": "https://nexx.ro/"
        },
        {
          "@type": "ListItem",
          "position": 2,
          "name": "Servicii Repara»õii",
          "item": "https://nexx.ro/#services"
        },
        {
          "@type": "ListItem",
          "position": 3,
          "name": "Calculator Pre»õ",
          "item": "https://nexx.ro/#calculator"
        },
        {
          "@type": "ListItem",
          "position": 4,
          "name": "Contacte",
          "item": "https://nexx.ro/#contacts"
        }
      ]
    }
    </script>
    
    <!-- FAQ Schema -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [
        {
          "@type": "Question",
          "name": "C√¢t costƒÉ repara»õia unui iPhone √Æn Bucure»ôti?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Pre»õurile repara»õiei iPhone la NEXX service √Æncep de la 50 lei pentru diagnosticul gratuit. Costurile variazƒÉ √Æn func»õie de tipul de repara»õie (ecran, baterie, plƒÉcƒÉ electronicƒÉ etc). Folosi»õi calculatorul nostru de pre»õ pentru o estimare exactƒÉ."
          }
        },
        {
          "@type": "Question",
          "name": "Care este garan»õia pe repara»õii?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Oferim garan»õie de 30 de zile pe toate repara»õiile realizate. DacƒÉ apare o problemƒÉ √Æn aceastƒÉ perioadƒÉ, vom repara gratuit."
          }
        },
        {
          "@type": "Question",
          "name": "C√¢t dureazƒÉ o repara»õie?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Timpul de repara»õie depinde de complexitatea lucrƒÉrii. Multe repara»õii se finalizeazƒÉ √Æn aceea»ôi zi. Pentru cazuri mai complexe, vƒÉ vom comunica estimarea exactƒÉ."
          }
        },
        {
          "@type": "Question",
          "name": "Lucra»õi cu piese originale?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Da, folosim piese originale »ôi piese premium compatibile de calitate ridicatƒÉ, toate cu garan»õie."
          }
        }
      ]
    }
    </script>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;800&display=swap" rel="stylesheet">
    
    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">
    
    <!-- Critical CSS - Comprehensive fallback styles -->
    <style id="critical-css">
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; 
            overflow-x: hidden;
            background: #0f172a;
            color: #fff;
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        /* Show content immediately with fallback styles */
        /* Content is visible from the start, Tailwind enhances it when loaded */
        /* Basic layout fallback */
        .container { max-width: 1280px; margin: 0 auto; padding: 0 1rem; }
        .flex { display: flex; }
        .grid { display: grid; }
        .hidden:not([class*="md:flex"]):not([class*="md:block"]):not([class*="md:inline"]) { display: none; }
        /* Allow Tailwind responsive classes to override hidden */
        @media (min-width: 768px) {
            .hidden.md\:flex { display: flex !important; }
            .hidden.md\:block { display: block !important; }
            .hidden.md\:inline-flex { display: inline-flex !important; }
        }
        /* Common utility classes - more specific selectors */
        [class*="bg-slate-900"], [class*="bg-gray-900"], [class*="bg-zinc-900"] { background-color: #0f172a; }
        [class*="bg-white"] { background-color: #fff; color: #000; }
        [class*="text-white"] { color: #fff; }
        [class*="text-center"] { text-align: center; }
        [class*="rounded-xl"], [class*="rounded-lg"], [class*="rounded"] { border-radius: 0.5rem; }
        [class*="p-4"], [class*="p-6"], [class*="p-8"] { padding: 1rem; }
        [class*="px-4"], [class*="px-6"] { padding-left: 1rem; padding-right: 1rem; }
        [class*="py-4"], [class*="py-6"] { padding-top: 1rem; padding-bottom: 1rem; }
        [class*="mb-4"], [class*="mb-6"] { margin-bottom: 1rem; }
        [class*="mt-4"], [class*="mt-6"] { margin-top: 1rem; }
        [class*="gap-4"], [class*="gap-6"] { gap: 1rem; }
        [class*="items-center"] { align-items: center; }
        [class*="justify-center"] { justify-content: center; }
        [class*="w-full"] { width: 100%; }
        [class*="max-w-"] { max-width: 100%; }
        /* Images */
        img { max-width: 100%; height: auto; display: block; }
        /* Links and buttons basic styling */
        a, button { transition: all 0.2s ease; }
        /* Sections */
        section { padding: 2rem 0; }
        /* Ensure header elements don't overflow and language switcher is visible */
        header .flex.justify-between { gap: 1rem; }
        header .flex.justify-between > nav { flex: 1 1 auto; justify-content: center; }
        header .flex.justify-between > nav ~ * { flex-shrink: 0; }
        /* Mobile viewport fix - CRITICAL */
        @media (max-width: 768px) {
            html {
                overflow-x: hidden !important;
                width: 100%;
                max-width: 100vw;
            }
            body {
                overflow-x: hidden !important;
                width: 100% !important;
                max-width: 100vw !important;
                position: relative;
                padding-left: env(safe-area-inset-left, 0);
                padding-right: env(safe-area-inset-right, 0);
            }
            * { box-sizing: border-box; }
            img:not(svg):not([class*="icon"]) {
                max-width: 100%;
                height: auto;
            }
            .container, [class*="container"] {
                max-width: 100% !important;
                padding-left: max(1rem, env(safe-area-inset-left, 0));
                padding-right: max(1rem, env(safe-area-inset-right, 0));
                margin-left: auto;
                margin-right: auto;
            }
            .flex, [class*="flex"] { flex-wrap: wrap; }
            .grid, [class*="grid"] { grid-template-columns: 1fr; }
        }
        /* Typography */
        h1, h2, h3, h4, h5, h6 { font-weight: 700; line-height: 1.2; margin-bottom: 0.5em; }
        h1 { font-size: 2.5rem; }
        h2 { font-size: 2rem; }
        h3 { font-size: 1.5rem; }
        p { margin-bottom: 1em; }
        a { color: #60a5fa; text-decoration: none; }
        a:hover { text-decoration: underline; }
        /* Buttons */
        button, .btn {
            display: inline-block;
            padding: 0.75rem 1.5rem;
            background: #3b82f6;
            color: #fff;
            border: none;
            border-radius: 0.5rem;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
        }
        button:hover, .btn:hover {
            background: #2563eb;
            transform: translateY(-1px);
        }
        /* Cards */
        .card {
            background: rgba(30, 41, 59, 0.8);
            border-radius: 1rem;
            padding: 1.5rem;
            margin-bottom: 1rem;
        }
        /* Responsive */
        @media (min-width: 768px) {
            .md\\:flex { display: flex; }
            .md\\:hidden { display: none; }
            .md\\:grid { display: grid; }
        }
        @media (max-width: 768px) {
            h1 { font-size: 2rem; line-height: 1.2; }
            h2 { font-size: 1.75rem; line-height: 1.3; }
            h3 { font-size: 1.25rem; line-height: 1.4; }
            body { font-size: 16px; -webkit-text-size-adjust: 100%; }
            .container { padding-left: 1rem; padding-right: 1rem; }
            /* Prevent overflow: only block containers, not every element */
            main, section, article, .container, [class*="max-w-"] { max-width: 100%; box-sizing: border-box; }
            img { max-width: 100%; height: auto; display: block; }
        }
    </style>
    
    <!-- Tailwind CSS with error handling -->
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <!-- Lucide Icons (modern, lightweight) -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
    
    <!-- Local React -->
    <script src="/static/vendor/react.production.min.js"></script>
    <script src="/static/vendor/react-dom.production.min.js"></script>
    
    <style>
        /* Ensure styles are applied even if Tailwind loads late */
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; 
            overflow-x: hidden;
        }
        /* Show content when styles are loaded */
        body.styles-loaded {
            opacity: 1;
        }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes float { 0%, 100% { transform: translateY(0px); } 50% { transform: translateY(-20px); } }
        @keyframes pulse-slow { 0%, 100% { opacity: 0.3; } 50% { opacity: 0.6; } }
        @keyframes slide-down { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-slide-down { animation: slide-down 0.3s ease-out; }
        
        .animate-fade-in { animation: fadeIn 0.6s ease-out; }
        .animate-float { animation: float 3s ease-in-out infinite; }
        .hero-bg { 
            /* –°–≤–µ—Ä—Ö—É —Å–≤–µ—Ç–ª–µ–µ ‚Äî –Ω–µ —Å–ª–∏–≤–∞–µ—Ç—Å—è —Å —Ç—ë–º–Ω—ã–º —Ö–µ–¥–µ—Ä–æ–º –¥–æ —Å–∫—Ä–æ–ª–ª–∞ */
            background: linear-gradient(180deg, #1e293b 0%, #172033 15%, #0f172a 35%, #1a1a1a 60%, #2d2d2d 100%);
            position: relative;
        }
        
        /* Animated gradient overlay */
        .hero-bg::before {
            content: '';
            position: absolute;
            inset: 0;
            background: radial-gradient(ellipse 80% 50% at 50% 0%, rgba(59, 130, 246, 0.06), transparent 50%),
                        radial-gradient(circle at 30% 50%, rgba(128, 128, 128, 0.06), transparent 50%),
                        radial-gradient(circle at 70% 50%, rgba(64, 64, 64, 0.06), transparent 50%);
            animation: gradient-shift 8s ease-in-out infinite alternate;
        }
        
        @keyframes gradient-shift {
            0% { opacity: 0.5; transform: scale(1); }
            100% { opacity: 0.8; transform: scale(1.1); }
        }
        
        /* Smooth scrolling */
        html { scroll-behavior: smooth; }
        
        /* Focus improvements */
        *:focus-visible {
          outline: 2px solid #4b5563;
          outline-offset: 2px;
          border-radius: 4px;
        }
        
        /* Selection color */
        ::selection {
          background-color: #374151;
          color: white;
        }
        
        /* Lazy loading blur effect */
        img[loading="lazy"] {
          transition: filter 0.3s;
        }
        
        img[loading="lazy"]:not([src]) {
          filter: blur(10px);
        }
        
        /* Reduce motion for accessibility */
        @media (prefers-reduced-motion: reduce) {
          *, *::before, *::after {
            animation-duration: 0.01ms !important;
            animation-iteration-count: 1 !important;
            transition-duration: 0.01ms !important;
          }
        }
        
        /* Skip to content link */
        .skip-to-content {
            position: absolute;
            top: -40px;
            left: 0;
            background: #1f2937;
            color: white;
            padding: 8px 16px;
            text-decoration: none;
            border-radius: 0 0 4px 0;
            z-index: 100;
        }
        .skip-to-content:focus {
            top: 0;
        }
        
        /* Mobile optimizations */
        @media (max-width: 768px) {
            /* Safe area for notched phones */
            body {
                padding-left: env(safe-area-inset-left, 0);
                padding-right: env(safe-area-inset-right, 0);
                padding-bottom: env(safe-area-inset-bottom, 0);
                font-size: 16px;
                -webkit-text-size-adjust: 100%;
                -webkit-font-smoothing: antialiased;
            }
            header, [class*="header"] {
                padding-left: max(1rem, env(safe-area-inset-left, 0));
                padding-right: max(1rem, env(safe-area-inset-right, 0));
            }
            /* Touch targets: min-height for tap areas, not min-width on all (breaks layout) */
            button:not([class*="icon-only"]), input, select, textarea {
                min-height: 44px;
            }
            nav a, .mobile-menu a {
                min-height: 48px;
                display: flex;
                align-items: center;
                padding: 12px 16px;
            }
            /* Prevent horizontal scroll */
            html, body {
                max-width: 100vw;
                overflow-x: hidden;
                overscroll-behavior-x: none;
            }
            button { padding: 12px 20px; }
            img { max-width: 100%; height: auto; }
            input, textarea, select {
                font-size: 16px;
                padding: 12px;
                max-width: 100%;
                box-sizing: border-box;
            }
            .card, [class*="card"] { margin-bottom: 16px; }
            nav { padding: 8px 0; }
        }
        
        @media (max-width: 480px) {
            /* Extra small devices - keep 16px to avoid zoom and readability */
            body {
                font-size: 16px;
            }
            
            h1 {
                font-size: 2rem !important;
                line-height: 1.2 !important;
            }
            
            h2 {
                font-size: 1.75rem !important;
                line-height: 1.3 !important;
            }
            
            h3 {
                font-size: 1.5rem !important;
                line-height: 1.4 !important;
            }
            
            /* Better padding on small screens */
            .container, [class*="container"] {
                padding-left: 16px;
                padding-right: 16px;
            }
            
            /* Stack elements vertically on very small screens */
            .grid {
                grid-template-columns: 1fr !important;
            }
        }
        
        /* Fix for Font Awesome icons on mobile */
        @media (max-width: 768px) {
            .fas, .far, .fab, .fal, .fad {
                font-size: 1.2em;
                line-height: 1;
            }
        }
        
        /* Improve mobile menu visibility */
        @media (max-width: 768px) {
            [class*="mobile-menu"], [class*="mobileMenu"] {
                position: fixed;
                top: 64px;
                left: 0;
                right: 0;
                background: white;
                z-index: 1000;
                max-height: calc(100vh - 64px);
                overflow-y: auto;
                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                padding-left: env(safe-area-inset-left, 0);
                padding-right: env(safe-area-inset-right, 0);
            }
            footer, [class*="footer"] {
                padding-left: max(1rem, env(safe-area-inset-left, 0));
                padding-right: max(1rem, env(safe-area-inset-right, 0));
                padding-bottom: max(1rem, env(safe-area-inset-bottom, 0));
            }
        }
    </style>
    <!-- Tailwind CSS CDN - Non-blocking with script tag -->
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <!-- Skip to main content (accessibility) -->
    <a href="#main-content" class="skip-to-content" id="skip-link"></a>
    
    <!-- Hide app until React is ready to prevent FOUC -->
    <style>
        /* Hide everything until React is ready */
        body:not(.react-loaded) #app {
            display: none !important;
        }
        body.react-loaded #app {
            display: block;
        }
        #app:not(.react-ready) {
            opacity: 0;
            visibility: hidden;
        }
        #app.react-ready {
            opacity: 1;
            visibility: visible;
            transition: opacity 0.2s ease-in, visibility 0.2s;
        }
    </style>
    <div id="header-root"></div>
    <div id="app"></div>
    <div id="footer-root"></div>
    
    <script src="/static/utils.min.js?v=20260130"></script>
    <script src="/static/database.min.js?v=20260130"></script>
    <script src="/static/nexx-core.min.js?v=20260130"></script>
    <script src="/static/i18n.js?v=17.0.1"></script>
    <script src="/static/ui-components.js?v=13.0.0"></script>
    <script src="/static/navigation-system.min.js?v=2.1"></script>
    <script src="/static/analytics.min.js?v=20260130"></script>
    <style>
      :root {
        --primary: rgb(59, 130, 246);
        --primary-foreground: rgb(255, 255, 255);
      }
      
      .bg-primary {
        background: linear-gradient(to bottom right, rgb(59, 130, 246), rgb(147, 51, 234));
      }
      
      .text-primary-foreground {
        color: rgb(255, 255, 255);
      }
      
      .border-primary {
        border-color: rgb(59, 130, 246);
      }
      
      .shadow-primary\/50 {
        box-shadow: 0 10px 15px -3px rgba(59, 130, 246, 0.3), 0 4px 6px -2px rgba(59, 130, 246, 0.2);
      }
      
      .shadow-primary\/20 {
        box-shadow: 0 10px 15px -3px rgba(59, 130, 246, 0.1), 0 4px 6px -2px rgba(59, 130, 246, 0.1);
      }
      
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .animate-fadeIn {
        animation: fadeIn 0.4s ease-out;
      }
      .custom-scrollbar::-webkit-scrollbar {
        width: 8px;
      }
      .custom-scrollbar::-webkit-scrollbar-track {
        background: rgba(31, 41, 55, 0.5);
        border-radius: 4px;
      }
      .custom-scrollbar::-webkit-scrollbar-thumb {
        background: rgba(59, 130, 246, 0.5);
        border-radius: 4px;
      }
      .custom-scrollbar::-webkit-scrollbar-thumb:hover {
        background: rgba(59, 130, 246, 0.7);
      }
    </style>
    <script src="/static/price-calculator.js?v=4.0-20260130"></script>
    
    <script>
        // Wait for all dependencies to load with timeout
        let initAttempts = 0;
        const MAX_INIT_ATTEMPTS = 50; // 5 seconds max
        let isInitialized = false; // Prevent double initialization
        const initApp = () => {
            // Prevent double initialization
            if (isInitialized) {
                console.warn('‚ö†Ô∏è App already initialized, skipping...');
                return;
            }
            
            if (initAttempts >= MAX_INIT_ATTEMPTS) {
                console.warn('NEXX: dependencies not loaded in time');
                return;
            }
            
            if (!window.React || !window.ReactDOM || !window.NEXXDesign || !window.i18n) {
                initAttempts++;
                if (initAttempts % 10 === 0) {
                    console.warn('Waiting for dependencies...', {
                        React: !!window.React,
                        ReactDOM: !!window.ReactDOM,
                        NEXXDesign: !!window.NEXXDesign,
                        i18n: !!window.i18n,
                        attempts: initAttempts
                    });
                }
                setTimeout(initApp, 100);
                return;
            }
            
            // Mark as initialized BEFORE rendering
            isInitialized = true;
            initAttempts = 0; // Reset on success
            if (window._pendingToasts) window._pendingToasts.length = 0; // –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å—Ç–∞—Ä—ã–µ –æ—à–∏–±–∫–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
            
            const { useState, useEffect, createElement: h } = React;
            const { Header, Footer, ToastContainer } = window.NEXXDesign;
        
        // Lucide Icons as SVG components (replacing Font Awesome)
        const Icons = {
            x: (props = {}) => h('svg', { xmlns: 'http://www.w3.org/2000/svg', width: props.size || 24, height: props.size || 24, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2, strokeLinecap: 'round', strokeLinejoin: 'round', className: props.className || '' }, h('path', { d: 'M18 6 6 18' }), h('path', { d: 'm6 6 12 12' })),
            check: (props = {}) => h('svg', { xmlns: 'http://www.w3.org/2000/svg', width: props.size || 24, height: props.size || 24, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2, strokeLinecap: 'round', strokeLinejoin: 'round', className: props.className || '' }, h('path', { d: 'M20 6 9 17l-5-5' })),
            checkCircle: (props = {}) => h('svg', { xmlns: 'http://www.w3.org/2000/svg', width: props.size || 24, height: props.size || 24, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2, strokeLinecap: 'round', strokeLinejoin: 'round', className: props.className || '' }, h('circle', { cx: 12, cy: 12, r: 10 }), h('path', { d: 'm9 12 2 2 4-4' })),
            phone: (props = {}) => h('svg', { xmlns: 'http://www.w3.org/2000/svg', width: props.size || 24, height: props.size || 24, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2, strokeLinecap: 'round', strokeLinejoin: 'round', className: props.className || '' }, h('path', { d: 'M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z' })),
            phoneCall: (props = {}) => h('svg', { xmlns: 'http://www.w3.org/2000/svg', width: props.size || 24, height: props.size || 24, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2, strokeLinecap: 'round', strokeLinejoin: 'round', className: props.className || '' }, h('path', { d: 'M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z' }), h('path', { d: 'M14.05 2a9 9 0 0 1 8 7.94' }), h('path', { d: 'M14.05 6A5 5 0 0 1 18 10' })),
            arrowRight: (props = {}) => h('svg', { xmlns: 'http://www.w3.org/2000/svg', width: props.size || 24, height: props.size || 24, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2, strokeLinecap: 'round', strokeLinejoin: 'round', className: props.className || '' }, h('path', { d: 'M5 12h14' }), h('path', { d: 'm12 5 7 7-7 7' })),
            chevronLeft: (props = {}) => h('svg', { xmlns: 'http://www.w3.org/2000/svg', width: props.size || 24, height: props.size || 24, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2, strokeLinecap: 'round', strokeLinejoin: 'round', className: props.className || '' }, h('path', { d: 'm15 18-6-6 6-6' })),
            chevronRight: (props = {}) => h('svg', { xmlns: 'http://www.w3.org/2000/svg', width: props.size || 24, height: props.size || 24, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2, strokeLinecap: 'round', strokeLinejoin: 'round', className: props.className || '' }, h('path', { d: 'm9 18 6-6-6-6' })),
            loader: (props = {}) => h('svg', { xmlns: 'http://www.w3.org/2000/svg', width: props.size || 24, height: props.size || 24, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2, strokeLinecap: 'round', strokeLinejoin: 'round', className: `animate-spin ${props.className || ''}` }, h('path', { d: 'M21 12a9 9 0 1 1-6.219-8.56' })),
            battery: (props = {}) => h('svg', { xmlns: 'http://www.w3.org/2000/svg', width: props.size || 24, height: props.size || 24, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2, strokeLinecap: 'round', strokeLinejoin: 'round', className: props.className || '' }, h('rect', { x: 2, y: 7, width: 16, height: 10, rx: 2, ry: 2 }), h('line', { x1: 22, x2: 22, y1: 11, y2: 13 }), h('line', { x1: 6, x2: 6, y1: 11, y2: 13 }), h('line', { x1: 10, x2: 10, y1: 11, y2: 13 }), h('line', { x1: 14, x2: 14, y1: 11, y2: 13 })),
            cpu: (props = {}) => h('svg', { xmlns: 'http://www.w3.org/2000/svg', width: props.size || 24, height: props.size || 24, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2, strokeLinecap: 'round', strokeLinejoin: 'round', className: props.className || '' }, h('rect', { x: 4, y: 4, width: 16, height: 16, rx: 2 }), h('rect', { x: 9, y: 9, width: 6, height: 6 }), h('path', { d: 'M15 2v2' }), h('path', { d: 'M15 20v2' }), h('path', { d: 'M2 15h2' }), h('path', { d: 'M2 9h2' }), h('path', { d: 'M20 15h2' }), h('path', { d: 'M20 9h2' }), h('path', { d: 'M9 2v2' }), h('path', { d: 'M9 20v2' })),
            monitor: (props = {}) => h('svg', { xmlns: 'http://www.w3.org/2000/svg', width: props.size || 24, height: props.size || 24, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2, strokeLinecap: 'round', strokeLinejoin: 'round', className: props.className || '' }, h('rect', { x: 2, y: 3, width: 20, height: 14, rx: 2 }), h('line', { x1: 8, x2: 16, y1: 21, y2: 21 }), h('line', { x1: 12, x2: 12, y1: 17, y2: 21 })),
            plug: (props = {}) => h('svg', { xmlns: 'http://www.w3.org/2000/svg', width: props.size || 24, height: props.size || 24, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2, strokeLinecap: 'round', strokeLinejoin: 'round', className: props.className || '' }, h('path', { d: 'M12 22v-5' }), h('path', { d: 'M9 8V2' }), h('path', { d: 'M15 8V2' }), h('path', { d: 'M18 8v5a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V8Z' })),
            wrench: (props = {}) => h('svg', { xmlns: 'http://www.w3.org/2000/svg', width: props.size || 24, height: props.size || 24, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2, strokeLinecap: 'round', strokeLinejoin: 'round', className: props.className || '' }, h('path', { d: 'M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z' })),
            images: (props = {}) => h('svg', { xmlns: 'http://www.w3.org/2000/svg', width: props.size || 24, height: props.size || 24, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2, strokeLinecap: 'round', strokeLinejoin: 'round', className: props.className || '' }, h('path', { d: 'M18 22H4a2 2 0 0 1-2-2V6' }), h('path', { d: 'm22 13-1.296-1.296a2.41 2.41 0 0 0-3.408 0L11 18' }), h('circle', { cx: 12, cy: 8, r: 2 }), h('rect', { x: 6, y: 2, width: 16, height: 16, rx: 2 })),
            smartphone: (props = {}) => h('svg', { xmlns: 'http://www.w3.org/2000/svg', width: props.size || 24, height: props.size || 24, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2, strokeLinecap: 'round', strokeLinejoin: 'round', className: props.className || '' }, h('rect', { x: 5, y: 2, width: 14, height: 20, rx: 2, ry: 2 }), h('path', { d: 'M12 18h.01' })),
            zap: (props = {}) => h('svg', { xmlns: 'http://www.w3.org/2000/svg', width: props.size || 24, height: props.size || 24, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2, strokeLinecap: 'round', strokeLinejoin: 'round', className: props.className || '' }, h('path', { d: 'M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z' })),
            shield: (props = {}) => h('svg', { xmlns: 'http://www.w3.org/2000/svg', width: props.size || 24, height: props.size || 24, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2, strokeLinecap: 'round', strokeLinejoin: 'round', className: props.className || '' }, h('path', { d: 'M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z' }), h('path', { d: 'm9 12 2 2 4-4' })),
            tag: (props = {}) => h('svg', { xmlns: 'http://www.w3.org/2000/svg', width: props.size || 24, height: props.size || 24, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2, strokeLinecap: 'round', strokeLinejoin: 'round', className: props.className || '' }, h('path', { d: 'M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z' }), h('circle', { cx: 7.5, cy: 7.5, r: '.5', fill: 'currentColor' })),
            clock: (props = {}) => h('svg', { xmlns: 'http://www.w3.org/2000/svg', width: props.size || 24, height: props.size || 24, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2, strokeLinecap: 'round', strokeLinejoin: 'round', className: props.className || '' }, h('circle', { cx: 12, cy: 12, r: 10 }), h('polyline', { points: '12 6 12 12 16 14' })),
            calculator: (props = {}) => h('svg', { xmlns: 'http://www.w3.org/2000/svg', width: props.size || 24, height: props.size || 24, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2, strokeLinecap: 'round', strokeLinejoin: 'round', className: props.className || '' }, h('rect', { x: 4, y: 2, width: 16, height: 20, rx: 2 }), h('line', { x1: 8, x2: 16, y1: 6, y2: 6 }), h('line', { x1: 16, x2: 16, y1: 14, y2: 18 }), h('path', { d: 'M16 10h.01' }), h('path', { d: 'M12 10h.01' }), h('path', { d: 'M8 10h.01' }), h('path', { d: 'M12 14h.01' }), h('path', { d: 'M8 14h.01' }), h('path', { d: 'M12 18h.01' }), h('path', { d: 'M8 18h.01' })),
            mapPin: (props = {}) => h('svg', { xmlns: 'http://www.w3.org/2000/svg', width: props.size || 24, height: props.size || 24, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2, strokeLinecap: 'round', strokeLinejoin: 'round', className: props.className || '' }, h('path', { d: 'M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0' }), h('circle', { cx: 12, cy: 10, r: 3 })),
            mail: (props = {}) => h('svg', { xmlns: 'http://www.w3.org/2000/svg', width: props.size || 24, height: props.size || 24, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2, strokeLinecap: 'round', strokeLinejoin: 'round', className: props.className || '' }, h('rect', { x: 2, y: 4, width: 20, height: 16, rx: 2 }), h('path', { d: 'm22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7' })),
            headphones: (props = {}) => h('svg', { xmlns: 'http://www.w3.org/2000/svg', width: props.size || 24, height: props.size || 24, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2, strokeLinecap: 'round', strokeLinejoin: 'round', className: props.className || '' }, h('path', { d: 'M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3' })),
            send: (props = {}) => h('svg', { xmlns: 'http://www.w3.org/2000/svg', width: props.size || 24, height: props.size || 24, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2, strokeLinecap: 'round', strokeLinejoin: 'round', className: props.className || '' }, h('path', { d: 'm22 2-7 20-4-9-9-4Z' }), h('path', { d: 'M22 2 11 13' })),
            camera: (props = {}) => h('svg', { xmlns: 'http://www.w3.org/2000/svg', width: props.size || 24, height: props.size || 24, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2, strokeLinecap: 'round', strokeLinejoin: 'round', className: props.className || '' }, h('path', { d: 'M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z' }), h('circle', { cx: 12, cy: 13, r: 3 })),
            microscope: (props = {}) => h('svg', { xmlns: 'http://www.w3.org/2000/svg', width: props.size || 24, height: props.size || 24, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2, strokeLinecap: 'round', strokeLinejoin: 'round', className: props.className || '' }, h('path', { d: 'M6 18h8' }), h('path', { d: 'M3 22h18' }), h('path', { d: 'M14 22a7 7 0 1 0 0-14h-1' }), h('path', { d: 'M9 14h2' }), h('path', { d: 'M9 12a2 2 0 0 1-2-2V6h6v4a2 2 0 0 1-2 2Z' }), h('path', { d: 'M12 6V3a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v3' })),
            lock: (props = {}) => h('svg', { xmlns: 'http://www.w3.org/2000/svg', width: props.size || 24, height: props.size || 24, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2, strokeLinecap: 'round', strokeLinejoin: 'round', className: props.className || '' }, h('rect', { x: 5, y: 11, width: 14, height: 10, rx: 2, ry: 2 }), h('path', { d: 'M7 11V7a5 5 0 0 1 10 0v4' })),
            unlock: (props = {}) => h('svg', { xmlns: 'http://www.w3.org/2000/svg', width: props.size || 24, height: props.size || 24, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2, strokeLinecap: 'round', strokeLinejoin: 'round', className: props.className || '' }, h('rect', { x: 5, y: 11, width: 14, height: 10, rx: 2, ry: 2 }), h('path', { d: 'M7 11V7a5 5 0 0 1 9.9-1' }))
        };
        
        // Translation helper with fallback ‚Äî toate cheile folosite √Æn app (RO fallback)
        const fallbacks = {
            'booking.errors.nameRequired': 'Numele este obligatoriu (min. 2 caractere)',
            'booking.errors.phone': 'Introduce»õi un numƒÉr de telefon valid',
            'booking.errors.phoneInvalid': 'Telefonul este invalid',
            'booking.errors.deviceRequired': 'Selecta»õi dispozitivul',
            'booking.errors.submitError': 'Eroare la trimitere. Contacta»õi-ne pe Telegram: @nexx_support',
            'booking.errors.timeout': 'Timpul a expirat. Verifica»õi conexiunea la internet »ôi √Æncerca»õi din nou.',
            'booking.success': 'Mul»õumim! Te vom suna √Æn cur√¢nd',
            'booking.success.title': 'Cerere trimisƒÉ!',
            'booking.success.message': 'Te vom suna √Æn cur√¢nd',
            'booking.success.newRequest': 'Cerere nouƒÉ',
            'booking.title': 'ComandƒÉ repara»õie',
            'booking.subtitle': 'LasƒÉ o cerere - te sunƒÉm √Æn 5 minute',
            'booking.form.name': 'Numele tƒÉu',
            'booking.form.phone': 'Telefon',
            'booking.form.namePlaceholder': 'Alexandru',
            'booking.form.phonePlaceholder': '+40 XXX XXX XXX',
            'booking.form.device': 'Dispozitiv',
            'booking.form.devicePlaceholder': 'Alege dispozitivul',
            'booking.form.problem': 'Descriere problemƒÉ',
            'booking.form.problemPlaceholder': 'Nu se √ÆncarcƒÉ, ecran spart...',
            'booking.form.submit': 'Trimite cererea',
            'booking.form.submitting': 'Trimitere...',
            'buttons.freeLabel': 'üéÅ GRATUIT',
            'buttons.callBack': 'SunƒÉ-mƒÉ √Ænapoi',
            'buttons.freeDiagnostic': 'Diagnostic gratuit inclus!',
            'buttons.calculate': 'CalculeazƒÉ pre»õul',
            'nav.calculator': 'Calculator',
            'nav.home': 'AcasƒÉ',
            'nav.services': 'Servicii',
            'nav.contacts': 'Contacte',
            'callback.title': 'SunƒÉ-mƒÉ √Ænapoi',
            'callback.aiCalls': 'ü§ñ AI vƒÉ sunƒÉ √Æn 10 secunde!',
            'callback.bonus': 'üéÅ Bonus: Diagnostic GRATUIT pentru comenzile online!',
            'callback.phone': 'Telefon *',
            'callback.name': 'Nume',
            'callback.device': 'Dispozitiv',
            'callback.problem': 'ProblemƒÉ',
            'callback.sending': 'Se trimite...',
            'callback.submit': 'Trimite cererea',
            'callback.orCall': 'sau suna»õi direct: ',
            'callback.orContact': 'Sau scrie»õi-ne pe ',
            'callback.thanks': 'Mul»õumim!',
            'callback.callingNow': 'üìû AI vƒÉ sunƒÉ acum...',
            'callback.confirmDetails': 'Asistentul nostru virtual vƒÉ va contacta √Æn c√¢teva secunde.',
            'callback.freeIncluded': 'üéÅ Diagnostic GRATUIT inclus √Æn comandƒÉ!',
            'callback.close': '√énchide',
            'callback.toastSuccess': 'ü§ñ AI-ul nostru vƒÉ sunƒÉ acum!',
            'services.title': 'Ce reparƒÉm',
            'services.subtitle': 'Apple, Samsung, Xiaomi, Huawei',
            'services.popular': 'Popular',
            'services.items.battery': { title: 'Repara»õii Baterii', desc: '√énlocuire + regenerare acumulatori' },
            'services.items.board': { title: 'Repara»õii PlƒÉci', desc: 'Lipire IC, BGA reballing, reparare piste' },
            'services.items.display': { title: '√énlocuire Display', desc: 'Ecrane originale sau de calitate' },
            'services.items.port': { title: 'Port √éncƒÉrcare', desc: '√énlocuire conector, curƒÉ»õare' },
            'services.items.modular': { title: 'Service Modular', desc: 'CamerƒÉ, speaker, butoane, senzori' },
            'gallery.title': 'Galerie',
            'gallery.subtitle': 'Echipament profesional »ôi tehnicieni certifica»õi',
            'gallery.recentWorks': 'LucrƒÉri Recente',
            'reviews.title': 'Ce spun clien»õii',
            'reviews.subtitle': 'Recenzii verificate de la clien»õii no»ôtri mul»õumi»õi',
            'reviews.count': 'recenzii',
            'reviews.verified': 'Verificat',
            'hero.title': 'Repara»õii iPhone, MacBook, Samsung',
            'hero.subtitle': 'Service Express ‚Ä¢ Garan»õie InclusƒÉ',
            'hero.description': 'Service profesional Apple, Samsung, Xiaomi, Huawei. Diagnostic gratuit. Piese originale.',
            'whyUs.title': 'De ce NEXX',
            'footer.ariaLabel': 'Sec»õiunea principalƒÉ',
            'footer.skipToContent': 'Treci la con»õinut',
            'footer.tagline': 'Service profesional multibrand. Bucure»ôti.',
            'footer.company': 'Companie',
            'footer.about': 'Despre noi',
            'footer.jobs': 'Joburi',
            'footer.services': 'Servicii',
            'footer.servicePhone': 'Repara»õii telefoane',
            'footer.serviceLaptop': 'Repara»õii laptopuri',
            'footer.info': 'Informa»õii',
            'footer.faq': 'FAQ',
            'footer.privacy': 'Confiden»õialitate',
            'footer.terms': 'Termeni',
            'footer.copyright': 'NEXX Service Center. Toate drepturile rezervate.',
            'footer.security': 'Site Securizat ‚Ä¢ SSL Criptat',
            'quickActions.serviceMod': 'Service Mod',
            'quickActions.home': 'AcasƒÉ',
            'quickActions.calculator': 'Calculator',
            'quickActions.close': '√énchide',
            'quickActions.quickMenu': 'Meniu rapid',
            'serviceMod.enterPin': 'Introduce»õi PIN-ul pentru acces',
            'serviceMod.checking': 'Verificare...',
            'serviceMod.access': 'AcceseazƒÉ',
            'serviceMod.restricted': 'üîí Acces restric»õionat pentru personal autorizat',
            'calculator.title': 'Cost aproximativ repara»õie',
            'calculator.otherBrands': 'Alte mƒÉrci',
            'pwa.installTitle': 'NEXX GSM',
            'pwa.installSubtitle': 'AdaugƒÉ pe ecranul principal',
            'pwa.installButton': 'AdaugƒÉ',
            'pwa.installed': 'üéâ NEXX GSM instalat!',
            'trackOrder.title': 'UrmƒÉre»ôte comanda',
            'trackOrder.subtitle': 'Introdu numƒÉrul comenzii pentru a vedea statusul',
            'trackOrder.placeholder': 'Nr. comenzii',
            'trackOrder.button': 'CautƒÉ',
            'trackOrder.loading': 'Se √ÆncarcƒÉ...',
            'trackOrder.notFound': 'ComandƒÉ negƒÉsitƒÉ',
            'trackOrder.status': 'Status',
            'trackOrder.device': 'Dispozitiv',
            'remonlineServices.title': 'Servicii noastre',
            'remonlineServices.subtitle': 'Lista serviciilor din CRM',
            'remonlineServices.loading': 'Se √ÆncarcƒÉ...',
            'remonlineServices.empty': 'Nu sunt servicii √ÆncƒÉrcate.',
            'appointment.title': 'ProgrameazƒÉ o vizitƒÉ',
            'appointment.subtitle': 'LasƒÉ datele »ôi te contactƒÉm pentru o programare',
            'appointment.form.name': 'Nume',
            'appointment.form.phone': 'Telefon',
            'appointment.form.date': 'Data preferatƒÉ',
            'appointment.form.comment': 'Observa»õii',
            'appointment.form.submit': 'Trimite cererea',
            'appointment.form.submitting': 'Se trimite...',
            'appointment.success': 'Cerere trimisƒÉ! Te vom suna pentru confirmare.',
            'appointment.error': 'Eroare la trimitere.',
        };
        
        const humanizeKey = (key) => {
            const last = (key || '').split('.').pop() || key;
            return last.replace(/([a-z])([A-Z])/g, '$1 $2').replace(/^./, s => s.toUpperCase());
        };
        
        const t = (key) => {
            if (!window.i18n || typeof window.i18n.t !== 'function') {
                const fallback = fallbacks[key];
                if (fallback !== undefined) return fallback;
                return humanizeKey(key);
            }
            try {
                const v = window.i18n.t(key);
                if (v === key || v === undefined || v === null) {
                    const fallback = fallbacks[key];
                    if (fallback !== undefined) return fallback;
                    return humanizeKey(key);
                }
                if (Array.isArray(v)) return v;
                if (v && typeof v === 'object' && v !== null) return v;
                if (typeof v === 'string' && v !== key) return v;
                return fallbacks[key] || v || humanizeKey(key);
            } catch (e) {
                console.warn('Translation error for', key, e);
                return fallbacks[key] || humanizeKey(key);
            }
        };
        
        // Safe toast function (works even if ToastContainer not mounted yet)
        const safeToast = (message, type = 'success', duration = 3000) => {
            if (window.showToast) {
                window.showToast(message, type, duration);
            } else {
                // Fallback: console log or alert
                console.log(`[${type.toUpperCase()}] ${message}`);
                // Store for later display when ToastContainer mounts
                if (!window._pendingToasts) window._pendingToasts = [];
                window._pendingToasts.push({ message, type, duration });
            }
        };
        
        // Initialize showToast if ToastContainer will mount it
        if (!window.showToast) {
            window.showToast = safeToast;
        }
        
        // ============================================
        // CALLBACK MODAL - –§–æ—Ä–º–∞ –∑–≤–æ—Ä–æ—Ç–Ω–æ–≥–æ –¥–∑–≤—ñ–Ω–∫–∞
        // ============================================
        
        const CallbackModal = () => {
            const [isOpen, setIsOpen] = React.useState(false);
            const [phone, setPhone] = React.useState('');
            const [name, setName] = React.useState('');
            const [device, setDevice] = React.useState('');
            const [problem, setProblem] = React.useState('');
            const [isLoading, setIsLoading] = React.useState(false);
            const [isSuccess, setIsSuccess] = React.useState(false);
            const [error, setError] = React.useState('');
            // State for language changes
            const [lang, setLang] = React.useState(window.i18n?.getCurrentLanguage()?.code || 'ro');
            
            const resetForm = () => {
                setPhone('');
                setName('');
                setDevice('');
                setProblem('');
                setIsSuccess(false);
                setError('');
            };
            const closeModal = () => {
                setIsOpen(false);
                document.body.style.overflow = '';
                setTimeout(resetForm, 300);
            };
            // Expose open function globally
            React.useEffect(() => {
                window.openCallbackModal = () => setIsOpen(true);
                return () => { delete window.openCallbackModal; };
            }, []);
            // Subscribe to language changes
            React.useEffect(() => {
                if (!window.i18n) return;
                const unsubscribe = window.i18n.subscribe((newLang) => {
                    setLang(newLang);
                });
                return unsubscribe;
            }, []);
            React.useEffect(() => {
                if (!isOpen) {
                    document.body.style.overflow = '';
                    return;
                }
                document.body.style.overflow = 'hidden';
                const onKey = (e) => { if (e.key === 'Escape') closeModal(); };
                window.addEventListener('keydown', onKey);
                return () => {
                    window.removeEventListener('keydown', onKey);
                    document.body.style.overflow = '';
                };
            }, [isOpen]);
            
            const handleSubmit = async (e) => {
                e.preventDefault();
                setIsLoading(true);
                setError('');
                
                try {
                    const response = await fetch('/api/callback', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ phone, name, device, problem })
                    });
                    
                    const data = await response.json();
                    
                    if (data.success) {
                        setIsSuccess(true);
                        window.showToast && window.showToast(t('callback.toastSuccess'), 'success');
                    } else {
                        throw new Error(data.error || 'Eroare la trimitere');
                    }
                } catch (err) {
                    setError(err.message);
                    window.showToast && window.showToast(err.message, 'error');
                } finally {
                    setIsLoading(false);
                }
            };
            
            if (!isOpen) return null;
            
            return h('div', {
                className: 'fixed inset-0 z-[100] flex items-center justify-center p-4',
                style: { pointerEvents: 'auto' }
            },
                h('div', {
                    className: 'absolute inset-0 bg-black/70 backdrop-blur-sm',
                    onClick: closeModal,
                    role: 'button',
                    tabIndex: -1,
                    'aria-label': 'Close',
                    style: { pointerEvents: 'auto' }
                }),
                h('div', {
                    className: 'relative bg-gray-900 rounded-3xl p-6 md:p-8 w-full max-w-md shadow-2xl border border-gray-700 animate-scale-in',
                    onClick: (e) => e.stopPropagation()
                },
                    // Close button
                    h('button', {
                        onClick: closeModal,
                        className: 'absolute top-4 right-4 w-10 h-10 flex items-center justify-center text-gray-400 hover:text-white hover:bg-gray-800 rounded-full transition'
                    }, Icons.x({ size: 20, className: 'w-5 h-5' })),
                    
                    isSuccess ? (
                        h('div', { className: 'text-center py-8' },
                            h('div', { className: 'w-20 h-20 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4' },
                                Icons.check({ size: 40, className: 'w-10 h-10 text-white' })
                            ),
                            h('h3', { className: 'text-2xl font-bold text-white mb-2' }, t('callback.thanks')),
                            h('div', { className: 'flex items-center justify-center gap-2 mb-2' },
                                h('div', { className: 'w-3 h-3 bg-green-500 rounded-full animate-pulse' }),
                                h('p', { className: 'text-green-400 font-semibold' }, t('callback.callingNow'))
                            ),
                            h('p', { className: 'text-gray-400 mb-4' }, t('callback.confirmDetails')),
                            h('div', { className: 'bg-yellow-500/20 border border-yellow-500/30 rounded-xl p-3 mb-4' },
                                h('p', { className: 'text-yellow-400 text-sm' }, t('callback.freeIncluded'))
                            ),
                            h('button', {
                                onClick: closeModal,
                                className: 'px-8 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition'
                            }, t('callback.close'))
                        )
                    ) : (
                        // Form
                        h('form', { onSubmit: handleSubmit },
                            h('div', { className: 'text-center mb-6' },
                                h('div', { className: 'relative w-16 h-16 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center mx-auto mb-4' },
                                    Icons.phoneCall({ size: 24, className: 'w-6 h-6 text-white' }),
                                    h('span', { className: 'absolute -top-1 -right-1 w-6 h-6 bg-yellow-400 rounded-full flex items-center justify-center text-xs' }, 'üéÅ')
                                ),
                                h('h3', { className: 'text-2xl font-bold text-white mb-1' }, t('callback.title')),
                                h('p', { className: 'text-gray-400 text-sm' }, t('callback.aiCalls')),
                                h('div', { className: 'mt-3 px-4 py-2 bg-yellow-500/20 border border-yellow-500/30 rounded-xl' },
                                    h('p', { className: 'text-yellow-400 text-sm font-semibold' }, t('callback.bonus'))
                                )
                            ),
                            
                            // Phone field (required)
                            h('div', { className: 'mb-4' },
                                h('label', { className: 'block text-gray-300 text-sm mb-2' }, t('callback.phone')),
                                h('input', {
                                    type: 'tel',
                                    value: phone,
                                    onChange: (e) => setPhone(e.target.value),
                                    placeholder: (t('booking.form.phonePlaceholder') || '+40 7XX XXX XXX'),
                                    required: true,
                                    className: 'w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl text-white placeholder-gray-500 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 outline-none transition'
                                })
                            ),
                            
                            // Name field
                            h('div', { className: 'mb-4' },
                                h('label', { className: 'block text-gray-300 text-sm mb-2' }, t('callback.name')),
                                h('input', {
                                    type: 'text',
                                    value: name,
                                    onChange: (e) => setName(e.target.value),
                                    placeholder: (t('callback.name') || 'Numele dvs.'),
                                    className: 'w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl text-white placeholder-gray-500 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 outline-none transition'
                                })
                            ),
                            
                            // Device field
                            h('div', { className: 'mb-4' },
                                h('label', { className: 'block text-gray-300 text-sm mb-2' }, t('callback.device')),
                                h('input', {
                                    type: 'text',
                                    value: device,
                                    onChange: (e) => setDevice(e.target.value),
                                    placeholder: (t('booking.form.devicePlaceholder') || 'ex: iPhone 14 Pro, Samsung S24'),
                                    className: 'w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl text-white placeholder-gray-500 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 outline-none transition'
                                })
                            ),
                            
                            // Problem field
                            h('div', { className: 'mb-6' },
                                h('label', { className: 'block text-gray-300 text-sm mb-2' }, t('callback.problem')),
                                h('textarea', {
                                    value: problem,
                                    onChange: (e) => setProblem(e.target.value),
                                    placeholder: (t('booking.form.problemPlaceholder') || 'Descrie»õi problema...'),
                                    rows: 2,
                                    className: 'w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl text-white placeholder-gray-500 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 outline-none transition resize-none'
                                })
                            ),
                            
                            // Error message
                            error && h('div', { className: 'mb-4 p-3 bg-red-500/20 border border-red-500/50 rounded-xl text-red-400 text-sm' }, error),
                            
                            // Submit button
                            h('button', {
                                type: 'submit',
                                disabled: isLoading,
                                className: `w-full py-4 ${isLoading ? 'bg-gray-600' : 'bg-green-500 hover:bg-green-600'} text-white rounded-xl font-bold text-lg transition flex items-center justify-center gap-2`
                            },
                                isLoading ? (
                                    h(React.Fragment, null,
                                        Icons.loader({ size: 20 }),
                                        t('callback.sending')
                                    )
                                ) : (
                                    h(React.Fragment, null,
                                        Icons.phone({ size: 20 }),
                                        t('callback.submit')
                                    )
                                )
                            ),
                            
                            // Direct call link
                            h('div', { className: 'mt-4 text-center' },
                                h('span', { className: 'text-gray-500 text-sm' }, t('callback.orContact')),
                                h('a', {
                                    href: 'https://t.me/nexx_support',
                                    target: '_blank',
                                    className: 'text-blue-400 hover:text-blue-300 font-medium'
                                }, 'Telegram')
                            )
                        )
                    )
                )
            );
        };
        
        // ============================================
        // SERVICE MOD AUTH - PIN –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è
        // ============================================
        
        const ServiceModAuth = () => {
            const [isOpen, setIsOpen] = React.useState(false);
            const [pin, setPin] = React.useState('');
            const [error, setError] = React.useState('');
            const [isLoading, setIsLoading] = React.useState(false);
            
            const CORRECT_PIN = '31618585';
            
            React.useEffect(() => {
                window.openServiceModAuth = () => setIsOpen(true);
                return () => { delete window.openServiceModAuth; };
            }, []);
            
            const handleSubmit = (e) => {
                e.preventDefault();
                setIsLoading(true);
                setError('');
                
                setTimeout(() => {
                    if (pin === CORRECT_PIN) {
                        localStorage.setItem('nexx_auth', 'true');
                        localStorage.setItem('nexx_auth_time', Date.now().toString());
                        window.location.href = '/nexx';
                    } else {
                        setError('PIN incorect. √éncerca»õi din nou.');
                        setPin('');
                    }
                    setIsLoading(false);
                }, 500);
            };
            
            const handlePinChange = (e) => {
                const value = e.target.value.replace(/\D/g, '').slice(0, 8);
                setPin(value);
                setError('');
            };
            
            const closeModal = () => {
                setIsOpen(false);
                document.body.style.overflow = '';
                setPin('');
                setError('');
            };
            
            React.useEffect(() => {
                if (!isOpen) {
                    document.body.style.overflow = '';
                    return;
                }
                document.body.style.overflow = 'hidden';
                const onKey = (e) => { if (e.key === 'Escape') closeModal(); };
                window.addEventListener('keydown', onKey);
                return () => {
                    window.removeEventListener('keydown', onKey);
                    document.body.style.overflow = '';
                };
            }, [isOpen]);
            
            if (!isOpen) return null;
            
            return h('div', {
                className: 'fixed inset-0 z-[100] flex items-center justify-center p-4',
                onClick: (e) => e.target === e.currentTarget && closeModal(),
                style: { pointerEvents: 'auto' }
            },
                h('div', { 
                    className: 'absolute inset-0 bg-black/80 backdrop-blur-sm',
                    style: { pointerEvents: 'auto' }
                }),
                h('div', { className: 'relative bg-gray-900 rounded-3xl p-8 w-full max-w-sm shadow-2xl border border-purple-500/30 animate-scale-in' },
                    h('button', {
                        onClick: closeModal,
                        className: 'absolute top-4 right-4 w-10 h-10 flex items-center justify-center text-gray-400 hover:text-white hover:bg-gray-800 rounded-full transition'
                    }, Icons.x({ size: 20 })),
                    
                    h('div', { className: 'text-center mb-6' },
                        h('div', { className: 'w-20 h-20 bg-gradient-to-br from-purple-600 to-indigo-600 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg shadow-purple-500/30' },
                            Icons.lock({ size: 32, className: 'text-white' })
                        ),
                        h('h3', { className: 'text-2xl font-bold text-white mb-2' }, t('quickActions.serviceMod') || 'Service Mod'),
                        h('p', { className: 'text-gray-400 text-sm' }, t('serviceMod.enterPin') || 'Introduce»õi PIN-ul pentru acces')
                    ),
                    
                    h('form', { onSubmit: handleSubmit },
                        h('div', { className: 'mb-6' },
                            h('input', {
                                type: 'password',
                                inputMode: 'numeric',
                                pattern: '[0-9]*',
                                value: pin,
                                onChange: handlePinChange,
                                placeholder: '‚Ä¢ ‚Ä¢ ‚Ä¢ ‚Ä¢',
                                autoFocus: true,
                                className: 'w-full px-6 py-4 bg-gray-800 border-2 border-gray-700 rounded-xl text-white text-center text-3xl tracking-[0.5em] placeholder-gray-600 focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 outline-none transition font-mono'
                            }),
                            error && h('p', { className: 'text-red-400 text-sm mt-2 text-center' }, error)
                        ),
                        
                        h('button', {
                            type: 'submit',
                            disabled: isLoading || pin.length < 4,
                            className: `w-full py-4 ${isLoading || pin.length < 4 ? 'bg-gray-700 cursor-not-allowed' : 'bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700'} text-white rounded-xl font-bold text-lg transition flex items-center justify-center gap-2 shadow-lg`
                        },
                            isLoading ? Icons.loader({ size: 20 }) : Icons.unlock({ size: 20 }),
                            isLoading ? (t('serviceMod.checking') || 'Verificare...') : (t('serviceMod.access') || 'AcceseazƒÉ')
                        )
                    ),
                    
                    h('p', { className: 'text-gray-500 text-xs text-center mt-4' }, 
                        t('serviceMod.restricted') || 'üîí Acces restric»õionat pentru personal autorizat'
                    )
                )
            );
        };
        
        // ============================================
        // HERO - –î–ª—è –∫–ª—ñ—î–Ω—Ç—ñ–≤
        // ============================================
        
        const Hero = () => h('section', { 
            id: 'main-content',
            className: 'relative min-h-[85vh] flex items-center justify-center hero-bg text-white overflow-hidden pt-24',
            'aria-label': t('footer.ariaLabel')
        },
            // Animated dots background
            h('div', { className: 'absolute inset-0 z-0 opacity-30' },
                Array.from({ length: 30 }).map((_, i) => h('div', {
                    key: i,
                    className: 'absolute w-1 h-1 bg-gray-500 rounded-full',
                    style: {
                        left: `${Math.random() * 100}%`,
                        top: `${Math.random() * 100}%`,
                        animation: `float ${3 + Math.random() * 3}s ease-in-out infinite`,
                        animationDelay: `${Math.random() * 2}s`
                    }
                }))
            ),
            
            h('div', { className: 'relative z-10 max-w-5xl mx-auto px-4 sm:px-6 text-center animate-fade-in w-full', style: { paddingLeft: 'max(1rem, env(safe-area-inset-left, 0))', paddingRight: 'max(1rem, env(safe-area-inset-right, 0))' } },
                h('h1', { className: 'text-4xl sm:text-5xl md:text-7xl font-bold mb-3 md:mb-4 leading-tight' },
                    h('span', { className: 'block' }, t('hero.title')),
                    h('span', { className: 'block mt-1 md:mt-2 text-gray-300 text-3xl sm:text-4xl md:text-5xl' }, 
                        t('hero.subtitle')
                    )
                ),
                
                h('p', { className: 'text-lg sm:text-xl md:text-2xl mb-4 md:mb-6 text-blue-100 max-w-3xl mx-auto' },
                    t('hero.description')
                ),
                
                h('div', { className: 'flex flex-col gap-4 justify-center max-w-md mx-auto w-full px-4' },
                    h('a', {
                        href: '#calculator',
                        className: 'group relative px-8 py-5 md:py-6 bg-gradient-to-r from-blue-600 via-blue-700 to-blue-800 bg-size-200 hover:bg-right text-white text-lg md:text-xl font-bold rounded-2xl shadow-2xl hover:shadow-blue-900/50 transition-all duration-500 active:scale-95 flex items-center justify-center gap-3 overflow-hidden',
                        style: { backgroundSize: '200% 100%', minHeight: '64px' }
                    },
                        h('span', { className: 'relative z-10 text-lg flex items-center gap-2' },
                            Icons.calculator({ size: 20 }),
                            t('buttons.calculate'),
                            h('span', { className: 'transition-transform group-hover:translate-x-1' }, Icons.arrowRight({ size: 16 }))
                        )
                    ),
                    h('button', {
                        onClick: () => window.openCallbackModal && window.openCallbackModal(),
                        className: 'relative px-8 py-5 md:py-6 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 border-2 border-green-400 text-white text-lg md:text-xl font-bold rounded-2xl transition-all active:scale-95 flex items-center justify-center gap-3 shadow-lg shadow-green-500/30 group',
                        style: { minHeight: '64px' }
                    },
                        // Bonus badge
                        h('span', { 
                            className: 'absolute -top-3 -right-2 bg-yellow-400 text-yellow-900 text-xs font-bold px-2 py-1 rounded-full animate-pulse shadow-lg z-10'
                        }, t('buttons.freeLabel')),
                        Icons.phoneCall({ size: 24, className: 'group-hover:animate-bounce flex-shrink-0' }),
                        h('span', { className: 'text-center' },
                            h('span', { className: 'block' }, t('buttons.callBack'))
                        )
                    )
                )
            )
        );
        
        // ============================================
        // SERVICES - –ü—Ä–æ—Å—Ç—ñ—à–µ –¥–ª—è –∫–ª—ñ—î–Ω—Ç—ñ–≤
        // ============================================
        
        const Services = () => {
            // State for carousel
            const [activeCardIndex, setActiveCardIndex] = React.useState({});
            // State for language changes
            const [lang, setLang] = React.useState(window.i18n?.getCurrentLanguage()?.code || 'ro');
            
            // Subscribe to language changes
            React.useEffect(() => {
                if (!window.i18n) return;
                const unsubscribe = window.i18n.subscribe((newLang) => {
                    setLang(newLang);
                });
                return unsubscribe;
            }, []);
            
            // Dynamic services with translations and multiple sub-services
            const getServices = () => {
                const battery = t('services.items.battery') || {};
                const board = t('services.items.board') || {};
                const display = t('services.items.display') || {};
                const port = t('services.items.port') || {};
                const modular = t('services.items.modular') || {};
                
                return [
                    { 
                        icon: 'battery',
                        title: battery.title || 'Repara»õii Baterii',
                        popular: true,
                        subServices: (battery.subServices && Array.isArray(battery.subServices)) ? battery.subServices : [
                            { name: 'iPhone 12-16', price: '150-250 lei', time: '30 min' },
                            { name: 'iPhone SE/11', price: '100-150 lei', time: '30 min' },
                            { name: 'Samsung S/Note', price: '120-200 lei', time: '45 min' },
                            { name: 'MacBook Pro', price: '400-700 lei', time: '1-2 ore' },
                            { name: 'iPad', price: '200-350 lei', time: '1 orƒÉ' }
                        ],
                        specs: (Array.isArray(t('services.specs.battery')) ? t('services.specs.battery') : ['Baterii originale', 'Garan»õie 12 luni', 'Test capacitate', 'Calibrare BMS', 'Calitate premium', 'Regenerare celule'])
                    },
                    { 
                        icon: 'cpu',
                        title: board.title || 'Repara»õii PlƒÉci',
                        subServices: (board.subServices && Array.isArray(board.subServices)) ? board.subServices : [
                            { name: 'Reballing CPU/GPU', price: '300-600 lei', time: '2-4 ore' },
                            { name: 'Reparare piste', price: '150-400 lei', time: '1-3 ore' },
                            { name: '√énlocuire IC', price: '200-500 lei', time: '1-2 ore' },
                            { name: 'Deteriorare apƒÉ', price: '250-700 lei', time: '2-8 ore' },
                            { name: 'Diagnostic avansat', price: '50-100 lei', time: '30 min' }
                        ],
                        specs: (Array.isArray(t('services.specs.board')) ? t('services.specs.board') : ['Microscop 45x', 'BGA reballing', 'Lipire IC', 'Diagnostic', 'Sta»õie profesionalƒÉ', 'Componente originale'])
                    },
                    { 
                        icon: 'monitor',
                        title: display.title || '√énlocuire Display',
                        subServices: (display.subServices && Array.isArray(display.subServices)) ? display.subServices : [
                            { name: 'iPhone 14-16 OLED', price: '450-900 lei', time: '45 min' },
                            { name: 'iPhone 12/13 OLED', price: '300-550 lei', time: '45 min' },
                            { name: 'Samsung AMOLED', price: '350-800 lei', time: '1 orƒÉ' },
                            { name: 'MacBook Retina', price: '1200-2500 lei', time: '2-3 ore' },
                            { name: 'iPad Display', price: '400-900 lei', time: '1-2 ore' }
                        ],
                        specs: (Array.isArray(t('services.specs.display')) ? t('services.specs.display') : ['OLED Original', 'LCD Premium', 'Garan»õie dead pixel', 'Touchscreen', 'Laminare', 'Calibrare True Tone'])
                    },
                    { 
                        icon: 'plug',
                        title: port.title || 'Port √éncƒÉrcare',
                        subServices: (port.subServices && Array.isArray(port.subServices)) ? port.subServices : [
                            { name: 'iPhone Lightning', price: '100-180 lei', time: '30-45 min' },
                            { name: 'iPhone USB-C', price: '150-250 lei', time: '45 min' },
                            { name: 'Samsung USB-C', price: '80-150 lei', time: '30 min' },
                            { name: 'MacBook USB-C', price: '200-400 lei', time: '1-2 ore' },
                            { name: 'CurƒÉ»õare oxidare', price: '30-60 lei', time: '15 min' }
                        ],
                        specs: (Array.isArray(t('services.specs.port')) ? t('services.specs.port') : ['Conectori originali', 'CurƒÉ»õare profesionalƒÉ', 'Test √ÆncƒÉrcare', 'Reparare piste', 'Flex cablu nou', 'Garan»õie 6 luni'])
                    },
                    { 
                        icon: 'wrench',
                        title: modular.title || 'Service Modular',
                        subServices: (modular.subServices && Array.isArray(modular.subServices)) ? modular.subServices : [
                            { name: 'CamerƒÉ principalƒÉ', price: '150-400 lei', time: '30-60 min' },
                            { name: 'CamerƒÉ frontalƒÉ', price: '80-200 lei', time: '30 min' },
                            { name: 'Speaker/Microfon', price: '60-150 lei', time: '20-40 min' },
                            { name: 'Butoane/Senzori', price: '80-200 lei', time: '30-60 min' },
                            { name: 'Face ID/Touch ID', price: '200-500 lei', time: '1 orƒÉ' }
                        ],
                        specs: (Array.isArray(t('services.specs.modular')) ? t('services.specs.modular') : ['Module originale', 'CamerƒÉ HD test', 'Audio calibrare', 'Senzori verifica»õi', 'Face ID repair', 'Touch ID pairing'])
                    },
                    { 
                        icon: 'images',
                        title: (t('gallery.recentWorks') || 'LucrƒÉri Recente'),
                        isGallery: true,
                        featured: true,
                        works: (() => {
                            const g = (typeof t('gallery.works') === 'object' && t('gallery.works')) || {};
                            const r = (typeof t('gallery.results') === 'object' && t('gallery.results')) || {};
                            return [
                                { device: 'iPhone 15 Pro Max', repair: g.displayOLED || '√énlocuire display OLED', result: r.likeNew || 'Ca nou' },
                                { device: 'MacBook Pro M3', repair: g.boardWater || 'Repara»õie placƒÉ - deteriorare apƒÉ', result: r.functional || 'Func»õional 100%' },
                                { device: 'Samsung S24 Ultra', repair: g.reballingDisplay || 'Reballing CPU + display', result: r.satisfied || 'Client mul»õumit' },
                                { device: 'iPad Pro 12.9', repair: g.batteryPort || '√énlocuire baterie + port', result: r.warranty || 'Garan»õie 12 luni' },
                                { device: 'iPhone 14', repair: g.faceIdCamera || 'Face ID + camerƒÉ', result: r.repaired || 'Reparat √Æn 2 ore' }
                            ];
                        })()
                    }
                ];
            };
            
            // Recalculate services when language changes
            const services = React.useMemo(() => {
                // Force re-evaluation - get fresh translations
                return getServices();
            }, [lang]);
            
            // Initialize card indices
            React.useEffect(() => {
                const initial = {};
                services.forEach((_, idx) => { initial[idx] = 0; });
                setActiveCardIndex(initial);
            }, [services]);
            
            const nextSlide = (idx, maxLen) => {
                setActiveCardIndex(prev => ({
                    ...prev,
                    [idx]: (prev[idx] + 1) % maxLen
                }));
            };
            
            const prevSlide = (idx, maxLen) => {
                setActiveCardIndex(prev => ({
                    ...prev,
                    [idx]: (prev[idx] - 1 + maxLen) % maxLen
                }));
            };
            
            return h('section', { id: 'services', className: 'py-8 md:py-12 px-4 bg-gray-900' },
                h('div', { className: 'max-w-7xl mx-auto' },
                    h('div', { className: 'text-center mb-8' },
                        h('h2', { className: 'text-4xl md:text-5xl font-bold mb-4 text-white' }, 
                            t('services.title')
                        ),
                        h('p', { className: 'text-gray-400 text-lg' }, 
                            t('services.subtitle')
                        )
                    ),
                    
                    h('div', { className: 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6 auto-rows-fr' },
                        ...services.map((service, idx) => {
                            const currentIndex = activeCardIndex[idx] || 0;
                            const items = service.isGallery ? service.works : service.subServices;
                            const currentItem = items ? items[currentIndex] : null;
                            
                            return h('div', {
                                key: idx,
                                className: 'group relative bg-gray-800/50 backdrop-blur-sm border border-gray-700 hover:border-blue-500/50 p-6 rounded-2xl transition-all duration-300 hover:-translate-y-2 hover:shadow-2xl hover:shadow-blue-500/20 overflow-visible flex flex-col h-full min-h-[420px]'
                            },
                                // Gradient hover effect
                                h('div', { 
                                    className: 'absolute inset-0 bg-gradient-to-br from-blue-600/10 via-purple-600/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500 rounded-2xl'
                                }),
                                
                                // Badge
                                (service.popular || service.featured) && h('div', { 
                                    className: `absolute -top-3 right-4 ${service.popular ? 'bg-gradient-to-r from-orange-500 to-red-500' : 'bg-gradient-to-r from-blue-500 to-purple-600'} text-white px-3 py-1 rounded-full text-xs font-bold shadow-lg z-20 flex items-center gap-1` 
                                },
                                    h('span', null, service.popular ? 'üî•' : 'üì∏'),
                                    service.popular ? t('services.popular') : t('gallery.title')
                                ),
                                
                                // Header with icon and title
                                h('div', { className: 'flex items-center gap-3 mb-4 relative z-10' },
                                    h('div', { className: 'w-12 h-12 rounded-xl bg-gradient-to-br from-blue-600 to-purple-600 flex items-center justify-center text-white text-xl shadow-lg' },
                                        Icons[service.icon] ? Icons[service.icon]({ size: 24 }) : h('span', null, 'üì¶')
                                    ),
                                    h('h3', { className: 'text-xl font-bold text-white group-hover:text-blue-400 transition-colors' }, 
                                        service.title
                                    )
                                ),
                                
                                // Carousel content
                                service.isGallery ? (
                                    // Gallery card
                                    h('div', { className: 'relative z-10' },
                                        currentItem && h('div', { className: 'bg-gray-700/50 rounded-xl p-4 mb-3 min-h-[100px]' },
                                            h('div', { className: 'flex items-center gap-2 mb-2' },
                                                Icons.smartphone({ size: 16, className: 'text-blue-400' }),
                                                h('span', { className: 'text-white font-semibold text-sm' }, currentItem.device)
                                            ),
                                            h('p', { className: 'text-gray-300 text-sm mb-2' }, currentItem.repair),
                                            h('div', { className: 'flex items-center gap-1 text-green-400 text-xs' },
                                                Icons.checkCircle({ size: 14, className: 'text-green-400' }),
                                                h('span', null, currentItem.result)
                                            )
                                        ),
                                        // Navigation
                                        h('div', { className: 'flex items-center justify-between' },
                                            h('button', {
                                                onClick: () => prevSlide(idx, items.length),
                                                className: 'w-8 h-8 rounded-full bg-gray-700 hover:bg-blue-600 text-white flex items-center justify-center transition-colors'
                                            }, Icons.chevronLeft({ size: 14 })),
                                            h('div', { className: 'flex gap-1' },
                                                ...items.map((_, i) => h('div', {
                                                    key: i,
                                                    className: `w-2 h-2 rounded-full transition-colors ${i === currentIndex ? 'bg-blue-500' : 'bg-gray-600'}`
                                                }))
                                            ),
                                            h('button', {
                                                onClick: () => nextSlide(idx, items.length),
                                                className: 'w-8 h-8 rounded-full bg-gray-700 hover:bg-blue-600 text-white flex items-center justify-center transition-colors'
                                            }, Icons.chevronRight({ size: 14 }))
                                        )
                                    )
                                ) : (
                                    // Service card with sub-services
                                    h('div', { className: 'relative z-10' },
                                        // Current sub-service
                                        currentItem && h('div', { className: 'bg-gray-700/50 rounded-xl p-4 mb-3' },
                                            h('div', { className: 'flex justify-between items-start mb-2' },
                                                h('span', { className: 'text-white font-medium text-sm' }, currentItem.name),
                                                h('span', { className: 'text-blue-400 font-bold text-sm' }, currentItem.price)
                                            ),
                                            h('div', { className: 'flex items-center gap-1 text-gray-400 text-xs' },
                                                Icons.clock({ size: 14 }),
                                                h('span', null, currentItem.time)
                                            )
                                        ),
                                        
                                        // Navigation
                                        h('div', { className: 'flex items-center justify-between mb-4' },
                                            h('button', {
                                                onClick: () => prevSlide(idx, items.length),
                                                className: 'w-8 h-8 rounded-full bg-gray-700 hover:bg-blue-600 text-white flex items-center justify-center transition-colors'
                                            }, Icons.chevronLeft({ size: 14 })),
                                            h('div', { className: 'flex gap-1' },
                                                ...items.map((_, i) => h('div', {
                                                    key: i,
                                                    className: `w-2 h-2 rounded-full transition-colors ${i === currentIndex ? 'bg-blue-500' : 'bg-gray-600'}`
                                                }))
                                            ),
                                            h('button', {
                                                onClick: () => nextSlide(idx, items.length),
                                                className: 'w-8 h-8 rounded-full bg-gray-700 hover:bg-blue-600 text-white flex items-center justify-center transition-colors'
                                            }, Icons.chevronRight({ size: 14 }))
                                        ),
                                        
                                        // Specs in 2 columns
                                        service.specs && h('div', { className: 'grid grid-cols-2 gap-x-2 gap-y-1 pt-3 border-t border-gray-700/50' },
                                            ...service.specs.map((spec, sidx) => h('div', {
                                                key: sidx,
                                                className: 'flex items-center gap-1 text-xs text-gray-400'
                                            },
                                                Icons.check({ size: 10, className: 'text-green-400' }),
                                                h('span', { className: 'truncate' }, spec)
                                            ))
                                        ),
                                        
                                        // CTA Button
                                        h('a', {
                                            href: '#calculator',
                                            className: 'mt-4 w-full py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all hover:shadow-lg flex items-center justify-center gap-2 text-sm'
                                        },
                                            t('buttons.calculate') || 'CalculeazƒÉ pre»õul',
                                            Icons.arrowRight({ size: 12 })
                                        )
                                    )
                                )
                            );
                        })
                    )
                )
            );
        };
        
        // ============================================
        // WHY US - –î–ª—è –∫–ª—ñ—î–Ω—Ç—ñ–≤
        // ============================================
        
        const WhyUs = () => {
            const whyUsData = t('whyUs') || {};
            const features = [
                { 
                    icon: 'smartphone',
                    title: whyUsData.multibrand?.title || 'Multibrand',
                    desc: whyUsData.multibrand?.desc || 'Apple, Samsung, Xiaomi, Huawei »ôi alte mƒÉrci'
                },
                { 
                    icon: 'zap',
                    title: whyUsData.fast?.title || 'Service Express',
                    desc: whyUsData.fast?.desc || 'Repara»õii rapide, fƒÉrƒÉ a»ôteptare'
                },
                { 
                    icon: 'shield',
                    title: whyUsData.warranty?.title || 'Garan»õie InclusƒÉ',
                    desc: whyUsData.warranty?.desc || 'Calitate garantatƒÉ'
                },
                { 
                    icon: 'tag',
                    title: whyUsData.honest?.title || 'Pre»õuri corecte',
                    desc: whyUsData.honest?.desc || 'FƒÉrƒÉ costuri ascunse'
                },
                { 
                    icon: 'wrench',
                    title: whyUsData.original?.title || 'Piese originale',
                    desc: whyUsData.original?.desc || 'Verificate »ôi testate'
                },
                { 
                    icon: 'microscope',
                    title: whyUsData.diagnostic?.title || 'Diagnostic gratuit',
                    desc: whyUsData.diagnostic?.desc || 'Profesional sub microscop'
                },
                { 
                    icon: 'camera',
                    title: whyUsData.transparent?.title || 'Transparent',
                    desc: whyUsData.transparent?.desc || 'Raport foto/video al repara»õiei'
                },
                { 
                    icon: 'headphones',
                    title: whyUsData.support?.title || 'Suport Online',
                    desc: whyUsData.support?.desc || 'Telegram, WhatsApp disponibil'
                }
            ];
            
            return h('section', { className: 'py-12 px-4 bg-gray-950 relative' },
                h('div', { className: 'max-w-7xl mx-auto' },
                    h('div', { className: 'text-center mb-16' },
                        h('h2', { className: 'text-4xl md:text-5xl font-bold mb-4 text-white' }, 
                            t('whyUs.title')
                        ),
                        h('p', { className: 'text-gray-400 text-lg' }, t('hero.description'))
                    ),
                    
                    h('div', { className: 'grid md:grid-cols-2 lg:grid-cols-4 gap-0.5 bg-gray-800/50' },
                        ...features.map((feature, idx) => h('div', {
                            key: idx,
                            className: `group relative bg-gray-900 p-8 hover:bg-gray-800 transition-all duration-300 ${
                                idx === 0 || idx === 4 ? 'lg:border-l border-gray-700' : ''
                            } ${idx < 4 ? 'lg:border-b border-gray-700' : ''} border-r border-gray-700`
                        },
                            // Hover gradient effect
                            h('div', { 
                                className: `absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300 ${
                                    idx < 4 ? 'bg-gradient-to-t' : 'bg-gradient-to-b'
                                } from-blue-900/20 to-transparent pointer-events-none`
                            }),
                            
                            // Icon
                            h('div', { className: 'mb-4 relative z-10' },
                                Icons[feature.icon] ? Icons[feature.icon]({ size: 40, className: 'text-gray-500 group-hover:text-blue-400 transition-colors duration-300' }) : h('span', null, '‚≠ê')
                            ),
                            
                            // Title with animated bar
                            h('div', { className: 'relative mb-3 z-10' },
                                h('div', { className: 'absolute left-0 top-0 bottom-0 w-1 bg-gray-700 group-hover:bg-gray-600 group-hover:w-2 transition-all duration-300 rounded-r' }),
                                h('h3', { className: 'text-lg font-bold pl-4 text-white group-hover:translate-x-2 transition-transform duration-300' },
                                    feature.title
                                )
                            ),
                            
                            // Description
                            h('p', { className: 'text-sm text-gray-400 group-hover:text-gray-300 relative z-10 pl-4 transition-colors duration-300' },
                                feature.desc
                            )
                        ))
                    )
                )
            );
        };
        
        // ============================================
        // GALLERY - –§–æ—Ç–æ —Ä–∞–±–æ—á–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞
        // ============================================
        
        const Gallery = () => {
            const [lang, setLang] = React.useState(window.i18n?.getCurrentLanguage()?.code || 'ro');
            
            React.useEffect(() => {
                if (window.i18n?.subscribe) {
                    return window.i18n.subscribe(() => {
                        setLang(window.i18n.getCurrentLanguage()?.code || 'ro');
                    });
                }
            }, []);
            
            const captions = {
                ro: { battery: '√énlocuire Baterie', screen: '√énlocuire Display', workshop: 'Atelier Profesional', reception: 'Recep»õie Service' },
                en: { battery: 'Battery Replacement', screen: 'Screen Replacement', workshop: 'Professional Workshop', reception: 'Service Reception' },
                ru: { battery: '–ó–∞–º–µ–Ω–∞ –ë–∞—Ç–∞—Ä–µ–∏', screen: '–ó–∞–º–µ–Ω–∞ –î–∏—Å–ø–ª–µ—è', workshop: '–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –ú–∞—Å—Ç–µ—Ä—Å–∫–∞—è', reception: '–†–µ—Å–µ–ø—à–Ω –°–µ—Ä–≤–∏—Å–∞' },
                uk: { battery: '–ó–∞–º—ñ–Ω–∞ –ë–∞—Ç–∞—Ä–µ—ó', screen: '–ó–∞–º—ñ–Ω–∞ –î–∏—Å–ø–ª–µ—è', workshop: '–ü—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∞ –ú–∞–π—Å—Ç–µ—Ä–Ω—è', reception: '–†–µ—Å–µ–ø—à–Ω –°–µ—Ä–≤—ñ—Å—É' }
            };
            const cap = captions[lang] || captions.ro;
            
            const photos = [
                {
                    src: '/images/screen-replacement.png',
                    alt: cap.screen,
                    title: cap.screen,
                    featured: true
                },
                {
                    src: '/images/battery-replacement.png',
                    alt: cap.battery,
                    title: cap.battery
                },
                {
                    src: '/images/service-center-shop.png',
                    alt: cap.workshop,
                    title: cap.workshop
                },
                {
                    src: '/images/workspace.png',
                    alt: cap.reception,
                    title: cap.reception
                }
            ];
            
            return h('section', { className: 'py-12 px-4 bg-gradient-to-br from-gray-900 to-black' },
                h('div', { className: 'max-w-7xl mx-auto' },
                    // Header
                    h('div', { className: 'text-center mb-12' },
                        h('h2', { className: 'text-4xl md:text-5xl font-bold mb-4 text-white' }, 
                            t('gallery.title')
                        ),
                        h('p', { className: 'text-gray-400 text-lg' }, 
                            t('gallery.subtitle')
                        )
                    ),
                    
                    // Photo Grid
                    h('div', { className: 'grid md:grid-cols-2 gap-6' },
                        ...photos.map((photo, idx) => h('div', {
                            key: idx,
                            className: `group relative overflow-hidden rounded-2xl border border-gray-800 hover:border-gray-600 transition-all duration-300 hover:scale-105 hover:shadow-2xl hover:shadow-blue-500/20 ${photo.featured ? 'md:col-span-2' : ''}`
                        },
                            // Image
                            h('div', { className: 'aspect-[4/3] overflow-hidden bg-gray-800' },
                                h('img', {
                                    src: photo.src,
                                    alt: photo.alt,
                                    className: 'w-full h-full object-cover group-hover:scale-110 transition-transform duration-500',
                                    loading: 'lazy'
                                })
                            ),
                            
                            // Overlay with title
                            h('div', { className: 'absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-end' },
                                h('div', { className: 'p-6 w-full' },
                                    h('p', { className: 'text-white font-medium text-lg' }, photo.title)
                                )
                            )
                        ))
                    )
                )
            );
        };
        
        // ============================================
        // REVIEWS - Customer Reviews Section
        // ============================================
        
        const Reviews = () => {
            const [lang, setLang] = React.useState(window.i18n?.getCurrentLanguage()?.code || 'ro');
            
            React.useEffect(() => {
                if (window.i18n?.subscribe) {
                    return window.i18n.subscribe(() => {
                        setLang(window.i18n.getCurrentLanguage()?.code || 'ro');
                    });
                }
            }, []);
            
            const reviews = React.useMemo(() => {
                const reviewsData = {
                    ro: [
                        { name: 'Alexandru M.', rating: 5, text: 'Serviciu excelent! Mi-au reparat iPhone-ul √Æn mai pu»õin de o orƒÉ. Display nou OLED, calitate perfectƒÉ. Recomand!', device: 'iPhone 14 Pro', service: '√énlocuire Display' },
                        { name: 'Maria P.', rating: 5, text: 'Am adus MacBook-ul cu problemƒÉ la placƒÉ dupƒÉ contactul cu apa. L-au salvat! Func»õioneazƒÉ ca nou. EchipƒÉ profesionistƒÉ.', device: 'MacBook Pro M1', service: 'Repara»õie PlacƒÉ' },
                        { name: 'Ion V.', rating: 5, text: 'Bateria Samsung-ului meu se descƒÉrca √Æn 2 ore. Acum »õine toatƒÉ ziua! Pre»õ corect »ôi garan»õie 12 luni. Mul»õumesc!', device: 'Samsung S23', service: '√énlocuire Baterie' },
                        { name: 'Elena D.', rating: 5, text: 'Portul de √ÆncƒÉrcare nu func»õiona deloc. Reparat √Æn 30 de minute! Foarte rapid »ôi profesionist.', device: 'iPhone 13', service: 'Port √éncƒÉrcare' },
                        { name: 'Andrei C.', rating: 5, text: 'Camera iPhone-ului avea probleme de focus. Au schimbat modulul »ôi acum face poze perfecte. Super!', device: 'iPhone 15', service: 'CamerƒÉ' },
                        { name: 'Diana S.', rating: 5, text: 'Cel mai bun service din Bucure»ôti! Personal amabil, pre»õuri corecte, muncƒÉ de calitate. Voi reveni!', device: 'iPad Pro', service: 'Display + Baterie' }
                    ],
                    en: [
                        { name: 'Alexandru M.', rating: 5, text: 'Excellent service! They repaired my iPhone in less than an hour. New OLED display, perfect quality. Highly recommend!', device: 'iPhone 14 Pro', service: 'Display Replacement' },
                        { name: 'Maria P.', rating: 5, text: 'Brought my MacBook with water damage issue. They saved it! Works like new. Professional team.', device: 'MacBook Pro M1', service: 'Board Repair' },
                        { name: 'Ion V.', rating: 5, text: 'My Samsung battery was dying in 2 hours. Now it lasts all day! Fair price and 12-month warranty. Thanks!', device: 'Samsung S23', service: 'Battery Replacement' },
                        { name: 'Elena D.', rating: 5, text: 'Charging port was completely dead. Fixed in 30 minutes! Very fast and professional.', device: 'iPhone 13', service: 'Charging Port' },
                        { name: 'Andrei C.', rating: 5, text: 'iPhone camera had focus issues. They replaced the module and now it takes perfect photos. Amazing!', device: 'iPhone 15', service: 'Camera' },
                        { name: 'Diana S.', rating: 5, text: 'Best service in Bucharest! Friendly staff, fair prices, quality work. Will return!', device: 'iPad Pro', service: 'Display + Battery' }
                    ],
                    ru: [
                        { name: '–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ú.', rating: 5, text: '–û—Ç–ª–∏—á–Ω—ã–π —Å–µ—Ä–≤–∏—Å! –û—Ç—Ä–µ–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–ª–∏ iPhone –º–µ–Ω—å—à–µ —á–µ–º –∑–∞ —á–∞—Å. –ù–æ–≤—ã–π OLED –¥–∏—Å–ø–ª–µ–π, –∏–¥–µ–∞–ª—å–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ. –†–µ–∫–æ–º–µ–Ω–¥—É—é!', device: 'iPhone 14 Pro', service: '–ó–∞–º–µ–Ω–∞ –¥–∏—Å–ø–ª–µ—è' },
                        { name: '–ú–∞—Ä–∏—è –ü.', rating: 5, text: '–ü—Ä–∏–Ω–µ—Å–ª–∞ MacBook —Å –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–µ–º –æ—Ç –≤–æ–¥—ã. –°–ø–∞—Å–ª–∏! –†–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –Ω–æ–≤—ã–π. –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞.', device: 'MacBook Pro M1', service: '–†–µ–º–æ–Ω—Ç –ø–ª–∞—Ç—ã' },
                        { name: '–ò–≤–∞–Ω –í.', rating: 5, text: '–ë–∞—Ç–∞—Ä–µ—è Samsung —Å–∞–¥–∏–ª–∞—Å—å –∑–∞ 2 —á–∞—Å–∞. –¢–µ–ø–µ—Ä—å –¥–µ—Ä–∂–∏—Ç –≤–µ—Å—å –¥–µ–Ω—å! –ß–µ—Å—Ç–Ω–∞—è —Ü–µ–Ω–∞ –∏ –≥–∞—Ä–∞–Ω—Ç–∏—è 12 –º–µ—Å—è—Ü–µ–≤. –°–ø–∞—Å–∏–±–æ!', device: 'Samsung S23', service: '–ó–∞–º–µ–Ω–∞ –±–∞—Ç–∞—Ä–µ–∏' },
                        { name: '–ï–ª–µ–Ω–∞ –î.', rating: 5, text: '–ü–æ—Ä—Ç –∑–∞—Ä—è–¥–∫–∏ –≤–æ–æ–±—â–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª. –ü–æ—á–∏–Ω–∏–ª–∏ –∑–∞ 30 –º–∏–Ω—É—Ç! –û—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ –∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ.', device: 'iPhone 13', service: '–ü–æ—Ä—Ç –∑–∞—Ä—è–¥–∫–∏' },
                        { name: '–ê–Ω–¥—Ä–µ–π –°.', rating: 5, text: '–ö–∞–º–µ—Ä–∞ iPhone –Ω–µ —Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞–ª–∞—Å—å. –ó–∞–º–µ–Ω–∏–ª–∏ –º–æ–¥—É–ª—å - —Ç–µ–ø–µ—Ä—å —Ñ–æ—Ç–æ –∏–¥–µ–∞–ª—å–Ω—ã–µ. –°—É–ø–µ—Ä!', device: 'iPhone 15', service: '–ö–∞–º–µ—Ä–∞' },
                        { name: '–î–∏–∞–Ω–∞ –°.', rating: 5, text: '–õ—É—á—à–∏–π —Å–µ—Ä–≤–∏—Å –≤ –ë—É—Ö–∞—Ä–µ—Å—Ç–µ! –ü—Ä–∏–≤–µ—Ç–ª–∏–≤—ã–π –ø–µ—Ä—Å–æ–Ω–∞–ª, —á–µ—Å—Ç–Ω—ã–µ —Ü–µ–Ω—ã, –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞. –í–µ—Ä–Ω—É—Å—å!', device: 'iPad Pro', service: '–î–∏—Å–ø–ª–µ–π + –ë–∞—Ç–∞—Ä–µ—è' }
                    ],
                    uk: [
                        { name: '–û–ª–µ–∫—Å–∞–Ω–¥—Ä –ú.', rating: 5, text: '–ß—É–¥–æ–≤–∏–π —Å–µ—Ä–≤—ñ—Å! –í—ñ–¥—Ä–µ–º–æ–Ω—Ç—É–≤–∞–ª–∏ iPhone –º–µ–Ω—à–µ –Ω—ñ–∂ –∑–∞ –≥–æ–¥–∏–Ω—É. –ù–æ–≤–∏–π OLED –¥–∏—Å–ø–ª–µ–π, —ñ–¥–µ–∞–ª—å–Ω–∞ —è–∫—ñ—Å—Ç—å. –†–µ–∫–æ–º–µ–Ω–¥—É—é!', device: 'iPhone 14 Pro', service: '–ó–∞–º—ñ–Ω–∞ –¥–∏—Å–ø–ª–µ—è' },
                        { name: '–ú–∞—Ä—ñ—è –ü.', rating: 5, text: '–ü—Ä–∏–Ω–µ—Å–ª–∞ MacBook –∑ –ø–æ—à–∫–æ–¥–∂–µ–Ω–Ω—è–º –≤—ñ–¥ –≤–æ–¥–∏. –í—Ä—è—Ç—É–≤–∞–ª–∏! –ü—Ä–∞—Ü—é—î —è–∫ –Ω–æ–≤–∏–π. –ü—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∞ –∫–æ–º–∞–Ω–¥–∞.', device: 'MacBook Pro M1', service: '–†–µ–º–æ–Ω—Ç –ø–ª–∞—Ç–∏' },
                        { name: '–Ü–≤–∞–Ω –í.', rating: 5, text: '–ë–∞—Ç–∞—Ä–µ—è Samsung —Å—ñ–¥–∞–ª–∞ –∑–∞ 2 –≥–æ–¥–∏–Ω–∏. –¢–µ–ø–µ—Ä —Ç—Ä–∏–º–∞—î –≤–µ—Å—å –¥–µ–Ω—å! –ß–µ—Å–Ω–∞ —Ü—ñ–Ω–∞ —ñ –≥–∞—Ä–∞–Ω—Ç—ñ—è 12 –º—ñ—Å—è—Ü—ñ–≤. –î—è–∫—É—é!', device: 'Samsung S23', service: '–ó–∞–º—ñ–Ω–∞ –±–∞—Ç–∞—Ä–µ—ó' },
                        { name: '–û–ª–µ–Ω–∞ –î.', rating: 5, text: '–ü–æ—Ä—Ç –∑–∞—Ä—è–¥–∫–∏ –≤–∑–∞–≥–∞–ª—ñ –Ω–µ –ø—Ä–∞—Ü—é–≤–∞–≤. –ü–æ–ª–∞–≥–æ–¥–∏–ª–∏ –∑–∞ 30 —Ö–≤–∏–ª–∏–Ω! –î—É–∂–µ —à–≤–∏–¥–∫–æ —ñ –ø—Ä–æ—Ñ–µ—Å—ñ–π–Ω–æ.', device: 'iPhone 13', service: '–ü–æ—Ä—Ç –∑–∞—Ä—è–¥–∫–∏' },
                        { name: '–ê–Ω–¥—Ä—ñ–π –°.', rating: 5, text: '–ö–∞–º–µ—Ä–∞ iPhone –Ω–µ —Ñ–æ–∫—É—Å—É–≤–∞–ª–∞—Å—å. –ó–∞–º—ñ–Ω–∏–ª–∏ –º–æ–¥—É–ª—å - —Ç–µ–ø–µ—Ä —Ñ–æ—Ç–æ —ñ–¥–µ–∞–ª—å–Ω—ñ. –°—É–ø–µ—Ä!', device: 'iPhone 15', service: '–ö–∞–º–µ—Ä–∞' },
                        { name: '–î—ñ–∞–Ω–∞ –°.', rating: 5, text: '–ù–∞–π–∫—Ä–∞—â–∏–π —Å–µ—Ä–≤—ñ—Å —É –ë—É—Ö–∞—Ä–µ—Å—Ç—ñ! –ü—Ä–∏–≤—ñ—Ç–Ω–∏–π –ø–µ—Ä—Å–æ–Ω–∞–ª, —á–µ—Å–Ω—ñ —Ü—ñ–Ω–∏, —è–∫—ñ—Å–Ω–∞ —Ä–æ–±–æ—Ç–∞. –ü–æ–≤–µ—Ä–Ω—É—Å—å!', device: 'iPad Pro', service: '–î–∏—Å–ø–ª–µ–π + –ë–∞—Ç–∞—Ä–µ—è' }
                    ]
                };
                return reviewsData[lang] || reviewsData.ro;
            }, [lang]);
            
            return h('section', { id: 'reviews', className: 'py-16 px-4 bg-gradient-to-br from-gray-950 via-gray-900 to-gray-950' },
                h('div', { className: 'max-w-7xl mx-auto' },
                    // Header
                    h('div', { className: 'text-center mb-12' },
                        h('h2', { className: 'text-4xl md:text-5xl font-bold mb-4 text-white' }, t('reviews.title')),
                        h('p', { className: 'text-gray-400 text-lg' }, t('reviews.subtitle')),
                        // Rating summary
                        h('div', { className: 'flex items-center justify-center gap-2 mt-4' },
                            h('div', { className: 'flex' },
                                ...Array(5).fill(0).map((_, i) => h('span', { key: i, className: 'text-yellow-400 text-2xl' }, '‚òÖ'))
                            ),
                            h('span', { className: 'text-white font-bold text-xl ml-2' }, '5.0'),
                            h('span', { className: 'text-gray-400' }, `(${reviews.length} ${t('reviews.count')})`)
                        )
                    ),
                    
                    // Reviews Grid
                    h('div', { className: 'grid md:grid-cols-2 lg:grid-cols-3 gap-6' },
                        ...reviews.map((review, idx) => h('div', {
                            key: idx,
                            className: 'group relative bg-gray-800/50 backdrop-blur-sm border border-gray-700 hover:border-blue-500/50 p-6 rounded-2xl transition-all duration-300 hover:-translate-y-1 hover:shadow-xl hover:shadow-blue-500/10'
                        },
                            // Quote icon
                            h('div', { className: 'absolute -top-3 -left-2 text-5xl text-blue-500/20 font-serif' }, '"'),
                            
                            // Stars
                            h('div', { className: 'flex mb-3' },
                                ...Array(review.rating).fill(0).map((_, i) => h('span', { key: i, className: 'text-yellow-400' }, '‚òÖ'))
                            ),
                            
                            // Review text
                            h('p', { className: 'text-gray-300 mb-4 leading-relaxed' }, review.text),
                            
                            // Device & Service tags
                            h('div', { className: 'flex flex-wrap gap-2 mb-4' },
                                h('span', { className: 'px-2 py-1 bg-blue-500/20 text-blue-400 text-xs rounded-full' }, review.device),
                                h('span', { className: 'px-2 py-1 bg-purple-500/20 text-purple-400 text-xs rounded-full' }, review.service)
                            ),
                            
                            // Author
                            h('div', { className: 'flex items-center gap-3 pt-4 border-t border-gray-700' },
                                h('div', { className: 'w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold' }, 
                                    review.name.charAt(0)
                                ),
                                h('div', null,
                                    h('p', { className: 'text-white font-medium' }, review.name),
                                    h('p', { className: 'text-gray-500 text-sm' }, '‚úì ' + t('reviews.verified'))
                                )
                            )
                        ))
                    )
                )
            );
        };

        // ============================================
        // TRACK ORDER
        // ============================================
        const TrackOrder = () => {
            const [orderId, setOrderId] = useState('');
            const [loading, setLoading] = useState(false);
            const [order, setOrder] = useState(null);
            const [statuses, setStatuses] = useState([]);
            const [error, setError] = useState(null);
            const handleSearch = async (e) => {
                e.preventDefault();
                const id = (orderId || '').trim();
                if (!id) return;
                setLoading(true); setError(null); setOrder(null);
                try {
                    const [orderRes, statusesRes] = await Promise.all([
                        fetch('/api/remonline?action=get_order&id=' + encodeURIComponent(id)),
                        fetch('/api/remonline?action=get_statuses')
                    ]);
                    const orderJson = await orderRes.json();
                    const statusesJson = await statusesRes.json();
                    const statusList = statusesJson.data || statusesJson || [];
                    setStatuses(Array.isArray(statusList) ? statusList : []);
                    if (orderJson.success && orderJson.data) {
                        setOrder(orderJson.data);
                    } else {
                        setError(t('trackOrder.notFound'));
                    }
                } catch (err) {
                    setError(err.message || t('trackOrder.notFound'));
                }
                setLoading(false);
            };
            const statusName = (id) => {
                if (!id || !statuses.length) return String(id || '‚Äî');
                const s = statuses.find(x => x.id === id || x.id === Number(id));
                return (s && (s.name || s.title)) || String(id);
            };
            return h('section', { id: 'track-order', className: 'py-12 px-4 bg-gray-900/80' },
                h('div', { className: 'max-w-2xl mx-auto' },
                    h('div', { className: 'text-center mb-8' },
                        h('h2', { className: 'text-3xl font-bold text-white mb-2' }, t('trackOrder.title')),
                        h('p', { className: 'text-gray-400' }, t('trackOrder.subtitle'))
                    ),
                    h('form', { onSubmit: handleSearch, className: 'flex flex-wrap gap-3 justify-center mb-6' },
                        h('input', {
                            type: 'text',
                            value: orderId,
                            onChange: (e) => setOrderId(e.target.value),
                            placeholder: t('trackOrder.placeholder'),
                            className: 'flex-1 min-w-[180px] px-4 py-3 bg-gray-800 border border-gray-600 rounded-xl text-white placeholder-gray-400 outline-none focus:border-blue-500'
                        }),
                        h('button', {
                            type: 'submit',
                            disabled: loading,
                            className: 'px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-xl transition disabled:opacity-50 flex items-center gap-2'
                        }, loading ? t('trackOrder.loading') : t('trackOrder.button'))
                    ),
                    error ? h('p', { className: 'text-center text-red-400' }, error) : null,
                    order ? h('div', { className: 'bg-gray-800 border border-gray-700 rounded-2xl p-6' },
                        h('p', { className: 'text-gray-400 mb-1' }, t('trackOrder.device')),
                        h('p', { className: 'text-white font-medium mb-4' }, [order.kindof_good, order.brand, order.model].filter(Boolean).join(' ') || '‚Äî'),
                        h('p', { className: 'text-gray-400 mb-1' }, t('trackOrder.status')),
                        h('p', { className: 'text-white font-semibold' }, statusName(order.status_id))
                    ) : null
                )
            );
        };

        // ============================================
        // REMONLINE SERVICES LIST (no prices)
        // ============================================
        const RemonlineServicesList = () => {
            const [list, setList] = useState([]);
            const [loading, setLoading] = useState(true);
            useEffect(() => {
                fetch('/api/remonline?action=get_services')
                    .then(r => r.json())
                    .then(data => {
                        const arr = data.data || data.services || (Array.isArray(data) ? data : []);
                        setList(Array.isArray(arr) ? arr : []);
                    })
                    .catch(() => setList([]))
                    .finally(() => setLoading(false));
            }, []);
            if (loading) {
                return h('section', { id: 'remonline-services', className: 'py-12 px-4 bg-gray-950' },
                    h('div', { className: 'max-w-4xl mx-auto text-center py-8 text-gray-400' }, t('remonlineServices.loading'))
                );
            }
            if (!list.length) return null;
            const items = list.map((s, i) => {
                const name = s.name || s.title || s.service_name || (typeof s === 'string' ? s : null);
                if (!name) return null;
                return h('div', { key: i, className: 'px-4 py-2 bg-gray-800/50 rounded-lg text-white' }, name);
            }).filter(Boolean);
            return h('section', { id: 'remonline-services', className: 'py-12 px-4 bg-gray-950' },
                h('div', { className: 'max-w-4xl mx-auto' },
                    h('div', { className: 'text-center mb-8' },
                        h('h2', { className: 'text-3xl font-bold text-white mb-2' }, t('remonlineServices.title')),
                        h('p', { className: 'text-gray-400' }, t('remonlineServices.subtitle'))
                    ),
                    h('div', { className: 'grid grid-cols-1 sm:grid-cols-2 gap-3' }, items.length ? items : h('p', { className: 'text-gray-400 col-span-2' }, t('remonlineServices.empty')))
                )
            );
        };

        // ============================================
        // APPOINTMENT / BOOKING (create_booking)
        // ============================================
        const AppointmentBooking = () => {
            const [form, setForm] = useState({ customerName: '', customerPhone: '', preferredDate: '', comment: '' });
            const [loading, setLoading] = useState(false);
            const [success, setSuccess] = useState(false);
            const [err, setErr] = useState(null);
            const handleSubmit = async (e) => {
                e.preventDefault();
                if (!form.customerName?.trim() || !form.customerPhone?.trim()) {
                    setErr(t('appointment.error'));
                    return;
                }
                setLoading(true); setErr(null);
                try {
                    const res = await fetch('/api/remonline', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ formType: 'booking', customerName: form.customerName.trim(), customerPhone: form.customerPhone.replace(/\D/g, ''), preferredDate: form.preferredDate || undefined, comment: form.comment?.trim() || undefined })
                    });
                    const data = await res.json();
                    if (data.success) {
                        setSuccess(true);
                        setForm({ customerName: '', customerPhone: '', preferredDate: '', comment: '' });
                    } else {
                        setErr(data.message || data.error || t('appointment.error'));
                    }
                } catch (e) {
                    setErr(e.message || t('appointment.error'));
                }
                setLoading(false);
            };
            if (success) {
                return h('section', { id: 'appointment', className: 'py-12 px-4 bg-gray-900/80' },
                    h('div', { className: 'max-w-xl mx-auto text-center' },
                        h('p', { className: 'text-green-400 text-lg font-medium' }, t('appointment.success')),
                        h('button', { onClick: () => setSuccess(false), className: 'mt-4 px-4 py-2 bg-gray-700 text-white rounded-xl' }, t('booking.success.newRequest'))
                    )
                );
            }
            return h('section', { id: 'appointment', className: 'py-12 px-4 bg-gray-900/80' },
                h('div', { className: 'max-w-xl mx-auto' },
                    h('div', { className: 'text-center mb-6' },
                        h('h2', { className: 'text-3xl font-bold text-white mb-2' }, t('appointment.title')),
                        h('p', { className: 'text-gray-400' }, t('appointment.subtitle'))
                    ),
                    h('form', { onSubmit: handleSubmit, className: 'space-y-4' },
                        h('div', null,
                            h('label', { className: 'block text-gray-300 text-sm mb-1' }, t('appointment.form.name')),
                            h('input', {
                                type: 'text',
                                value: form.customerName,
                                onChange: (e) => setForm(prev => ({ ...prev, customerName: e.target.value })),
                                className: 'w-full px-4 py-3 bg-gray-800 border border-gray-600 rounded-xl text-white',
                                required: true
                            })
                        ),
                        h('div', null,
                            h('label', { className: 'block text-gray-300 text-sm mb-1' }, t('appointment.form.phone')),
                            h('input', {
                                type: 'tel',
                                value: form.customerPhone,
                                onChange: (e) => setForm(prev => ({ ...prev, customerPhone: e.target.value })),
                                className: 'w-full px-4 py-3 bg-gray-800 border border-gray-600 rounded-xl text-white',
                                required: true
                            })
                        ),
                        h('div', null,
                            h('label', { className: 'block text-gray-300 text-sm mb-1' }, t('appointment.form.date')),
                            h('input', {
                                type: 'date',
                                value: form.preferredDate,
                                onChange: (e) => setForm(prev => ({ ...prev, preferredDate: e.target.value })),
                                className: 'w-full px-4 py-3 bg-gray-800 border border-gray-600 rounded-xl text-white'
                            })
                        ),
                        h('div', null,
                            h('label', { className: 'block text-gray-300 text-sm mb-1' }, t('appointment.form.comment')),
                            h('textarea', {
                                value: form.comment,
                                onChange: (e) => setForm(prev => ({ ...prev, comment: e.target.value })),
                                rows: 2,
                                className: 'w-full px-4 py-3 bg-gray-800 border border-gray-600 rounded-xl text-white'
                            })
                        ),
                        err ? h('p', { className: 'text-red-400 text-sm' }, err) : null,
                        h('button', {
                            type: 'submit',
                            disabled: loading,
                            className: 'w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-xl disabled:opacity-50'
                        }, loading ? t('appointment.form.submitting') : t('appointment.form.submit'))
                    )
                )
            );
        };
        
        // ============================================
        // BOOKING FORM - –î–ª—è –∫–ª—ñ—î–Ω—Ç—ñ–≤
        // ============================================
        
        const CalculatorSection = () => {
            return h('section', { id: 'calculator', className: 'py-12 px-4 bg-gray-900' },
                h('div', { className: 'max-w-7xl mx-auto' },
                    h(window.PriceCalculator)
                )
            );
        };
        
        const Booking = () => {
            const [formData, setFormData] = useState({ name: '', phone: '', device: '', problem: '' });
            const [status, setStatus] = useState(null);
            const [errors, setErrors] = useState({});
            
            const validatePhone = (phone) => {
                const cleaned = phone.replace(/\D/g, '');
                return cleaned.length >= 10;
            };
            
            const formatPhone = (value) => {
                const cleaned = value.replace(/\D/g, '');
                if (cleaned.length <= 3) return cleaned;
                if (cleaned.length <= 5) return `+${cleaned.slice(0,3)} ${cleaned.slice(3)}`;
                if (cleaned.length <= 8) return `+${cleaned.slice(0,3)} ${cleaned.slice(3,5)} ${cleaned.slice(5)}`;
                return `+${cleaned.slice(0,3)} ${cleaned.slice(3,5)} ${cleaned.slice(5,8)} ${cleaned.slice(8,10)} ${cleaned.slice(10,12)}`;
            };
            
            const handleSubmit = async (e) => {
                e.preventDefault();
                
                // –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π
                const validationErrors = {};
                if (!formData.name || formData.name.trim().length < 2) {
                    validationErrors.name = t('booking.errors.nameRequired') || 'Numele este obligatoriu (min. 2 caractere)';
                }
                if (!formData.phone || !validatePhone(formData.phone)) {
                    validationErrors.phone = t('booking.errors.phoneInvalid') || 'Telefonul este invalid';
                }
                if (!formData.device) {
                    validationErrors.device = t('booking.errors.deviceRequired') || 'Selecta»õi dispozitivul';
                }
                
                if (Object.keys(validationErrors).length > 0) {
                    setErrors(validationErrors);
                    if (window.showToast) {
                        window.showToast('‚ùå ' + Object.values(validationErrors)[0], 'error', 4000);
                    }
                    return;
                }
                
                setStatus('loading');
                setErrors({});
                
                try {
                    // –¢–∞–π–º–∞—É—Ç –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ (10 —Å–µ–∫—É–Ω–¥)
                    const controller = new AbortController();
                    let timeoutId;
                    
                    // –†–µ–∞–ª—å–Ω—ã–π API –≤—ã–∑–æ–≤ —Å —É–ª—É—á—à–µ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
                    const fetchPromise = fetch('/api/booking', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            name: formData.name.trim(),
                            phone: formData.phone.replace(/\D/g, ''), // –û—á–∏—â–∞–µ–º —Ç–µ–ª–µ—Ñ–æ–Ω –æ—Ç —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
                            device: formData.device,
                            problem: formData.problem.trim() || 'Nu specificat',
                            _honeypot: '', // Anti-spam honeypot
                            source: 'website',
                            timestamp: new Date().toISOString()
                        }),
                        signal: controller.signal
                    });
                    
                    // Set timeout with cleanup
                    timeoutId = setTimeout(() => {
                        controller.abort();
                        console.warn('‚ö†Ô∏è Request timeout after 10s');
                    }, 10000);
                    
                    // Cleanup timeout on completion
                    const response = await fetchPromise.finally(() => {
                        if (timeoutId) clearTimeout(timeoutId);
                    });
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞
                    if (!response.ok) {
                        let errorMessage = 'Eroare la trimitere';
                        try {
                            const errorData = await response.json();
                            errorMessage = errorData.error || errorData.message || errorMessage;
                        } catch (e) {
                            errorMessage = `Eroare ${response.status}: ${response.statusText}`;
                        }
                        throw new Error(errorMessage);
                    }
                    
                    const result = await response.json();
                    
                    if (result.success) {
                        setStatus('success');
                        setFormData({ name: '', phone: '', device: '', problem: '' });
                        
                        // Show success toast
                        safeToast('‚úÖ ' + (result.message || t('booking.success.message') || 'Cerere trimisƒÉ!'), 'success', 5000);
                        
                        // Track conversion
                        if (window.NEXXAnalytics) {
                            window.NEXXAnalytics.trackEvent('booking_submitted', {
                                device: formData.device,
                                order_id: result.order_id || null
                            });
                        }
                        
                        // –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–µ–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö –ª–∏–¥–æ–≤ –∏–∑ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞
                        try {
                            const failedLeads = JSON.parse(localStorage.getItem('nexx_failed_leads') || '[]');
                            if (failedLeads.length > 0) {
                                console.log('üîÑ –ü—ã—Ç–∞—é—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å ' + failedLeads.length + ' —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –ª–∏–¥–æ–≤...');
                                // –§–æ–Ω–æ–≤–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ UI
                                Promise.all(failedLeads.map(lead => 
                                    fetch('/api/remonline?action=create_lead', {
                                        method: 'POST',
                                        headers: { 'Content-Type': 'application/json' },
                                        body: JSON.stringify(lead)
                                    }).catch(() => null)
                                )).then(() => {
                                    localStorage.removeItem('nexx_failed_leads');
                                    console.log('‚úÖ –í—Å–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –ª–∏–¥—ã –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã');
                                });
                            }
                        } catch (e) {
                            // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –æ—à–∏–±–∫–∏ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –ª–∏–¥–æ–≤
                        }
                        
                        // Clear status after delay with cleanup
                        const statusTimer = setTimeout(() => setStatus(null), 3000);
                        // Store timer for cleanup if component unmounts
                        if (window.currentStatusTimer) clearTimeout(window.currentStatusTimer);
                        window.currentStatusTimer = statusTimer;
                    } else {
                        throw new Error(result.error || result.message || t('booking.errors.submitError'));
                    }
                } catch (error) {
                    console.error('Booking error:', error);
                    
                    let errorMessage = t('booking.errors.submitError');
                    if (error.name === 'AbortError') {
                        errorMessage = t('booking.errors.timeout');
                    } else if (error.message) {
                        errorMessage = error.message;
                    }
                    
                    setStatus('error');
                    setErrors({ submit: errorMessage });
                    safeToast('‚ùå ' + errorMessage, 'error', 6000);
                    
                    // –ß–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥ —Å–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—Ç–∞—Ç—É—Å –æ—à–∏–±–∫–∏
                    setTimeout(() => {
                        setStatus(null);
                        setErrors({});
                    }, 5000);
                }
            };
            
            return h('section', { id: 'booking', className: 'py-12 px-4 bg-gradient-to-br from-blue-50 to-purple-50' },
                h('div', { className: 'max-w-3xl mx-auto' },
                    h('div', { className: 'text-center mb-8' },
                        h('h2', { className: 'text-4xl font-bold mb-4 text-white' }, 
                            t('booking.title')
                        ),
                        h('p', { className: 'text-gray-600 text-lg' }, 
                            t('booking.subtitle')
                        )
                    ),
                    
                    h('div', { className: 'bg-white rounded-3xl shadow-2xl p-8 md:p-10' },
                        status === 'success' 
                            ? h('div', { className: 'text-center py-12' },
                                h('div', { className: 'text-6xl mb-4' }, '‚úÖ'),
                                h('h3', { className: 'text-2xl font-bold text-gray-900 mb-2' }, t('booking.success.title')),
                                h('p', { className: 'text-gray-600 mb-6' }, t('booking.success.message')),
                                h('button', {
                                    onClick: () => setStatus(null),
                                    className: 'px-6 py-3 bg-gray-800 hover:bg-gray-700 text-white rounded-lg font-semibold transition'
                                }, t('booking.success.newRequest'))
                              )
                            : h('form', { onSubmit: handleSubmit, className: 'space-y-6' },
                                h('div', null,
                                    h('label', { className: 'block text-sm font-semibold text-gray-700 mb-2' }, t('booking.form.name')),
                                    h('input', {
                                        type: 'text',
                                        required: true,
                                        value: formData.name,
                                        onChange: (e) => setFormData({...formData, name: e.target.value}),
                                        placeholder: t('booking.form.namePlaceholder'),
                                        className: 'w-full px-4 py-3 border-2 border-gray-300 focus:border-blue-500 rounded-lg focus:outline-none transition'
                                    })
                                ),
                                h('div', null,
                                    h('label', { className: 'block text-sm font-semibold text-gray-700 mb-2' }, t('booking.form.phone')),
                                    h('input', {
                                        type: 'tel',
                                        required: true,
                                        value: formData.phone,
                                        onChange: (e) => {
                                            const formatted = formatPhone(e.target.value);
                                            setFormData({...formData, phone: formatted});
                                            if (validatePhone(formatted)) {
                                                setErrors({...errors, phone: null});
                                            }
                                        },
                                        onBlur: (e) => {
                                            if (!validatePhone(e.target.value)) {
                                                setErrors({...errors, phone: t('booking.errors.phone')});
                                            }
                                        },
                                        placeholder: t('booking.form.phonePlaceholder'),
                                        className: `w-full px-4 py-3 border-2 ${errors.phone ? 'border-red-500' : 'border-gray-300 focus:border-blue-500'} rounded-lg focus:outline-none transition`
                                    }),
                                errors.phone && h('p', { className: 'text-red-500 text-sm mt-1' }, errors.phone)
                                ),
                                h('div', null,
                                    h('label', { className: 'block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2' }, 
                                        Icons.smartphone({ size: 16, className: 'text-blue-600' }),
                                        t('booking.form.device')
                                    ),
                                    h('select', {
                                        required: true,
                                        value: formData.device,
                                        onChange: (e) => setFormData({...formData, device: e.target.value}),
                                        className: 'w-full px-4 py-3 border-2 border-gray-300 focus:border-blue-500 rounded-lg focus:outline-none transition bg-white text-gray-900'
                                    },
                                        h('option', { value: '' }, t('booking.form.devicePlaceholder')),
                                        h('optgroup', { label: 'üì± iPhone' },
                                            h('option', { value: 'iPhone 15 Pro Max' }, 'iPhone 15 Pro Max'),
                                            h('option', { value: 'iPhone 15 Pro' }, 'iPhone 15 Pro'),
                                            h('option', { value: 'iPhone 15 Plus' }, 'iPhone 15 Plus'),
                                            h('option', { value: 'iPhone 15' }, 'iPhone 15'),
                                            h('option', { value: 'iPhone 14 Pro Max' }, 'iPhone 14 Pro Max'),
                                            h('option', { value: 'iPhone 14 Pro' }, 'iPhone 14 Pro'),
                                            h('option', { value: 'iPhone 14 Plus' }, 'iPhone 14 Plus'),
                                            h('option', { value: 'iPhone 14' }, 'iPhone 14'),
                                            h('option', { value: 'iPhone 13 Pro Max' }, 'iPhone 13 Pro Max'),
                                            h('option', { value: 'iPhone 13 Pro' }, 'iPhone 13 Pro'),
                                            h('option', { value: 'iPhone 13' }, 'iPhone 13'),
                                            h('option', { value: 'iPhone 12 Pro Max' }, 'iPhone 12 Pro Max'),
                                            h('option', { value: 'iPhone 12 Pro' }, 'iPhone 12 Pro'),
                                            h('option', { value: 'iPhone 12' }, 'iPhone 12'),
                                            h('option', { value: 'iPhone 11 Pro Max' }, 'iPhone 11 Pro Max'),
                                            h('option', { value: 'iPhone 11 Pro' }, 'iPhone 11 Pro'),
                                            h('option', { value: 'iPhone 11' }, 'iPhone 11'),
                                            h('option', { value: 'iPhone XS Max' }, 'iPhone XS Max'),
                                            h('option', { value: 'iPhone XS' }, 'iPhone XS'),
                                            h('option', { value: 'iPhone XR' }, 'iPhone XR'),
                                            h('option', { value: 'iPhone X' }, 'iPhone X'),
                                            h('option', { value: 'iPhone 8 Plus' }, 'iPhone 8 Plus'),
                                            h('option', { value: 'iPhone 8' }, 'iPhone 8'),
                                            h('option', { value: 'iPhone 7 Plus' }, 'iPhone 7 Plus'),
                                            h('option', { value: 'iPhone 7' }, 'iPhone 7'),
                                            h('option', { value: 'iPhone SE (2022)' }, 'iPhone SE (2022)'),
                                            h('option', { value: 'iPhone SE (2020)' }, 'iPhone SE (2020)'),
                                            h('option', { value: 'Alt iPhone' }, 'Alt model iPhone')
                                        ),
                                        h('optgroup', { label: 'üì± Samsung Galaxy' },
                                            h('option', { value: 'Samsung S24 Ultra' }, 'Galaxy S24 Ultra'),
                                            h('option', { value: 'Samsung S24+' }, 'Galaxy S24+'),
                                            h('option', { value: 'Samsung S24' }, 'Galaxy S24'),
                                            h('option', { value: 'Samsung S23 Ultra' }, 'Galaxy S23 Ultra'),
                                            h('option', { value: 'Samsung S23+' }, 'Galaxy S23+'),
                                            h('option', { value: 'Samsung S23' }, 'Galaxy S23'),
                                            h('option', { value: 'Samsung S22 Ultra' }, 'Galaxy S22 Ultra'),
                                            h('option', { value: 'Samsung S22+' }, 'Galaxy S22+'),
                                            h('option', { value: 'Samsung S22' }, 'Galaxy S22'),
                                            h('option', { value: 'Samsung S21 Ultra' }, 'Galaxy S21 Ultra'),
                                            h('option', { value: 'Samsung S21+' }, 'Galaxy S21+'),
                                            h('option', { value: 'Samsung S21' }, 'Galaxy S21'),
                                            h('option', { value: 'Samsung S20' }, 'Galaxy S20'),
                                            h('option', { value: 'Samsung Note 20' }, 'Galaxy Note 20'),
                                            h('option', { value: 'Samsung A54' }, 'Galaxy A54'),
                                            h('option', { value: 'Samsung A34' }, 'Galaxy A34'),
                                            h('option', { value: 'Samsung A14' }, 'Galaxy A14'),
                                            h('option', { value: 'Samsung Z Fold' }, 'Galaxy Z Fold'),
                                            h('option', { value: 'Samsung Z Flip' }, 'Galaxy Z Flip'),
                                            h('option', { value: 'Alt Samsung' }, 'Alt model Samsung')
                                        ),
                                        h('optgroup', { label: 'üì± Xiaomi / Redmi / Poco' },
                                            h('option', { value: 'Xiaomi 14 Pro' }, 'Xiaomi 14 Pro'),
                                            h('option', { value: 'Xiaomi 14' }, 'Xiaomi 14'),
                                            h('option', { value: 'Xiaomi 13 Pro' }, 'Xiaomi 13 Pro'),
                                            h('option', { value: 'Xiaomi 13' }, 'Xiaomi 13'),
                                            h('option', { value: 'Xiaomi 12 Pro' }, 'Xiaomi 12 Pro'),
                                            h('option', { value: 'Xiaomi 12' }, 'Xiaomi 12'),
                                            h('option', { value: 'Redmi Note 13' }, 'Redmi Note 13'),
                                            h('option', { value: 'Redmi Note 12' }, 'Redmi Note 12'),
                                            h('option', { value: 'Redmi Note 11' }, 'Redmi Note 11'),
                                            h('option', { value: 'Poco X6' }, 'Poco X6'),
                                            h('option', { value: 'Poco F5' }, 'Poco F5'),
                                            h('option', { value: 'Alt Xiaomi' }, 'Alt model Xiaomi')
                                        ),
                                        h('optgroup', { label: 'üì± ' + (t('calculator.otherBrands') || 'Alte mƒÉrci') },
                                            h('option', { value: 'Huawei' }, 'Huawei / Honor'),
                                            h('option', { value: 'OnePlus' }, 'OnePlus'),
                                            h('option', { value: 'Google Pixel' }, 'Google Pixel'),
                                            h('option', { value: 'Oppo' }, 'Oppo'),
                                            h('option', { value: 'Vivo' }, 'Vivo'),
                                            h('option', { value: 'Realme' }, 'Realme'),
                                            h('option', { value: 'Motorola' }, 'Motorola'),
                                            h('option', { value: 'Nokia' }, 'Nokia'),
                                            h('option', { value: 'Sony Xperia' }, 'Sony Xperia'),
                                            h('option', { value: 'Asus ROG' }, 'Asus ROG Phone'),
                                            h('option', { value: 'Alt telefon' }, 'Alt model')
                                        ),
                                        h('optgroup', { label: 'üíª MacBook' },
                                            h('option', { value: 'MacBook Pro 16 (M3)' }, 'MacBook Pro 16" (M3)'),
                                            h('option', { value: 'MacBook Pro 14 (M3)' }, 'MacBook Pro 14" (M3)'),
                                            h('option', { value: 'MacBook Air 15 (M2)' }, 'MacBook Air 15" (M2)'),
                                            h('option', { value: 'MacBook Air 13 (M2)' }, 'MacBook Air 13" (M2)'),
                                            h('option', { value: 'MacBook Pro 16 (M1)' }, 'MacBook Pro 16" (M1)'),
                                            h('option', { value: 'MacBook Pro 14 (M1)' }, 'MacBook Pro 14" (M1)'),
                                            h('option', { value: 'MacBook Air (M1)' }, 'MacBook Air (M1)'),
                                            h('option', { value: 'MacBook Pro Intel' }, 'MacBook Pro (Intel)'),
                                            h('option', { value: 'MacBook Air Intel' }, 'MacBook Air (Intel)'),
                                            h('option', { value: 'Alt MacBook' }, 'Alt model MacBook')
                                        ),
                                        h('optgroup', { label: 'üíª Windows Laptopuri' },
                                            h('option', { value: 'Dell XPS' }, 'Dell XPS'),
                                            h('option', { value: 'Dell Inspiron' }, 'Dell Inspiron'),
                                            h('option', { value: 'Dell Latitude' }, 'Dell Latitude'),
                                            h('option', { value: 'HP Pavilion' }, 'HP Pavilion'),
                                            h('option', { value: 'HP Spectre' }, 'HP Spectre'),
                                            h('option', { value: 'HP EliteBook' }, 'HP EliteBook'),
                                            h('option', { value: 'Lenovo ThinkPad' }, 'Lenovo ThinkPad'),
                                            h('option', { value: 'Lenovo IdeaPad' }, 'Lenovo IdeaPad'),
                                            h('option', { value: 'Lenovo Legion' }, 'Lenovo Legion (Gaming)'),
                                            h('option', { value: 'Asus ZenBook' }, 'Asus ZenBook'),
                                            h('option', { value: 'Asus VivoBook' }, 'Asus VivoBook'),
                                            h('option', { value: 'Asus ROG' }, 'Asus ROG (Gaming)'),
                                            h('option', { value: 'Acer Aspire' }, 'Acer Aspire'),
                                            h('option', { value: 'Acer Swift' }, 'Acer Swift'),
                                            h('option', { value: 'Acer Predator' }, 'Acer Predator (Gaming)'),
                                            h('option', { value: 'MSI Gaming' }, 'MSI Gaming'),
                                            h('option', { value: 'Razer' }, 'Razer'),
                                            h('option', { value: 'Microsoft Surface' }, 'Microsoft Surface'),
                                            h('option', { value: 'Alt laptop' }, 'Alt model laptop')
                                        ),
                                        h('optgroup', { label: 'üì± Tablete' },
                                            h('option', { value: 'iPad' }, 'iPad (toate modelele)'),
                                            h('option', { value: 'Samsung Tab' }, 'Samsung Galaxy Tab'),
                                            h('option', { value: 'Xiaomi Pad' }, 'Xiaomi Pad'),
                                            h('option', { value: 'Lenovo Tab' }, 'Lenovo Tab'),
                                            h('option', { value: 'Alte tablete' }, t('calculator.otherBrands') || 'Alte mƒÉrci')
                                        ),
                                        h('optgroup', { label: '‚åö Smartwatch' },
                                            h('option', { value: 'Apple Watch' }, 'Apple Watch'),
                                            h('option', { value: 'Samsung Watch' }, 'Samsung Galaxy Watch'),
                                            h('option', { value: 'Xiaomi Watch' }, 'Xiaomi Watch'),
                                            h('option', { value: 'Huawei Watch' }, 'Huawei Watch'),
                                            h('option', { value: 'Alte smartwatch' }, t('calculator.otherBrands') || 'Alte mƒÉrci')
                                        ),
                                        h('optgroup', { label: 'üéß Audio' },
                                            h('option', { value: 'AirPods' }, 'AirPods / AirPods Pro'),
                                            h('option', { value: 'Samsung Buds' }, 'Samsung Galaxy Buds'),
                                            h('option', { value: 'Xiaomi Buds' }, 'Xiaomi Buds'),
                                            h('option', { value: 'Alte audio' }, t('calculator.otherBrands') || 'Alte mƒÉrci')
                                        )
                                    )
                                ),
                                h('div', null,
                                    h('label', { className: 'block text-sm font-semibold text-gray-700 mb-2' }, t('booking.form.problem')),
                                    h('textarea', {
                                        required: true,
                                        value: formData.problem,
                                        onChange: (e) => setFormData({...formData, problem: e.target.value}),
                                        placeholder: t('booking.form.problemPlaceholder'),
                                        rows: 4,
                                        className: 'w-full px-4 py-3 border-2 border-gray-300 focus:border-blue-500 rounded-lg focus:outline-none transition resize-none'
                                    })
                                ),
                                h('button', {
                                    type: 'submit',
                                    disabled: status === 'loading',
                                    className: 'w-full px-8 py-4 bg-gradient-to-r from-gray-900 to-gray-800 hover:from-black hover:to-gray-900 text-white text-lg font-bold rounded-xl shadow-xl hover:shadow-2xl transition-all transform hover:scale-[1.02] disabled:opacity-50 flex items-center justify-center gap-3'
                                },
                                    status === 'loading' 
                                        ? Icons.loader({ size: 20 })
                                        : Icons.send({ size: 20 }),
                                    status === 'loading' ? t('booking.form.submitting') : t('booking.form.submit')
                                )
                            )
                    )
                )
            );
        };
        
        // ============================================
        // CONTACT - –î–ª—è –∫–ª—ñ—î–Ω—Ç—ñ–≤
        // ============================================
        
        const Contact = () => {
            const [lang, setLang] = React.useState(window.i18n?.getCurrentLanguage()?.code || 'ro');
            const [phone, setPhone] = React.useState('');
            const [sending, setSending] = React.useState(false);
            const [sent, setSent] = React.useState(false);
            
            React.useEffect(() => {
                if (window.i18n?.subscribe) {
                    return window.i18n.subscribe(() => {
                        setLang(window.i18n.getCurrentLanguage()?.code || 'ro');
                    });
                }
            }, []);
            
            const texts = {
                ro: {
                    title: 'Contacta»õi-ne',
                    subtitle: 'Program: Luni-Vineri 10:00-19:00, S√¢mbƒÉtƒÉ 10:00-16:00',
                    callbackTitle: 'VƒÉ sunƒÉm √Æn 30 de secunde!',
                    callbackDesc: 'LƒÉsa»õi numƒÉrul »ôi vƒÉ contactƒÉm imediat',
                    phonePlaceholder: 'Telefonul dvs: 07XX XXX XXX',
                    sendBtn: 'Suna»õi-mƒÉ acum!',
                    sending: 'Se trimite...',
                    sent: '‚úì VƒÉ sunƒÉm imediat!',
                    telegram: 'Telegram',
                    email: 'Email',
                    instagram: 'Instagram',
                    directions: 'Cum ajunge»õi',
                    address: 'Calea »òerban VodƒÉ 47, Sector 4',
                    phoneError: 'Introduce»õi un numƒÉr valid',
                    errorGeneric: 'Eroare. √éncerca»õi din nou.'
                },
                en: {
                    title: 'Contact Us',
                    subtitle: 'Hours: Mon-Fri 10:00-19:00, Sat 10:00-16:00',
                    callbackTitle: 'We call you in 30 seconds!',
                    callbackDesc: 'Leave your number and we contact you immediately',
                    phonePlaceholder: 'Your phone: 07XX XXX XXX',
                    sendBtn: 'Call me now!',
                    sending: 'Sending...',
                    sent: '‚úì Calling you now!',
                    telegram: 'Telegram',
                    email: 'Email',
                    instagram: 'Instagram',
                    directions: 'Directions',
                    address: 'Calea »òerban VodƒÉ 47, Sector 4',
                    phoneError: 'Please enter a valid number',
                    errorGeneric: 'Error. Please try again.'
                },
                ru: {
                    title: '–°–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏',
                    subtitle: '–ß–∞—Å—ã —Ä–∞–±–æ—Ç—ã: –ü–Ω-–ü—Ç 10:00-19:00, –°–± 10:00-16:00',
                    callbackTitle: '–ü–µ—Ä–µ–∑–≤–æ–Ω–∏–º –∑–∞ 30 —Å–µ–∫—É–Ω–¥!',
                    callbackDesc: '–û—Å—Ç–∞–≤—å—Ç–µ –Ω–æ–º–µ—Ä - –º—ã —Å—Ä–∞–∑—É —Å–≤—è–∂–µ–º—Å—è',
                    phonePlaceholder: '–í–∞—à —Ç–µ–ª–µ—Ñ–æ–Ω: 07XX XXX XXX',
                    sendBtn: '–ü–æ–∑–≤–æ–Ω–∏—Ç–µ –º–Ω–µ!',
                    sending: '–û—Ç–ø—Ä–∞–≤–∫–∞...',
                    sent: '‚úì –£–∂–µ –∑–≤–æ–Ω–∏–º!',
                    telegram: 'Telegram',
                    email: '–≠–ª. –ø–æ—á—Ç–∞',
                    instagram: 'Instagram',
                    directions: '–ö–∞–∫ –¥–æ–±—Ä–∞—Ç—å—Å—è',
                    address: 'Calea »òerban VodƒÉ 47, Sector 4',
                    phoneError: '–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –Ω–æ–º–µ—Ä',
                    errorGeneric: '–û—à–∏–±–∫–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.'
                },
                uk: {
                    title: '–ó–≤\'—è–∂—ñ—Ç—å—Å—è –∑ –Ω–∞–º–∏',
                    subtitle: '–ì—Ä–∞—Ñ—ñ–∫: –ü–Ω-–ü—Ç 10:00-19:00, –°–± 10:00-16:00',
                    callbackTitle: '–ü–µ—Ä–µ–¥–∑–≤–æ–Ω–∏–º–æ –∑–∞ 30 —Å–µ–∫—É–Ω–¥!',
                    callbackDesc: '–ó–∞–ª–∏—à—Ç–µ –Ω–æ–º–µ—Ä - –º–∏ –æ–¥—Ä–∞–∑—É –∑–≤\'—è–∂–µ–º–æ—Å—å',
                    phonePlaceholder: '–í–∞—à —Ç–µ–ª–µ—Ñ–æ–Ω: 07XX XXX XXX',
                    sendBtn: '–ó–∞—Ç–µ–ª–µ—Ñ–æ–Ω—É–π—Ç–µ –º–µ–Ω—ñ!',
                    sending: '–ù–∞–¥—Å–∏–ª–∞–Ω–Ω—è...',
                    sent: '‚úì –í–∂–µ –¥–∑–≤–æ–Ω–∏–º–æ!',
                    telegram: 'Telegram',
                    email: 'Email',
                    instagram: 'Instagram',
                    directions: '–Ø–∫ –¥—ñ—Å—Ç–∞—Ç–∏—Å—è',
                    address: 'Calea »òerban VodƒÉ 47, Sector 4',
                    phoneError: '–í–≤–µ–¥—ñ—Ç—å –∫–æ—Ä–µ–∫—Ç–Ω–∏–π –Ω–æ–º–µ—Ä',
                    errorGeneric: '–ü–æ–º–∏–ª–∫–∞. –°–ø—Ä–æ–±—É–π—Ç–µ –∑–Ω–æ–≤—É.'
                }
            };
            const txt = texts[lang] || texts.ro;
            
            const handleCallback = async () => {
                if (!phone || phone.replace(/\D/g, '').length < 9) {
                    if (window.showToast) window.showToast(txt.phoneError, 'error');
                    return;
                }
                setSending(true);
                try {
                    await fetch('/api/callback', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ phone, name: 'Quick Callback', source: 'contact_section' })
                    });
                    setSent(true);
                    if (window.showToast) window.showToast(txt.sent, 'success');
                } catch (e) {
                    if (window.showToast) window.showToast(txt.errorGeneric, 'error');
                }
                setSending(false);
            };
            
            return h('section', { id: 'contacts', className: 'py-16 px-4 bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900' },
                h('div', { className: 'max-w-6xl mx-auto' },
                    // Header
                    h('div', { className: 'text-center mb-10' },
                        h('h2', { className: 'text-4xl md:text-5xl font-bold text-white mb-3' }, txt.title),
                        h('p', { className: 'text-gray-400 text-lg' }, txt.subtitle)
                    ),
                    
                    // Main Grid
                    h('div', { className: 'grid lg:grid-cols-2 gap-8' },
                        // Left: Quick Callback Form
                        h('div', { className: 'bg-gradient-to-br from-blue-600/20 to-purple-600/20 border border-blue-500/30 rounded-2xl p-6 md:p-8' },
                            h('div', { className: 'text-center mb-6' },
                                h('div', { className: 'w-16 h-16 mx-auto mb-4 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center' },
                                    h('i', { className: 'fas fa-phone-alt text-white text-2xl animate-pulse' })
                                ),
                                h('h3', { className: 'text-2xl font-bold text-white mb-2' }, txt.callbackTitle),
                                h('p', { className: 'text-gray-300' }, txt.callbackDesc)
                            ),
                            !sent ? h('div', { className: 'space-y-4' },
                                h('input', {
                                    type: 'tel',
                                    value: phone,
                                    onChange: (e) => setPhone(e.target.value),
                                    placeholder: txt.phonePlaceholder,
                                    className: 'w-full px-5 py-4 bg-gray-800/50 border-2 border-gray-600 focus:border-green-500 rounded-xl text-white text-lg placeholder-gray-400 outline-none transition'
                                }),
                                h('button', {
                                    onClick: handleCallback,
                                    disabled: sending,
                                    className: 'w-full py-4 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-bold text-lg rounded-xl transition-all transform hover:scale-[1.02] shadow-lg flex items-center justify-center gap-3'
                                },
                                    sending ? h('i', { className: 'fas fa-spinner fa-spin' }) : h('i', { className: 'fas fa-phone-alt' }),
                                    sending ? txt.sending : txt.sendBtn
                                )
                            ) : h('div', { className: 'text-center py-6' },
                                h('div', { className: 'w-20 h-20 mx-auto mb-4 bg-green-500 rounded-full flex items-center justify-center' },
                                    h('i', { className: 'fas fa-check text-white text-3xl' })
                                ),
                                h('p', { className: 'text-green-400 text-xl font-bold' }, txt.sent)
                            )
                        ),
                        
                        // Right: Contact Info
                        h('div', { className: 'space-y-4' },
                            // Telegram
                            h('a', { 
                                href: 'https://t.me/nexx_support', 
                                target: '_blank',
                                className: 'flex items-center gap-4 p-5 bg-gray-800/50 border border-gray-700 hover:border-blue-500 rounded-xl transition-all hover:bg-gray-800 group'
                            },
                                h('div', { className: 'w-14 h-14 bg-gradient-to-br from-blue-400 to-blue-600 rounded-xl flex items-center justify-center group-hover:scale-110 transition' },
                                    h('i', { className: 'fab fa-telegram text-white text-2xl' })
                                ),
                                h('div', null,
                                    h('p', { className: 'text-white font-bold text-lg' }, txt.telegram),
                                    h('p', { className: 'text-gray-400' }, '@nexx_support')
                                ),
                                h('i', { className: 'fas fa-arrow-right text-gray-500 ml-auto group-hover:text-blue-400 transition' })
                            ),
                            
                            // Email
                            h('a', { 
                                href: 'mailto:info@nexxgsm.ro',
                                className: 'flex items-center gap-4 p-5 bg-gray-800/50 border border-gray-700 hover:border-purple-500 rounded-xl transition-all hover:bg-gray-800 group'
                            },
                                h('div', { className: 'w-14 h-14 bg-gradient-to-br from-purple-400 to-purple-600 rounded-xl flex items-center justify-center group-hover:scale-110 transition' },
                                    h('i', { className: 'fas fa-envelope text-white text-2xl' })
                                ),
                                h('div', null,
                                    h('p', { className: 'text-white font-bold text-lg' }, txt.email),
                                    h('p', { className: 'text-gray-400' }, 'info@nexxgsm.ro')
                                ),
                                h('i', { className: 'fas fa-arrow-right text-gray-500 ml-auto group-hover:text-purple-400 transition' })
                            ),
                            
                            // Address/Directions
                            h('a', { 
                                href: '/directions',
                                className: 'flex items-center gap-4 p-5 bg-gray-800/50 border border-gray-700 hover:border-green-500 rounded-xl transition-all hover:bg-gray-800 group'
                            },
                                h('div', { className: 'w-14 h-14 bg-gradient-to-br from-green-400 to-green-600 rounded-xl flex items-center justify-center group-hover:scale-110 transition' },
                                    h('i', { className: 'fas fa-map-marker-alt text-white text-2xl' })
                                ),
                                h('div', null,
                                    h('p', { className: 'text-white font-bold text-lg' }, txt.directions),
                                    h('p', { className: 'text-gray-400' }, txt.address)
                                ),
                                h('i', { className: 'fas fa-arrow-right text-gray-500 ml-auto group-hover:text-green-400 transition' })
                            ),
                            
                            // Instagram
                            h('a', { 
                                href: 'https://instagram.com/nexx_gsm',
                                target: '_blank',
                                className: 'flex items-center gap-4 p-5 bg-gray-800/50 border border-gray-700 hover:border-pink-500 rounded-xl transition-all hover:bg-gray-800 group'
                            },
                                h('div', { className: 'w-14 h-14 bg-gradient-to-br from-pink-400 via-purple-500 to-orange-400 rounded-xl flex items-center justify-center group-hover:scale-110 transition' },
                                    h('i', { className: 'fab fa-instagram text-white text-2xl' })
                                ),
                                h('div', null,
                                    h('p', { className: 'text-white font-bold text-lg' }, txt.instagram),
                                    h('p', { className: 'text-gray-400' }, '@nexx_gsm')
                                ),
                                h('i', { className: 'fas fa-arrow-right text-gray-500 ml-auto group-hover:text-pink-400 transition' })
                            )
                        )
                    )
                )
            );
        };
        
        // ============================================
        // APP
        // ============================================
        
        const App = () => {
            // Subscribe to language changes to force re-render
            const [lang, setLang] = useState(window.i18n?.getCurrentLanguage()?.code || 'ro');
            
            useEffect(() => {
                // Subscribe to language changes
                if (window.i18n?.subscribe) {
                    return window.i18n.subscribe(() => {
                        setLang(window.i18n.getCurrentLanguage()?.code || 'ro');
                    });
                }
            }, []);
            
            useEffect(() => {
                // Update skip link text
                const skipLink = document.getElementById('skip-link');
                if (skipLink && window.i18n) {
                    skipLink.textContent = t('footer.skipToContent');
                }
                
                window.NEXXNavigation?.trackPageView('home');
                window.NEXXAnalytics?.trackPageView('Homepage', '/');
                
                return () => {
                    window.NEXXAnalytics?.trackTimeOnPage('Homepage');
                };
            }, [lang]);
            
            return h(React.Fragment, { key: lang },
                h(ToastContainer),
                h(CallbackModal),
                h(ServiceModAuth),
                h(Hero),
                h(Services),
                h(CalculatorSection),
                h(WhyUs),
                h(Gallery),
                h(Reviews),
                h(TrackOrder),
                h(RemonlineServicesList),
                h(AppointmentBooking),
                h(Contact),
            );
        };
        
        // Create root and render app (only once)
        if (!window.__NEXX_ROOT_CREATED) {
            window.__NEXX_ROOT_CREATED = true;
            try {
                // Render Header in separate container (always visible)
                const headerContainer = document.getElementById('header-root');
                if (headerContainer) {
                    const headerRoot = ReactDOM.createRoot(headerContainer);
                    headerRoot.render(h(Header, { currentPage: 'home' }));
                }
                
                // Render Footer in separate container
                const footerContainer = document.getElementById('footer-root');
                if (footerContainer) {
                    const footerRoot = ReactDOM.createRoot(footerContainer);
                    footerRoot.render(h(Footer));
                }
                
                // Render main app content
                const appContainer = document.getElementById('app');
                if (appContainer) {
                    const root = ReactDOM.createRoot(appContainer);
                    root.render(h(App));
                    
                    // Show app after React renders to prevent FOUC
                    requestAnimationFrame(() => {
                        requestAnimationFrame(() => {
                            const appEl = document.getElementById('app');
                            if (appEl) {
                                document.body.classList.add('react-loaded');
                                appEl.classList.add('react-ready');
                            }
                        });
                    });
                }
            } catch (err) {
                console.error('NEXX init render error:', err);
            }
        }
        };
        
        // Start initialization (only once)
        if (!window.__NEXX_INIT_STARTED) {
            window.__NEXX_INIT_STARTED = true;
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', initApp);
            } else {
                initApp();
            }
        }
        
        // Smooth scroll
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                });
            });
        });
        
        // Register Service Worker for PWA with improved error handling
        // DISABLED: Service Worker registration was causing "Failed to update" errors
        // that triggered error modals. Will revisit for production PWA support.
        /*
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                // Unregister old service workers first with error handling
                navigator.serviceWorker.getRegistrations()
                    .then(registrations => {
                        return Promise.all(
                            registrations.map(registration => {
                                if (registration.active?.scriptURL.includes('sw.js')) {
                                    return registration.unregister()
                                        .then(() => {
                                            console.log('‚úÖ Old service worker unregistered');
                                        })
                                        .catch(err => {
                                            console.warn('‚ö†Ô∏è Failed to unregister old SW:', err);
                                            return true; // Continue even if unregister fails
                                        });
                                }
                                return Promise.resolve();
                            })
                        );
                    })
                    .catch(err => {
                        console.warn('‚ö†Ô∏è Error getting SW registrations:', err);
                    })
                    .finally(() => {
                        // Register new service worker with version and better error handling
                        navigator.serviceWorker.register('/sw.js?v=2.0-20260130')
                            .then(reg => {
                                // Only log in development
                                const isDev = window.location.hostname === 'localhost' || window.location.hostname.includes('127.0.0.1');
                                if (isDev) {
                                  console.log('‚úÖ Service Worker registered:', reg.scope);
                                }
                                // Check for updates
                                reg.addEventListener('updatefound', () => {
                                    const newWorker = reg.installing;
                                    if (newWorker) {
                                        newWorker.addEventListener('statechange', () => {
                                            if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                                // Only log in development
                                                const isDev = window.location.hostname === 'localhost' || window.location.hostname.includes('127.0.0.1');
                                                if (isDev) {
                                                  console.log('üîÑ New SW version available');
                                                }
                                            }
                                        });
                                    }
                                });
                                // Try to update, but don't fail if it errors
                                try {
                                    reg.update().catch(e => {
                                        // Silently ignore update errors - they're benign
                                    });
                                } catch (e) {
                                    // Ignore update errors
                                }
                            })
                            .catch(err => {
                                // Only log if it's not a known benign error
                                const benignErrors = ['invalid state', 'Failed to register', 'Not found', 'network error', 'Failed to fetch', 'Failed to update'];
                                const isBenign = benignErrors.some(benign => 
                                    err.message && err.message.toLowerCase().includes(benign.toLowerCase())
                                );
                                
                                // Only log in development or if it's a critical error
                                const isDev = window.location.hostname === 'localhost' || window.location.hostname.includes('127.0.0.1');
                                if (!isBenign && isDev) {
                                    console.warn('‚ö†Ô∏è Service Worker registration error:', err.message);
                                }
                            });
                    });
            });
        }
        */
        
        // PWA Install Prompt - Bar Style
        let deferredPrompt;
        
        const updateInstallBanner = () => {
            if (!window.i18n) return;
            const pwaT = (key) => {
                if (!window.i18n || typeof window.i18n.t !== 'function') {
                    const def = { 'pwa.installTitle': 'NEXX GSM', 'pwa.installSubtitle': 'Add to home screen', 'pwa.installButton': 'Add', 'pwa.installed': 'üéâ NEXX GSM installed!' };
                    return def[key] || key;
                }
                const v = window.i18n.t(key);
                if (v && v !== key) return v;
                const def = { 'pwa.installTitle': 'NEXX GSM', 'pwa.installSubtitle': 'Add to home screen', 'pwa.installButton': 'Add', 'pwa.installed': 'üéâ NEXX GSM installed!' };
                return def[key] || key;
            };
            const pwaTitle = pwaT('pwa.installTitle');
            const pwaSubtitle = pwaT('pwa.installSubtitle');
            const pwaButton = pwaT('pwa.installButton');
            
            const banner = document.getElementById('pwa-install-banner');
            if (banner) {
                banner.innerHTML = `
                    <div class="pwa-bar-container">
                        <img src="/static/nexx-logo.png" alt="NEXX" class="pwa-bar-icon" onerror="this.style.display='none'">
                        <div class="pwa-bar-content">
                            <div class="pwa-bar-title">${pwaTitle}</div>
                            <div class="pwa-bar-subtitle">${pwaSubtitle}</div>
                        </div>
                        <button id="pwa-install-btn" class="pwa-bar-button">${pwaButton}</button>
                        <button id="pwa-close-btn" class="pwa-bar-close">√ó</button>
                    </div>
                `;
                
                // Re-attach event listeners
                document.getElementById('pwa-install-btn')?.addEventListener('click', async () => {
                    if (deferredPrompt) {
                        deferredPrompt.prompt();
                        const { outcome } = await deferredPrompt.userChoice;
                        console.log('PWA install:', outcome);
                        deferredPrompt = null;
                        banner.style.display = 'none';
                    }
                });
                
                document.getElementById('pwa-close-btn')?.addEventListener('click', () => {
                    banner.style.display = 'none';
                    localStorage.setItem('pwa-install-dismissed', 'true');
                });
            }
        };
        
        const installBanner = document.createElement('div');
        installBanner.id = 'pwa-install-banner';
        installBanner.style.cssText = 'display:none;position:fixed;bottom:0;left:0;right:0;z-index:9999;width:100%;';
        document.body.appendChild(installBanner);
        
        // Add bar style
        const style = document.createElement('style');
        style.textContent = `
            .pwa-bar-container {
                background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
                color: white;
                padding: 12px 16px;
                display: flex;
                align-items: center;
                gap: 12px;
                box-shadow: 0 -4px 20px rgba(0,0,0,0.2);
                border-top: 1px solid rgba(255,255,255,0.1);
                animation: slideUpBar 0.4s ease-out;
            }
            .pwa-bar-icon {
                width: 48px;
                height: 48px;
                border-radius: 12px;
                background: white;
                padding: 4px;
                flex-shrink: 0;
                object-fit: contain;
                box-shadow: 0 2px 8px rgba(0,0,0,0.15);
            }
            .pwa-bar-content {
                flex: 1;
                min-width: 0;
            }
            .pwa-bar-title {
                font-weight: 700;
                font-size: 15px;
                margin-bottom: 2px;
                line-height: 1.2;
            }
            .pwa-bar-subtitle {
                font-size: 12px;
                opacity: 0.9;
                line-height: 1.2;
            }
            .pwa-bar-button {
                background: white;
                color: #1e3a8a;
                border: none;
                padding: 10px 20px;
                border-radius: 10px;
                font-weight: 700;
                cursor: pointer;
                white-space: nowrap;
                font-size: 13px;
                box-shadow: 0 2px 8px rgba(0,0,0,0.15);
                transition: transform 0.2s, box-shadow 0.2s;
                flex-shrink: 0;
            }
            .pwa-bar-button:hover {
                transform: translateY(-1px);
                box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            }
            .pwa-bar-button:active {
                transform: translateY(0);
            }
            .pwa-bar-close {
                background: rgba(255,255,255,0.15);
                border: none;
                color: white;
                width: 32px;
                height: 32px;
                border-radius: 8px;
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 20px;
                flex-shrink: 0;
                transition: background 0.2s;
            }
            .pwa-bar-close:hover {
                background: rgba(255,255,255,0.25);
            }
            @keyframes slideUpBar {
                from {
                    opacity: 0;
                    transform: translateY(100%);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
            @media (max-width: 480px) {
                .pwa-bar-container {
                    padding: 10px 12px;
                    gap: 10px;
                }
                .pwa-bar-icon {
                    width: 40px;
                    height: 40px;
                }
                .pwa-bar-title {
                    font-size: 14px;
                }
                .pwa-bar-subtitle {
                    font-size: 11px;
                }
                .pwa-bar-button {
                    padding: 8px 16px;
                    font-size: 12px;
                }
            }
        `;
        document.head.appendChild(style);
        
        // Update banner when language changes
        if (window.i18n) {
            window.i18n.subscribe(() => {
                updateInstallBanner();
            });
        }
        
        // Initial update
        setTimeout(updateInstallBanner, 100);
        
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            // Show install banner after 3 seconds
            setTimeout(() => {
                if (!localStorage.getItem('pwa-install-dismissed')) {
                    updateInstallBanner();
                    installBanner.style.display = 'block';
                }
            }, 3000);
        });
        
        window.addEventListener('appinstalled', () => {
            console.log('‚úÖ PWA installed');
            installBanner.style.display = 'none';
            const installedMsg = pwaT('pwa.installed');
            if (window.showToast) window.showToast(installedMsg, 'success');
        });
    </script>
</body>
</html>
